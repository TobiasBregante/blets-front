{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[24],{QIdG:function(e,t,a){\"use strict\";a.r(t);var n=a(\"q1tI\"),l=a.n(n),s=a(\"yTzP\"),r=a(\"7VV5\"),o=a(\"BRJb\"),c=a(\"o0o1\"),u=a.n(c),i=a(\"HaE+\"),p=a(\"ODXe\"),d=a(\"nOHt\"),g=a(\"r5vi\"),m=a(\"Lxlj\"),b=a.n(m),f=a(\"+xep\"),h=l.a.createElement,x=function(e){var t=e.transaction,a=Object(n.useRef)(null),l=Object(n.useRef)(null),s=Object(n.useRef)(null),r=Object(n.useRef)(null),o=Object(n.useState)(\"\"),c=o[0],u=o[1];return Object(n.useEffect)((function(){t.proof_payment&&u(a.current.offsetWidth)})),h(\"article\",{className:\"col-12 col-sm-12 col-lg-12 col-xl-12 col-sells\"},h(\"ul\",null,h(\"li\",null,\"Negocio: \",h(\"span\",{className:\"text-dark\"},h(\"strong\",null,t.product.business))),h(\"li\",null,\"Canal:\",h(\"span\",null,h(\"strong\",null,\"organic\"===t.token_influencer?h(\"span\",{className:\"ml-1 badge bg-primary text-light\"},\"Org\\xe1nico \",h(\"span\",{className:\"badge bg-danger text-light p-1\"},\"sin descuento\")):h(\"span\",{className:\"ml-1 badge bg-success text-light\"},\"Referido \",h(\"span\",{className:\"badge bg-primary text-light p-1\"},\"con descuento\"))))),h(\"li\",null,\"Precio: \",h(\"span\",{className:\"text-success\"},h(\"strong\",null,\"organic\"===t.token_influencer?h(b.a,{value:t.product.amount,displayType:\"text\",thousandSeparator:!0,prefix:\"$\"}):h(b.a,{value:t.product.amount-t.product.amount*t.product.discount/100,displayType:\"text\",thousandSeparator:!0,prefix:\"$\"}),\" ARS\"))),h(\"li\",null,\"Estado:\",h(\"strong\",null,\"pending\"===t.status_transaction?h(\"span\",{className:\"ml-1 badge bg-warning text-light\"},\"Pendiente\"):h(\"span\",{className:\"ml-1 badge bg-success text-light\"},\"Aprobado\")))),h(\"input\",{onClick:function(e){null!==l&&(l.current.classList.toggle(\"d-block\"),e.target.classList.toggle(\"btn-danger\"),e.target.value=\"Producto\"===e.target.value?\"Cerrar\":\"Producto\")},type:\"button\",className:\"btn btn-primary\",value:\"Producto\"}),h(\"input\",{onClick:function(e){null!==s&&(s.current.classList.toggle(\"d-block\"),e.target.classList.toggle(\"btn-danger\"),e.target.value=\"Cliente\"===e.target.value?\"Cerrar\":\"Cliente\")},type:\"button\",className:\"btn btn-primary\",value:\"Cliente\"}),h(\"input\",{onClick:function(e){null!==r&&(r.current.classList.toggle(\"d-block\"),e.target.classList.toggle(\"btn-danger\"),e.target.value=\"Comprobante de pago\"===e.target.value?\"Cerrar comprobante\":\"Comprobante de pago\",u(a.current.offsetWidth))},type:\"button\",className:\"btn btn-primary\",value:\"Comprobante de pago\"}),h(\"ul\",{className:\"content-description-prod-transaction-proof d-none\",ref:r},h(\"li\",{ref:a},h(\"p\",{className:\"p-2 bg-warning col-2\"},\"comprobante de pago\"),h(f.CloudinaryContext,{cloudName:\"blets\"},h(f.Image,{className:\"card-img\",publicId:\"\".concat(t.proof_payment,\".jpg\")},h(f.Transformation,{crop:\"scale\",quality:\"40\",width:c-50,dpr:\"auto\"}))))),h(\"ul\",{className:\"content-description-prod-transaction d-none\",ref:l},h(\"li\",null,\"T\\xedtulo: \",h(\"strong\",null,t.product.title)),h(\"li\",{className:\"desc-card-view-transaction\"},\"Descripci\\xf3n:\",h(\"p\",{className:\"p-3 d-inline\"},h(\"strong\",null,\" \",t.product.description))),h(\"li\",null,\"Localidad: \",h(\"strong\",null,t.product.location)),h(\"li\",null,\"Negocio: \",h(\"strong\",null,t.product.business)),h(\"li\",null,\"Categor\\xeda \",h(\"strong\",null,t.product.type))),h(\"ul\",{className:\"content-description-prod-transaction d-none\",ref:s},h(\"li\",null,\"Nombre: \",h(\"strong\",null,t.payer.name)),h(\"li\",null,\"Apellido: \",h(\"strong\",null,t.payer.surname)),h(\"li\",null,\"Email: \",h(\"strong\",null,t.payer.email)),h(\"li\",null,\"Cod. \\xe1rea: \",h(\"strong\",null,\"(\",t.payer.phone.area_code,\")\"),\" Tel: \",h(\"strong\",null,t.payer.phone.number)),h(\"li\",null,\"Localidad: \",h(\"strong\",null,t.payer.location)),h(\"li\",null,\"C\\xf3d. Postal: \",h(\"strong\",null,t.payer.address.zip_code)),h(\"li\",null,\"Calle: \",h(\"strong\",null,t.payer.address.street_name)),h(\"li\",null,\"Altura: \",h(\"strong\",null,t.payer.address.street_number))))},v=a(\"tluV\"),y=a(\"vDqi\"),N=a.n(y),_=l.a.createElement,k=function(e){var t=e.dateFilter,a=Object(n.useState)([]),s=a[0],r=a[1],o=Object(g.a)([\"user\"]),c=Object(p.a)(o,2),m=c[0],b=(c[1],Object(n.useState)(!1)),f=b[0],h=b[1],y=Object(d.useRouter)(),k=function(){var e=Object(i.a)(u.a.mark((function e(){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),e.next=3,N.a.get(\"\".concat(\"https://apiblets.herokuapp.com\",\"/v1/product/transaction/sells\"),{headers:{\"Content-Type\":\"application/json\",\"Access-Control-Allow-Origin\":\"*\",date_filter:t}});case 3:return a=e.sent,e.next=6,a.data;case 6:return n=e.sent,e.next=9,n;case 9:if(e.t1=e.sent,!e.t1){e.next=12;break}e.t1=n.status;case 12:if(e.t0=e.t1,!e.t0){e.next=15;break}e.t0=t;case 15:if(e.t2=e.t0,!e.t2){e.next=18;break}h(!1);case 18:r(n);case 19:case\"end\":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){m.user&&\"seller\"!==m.user.rol?y.push(\"/\"):m.user||y.push(\"/\"),k()}),[t]),_(l.a.Fragment,null,200==s.status&&s.transaction.length>0?s.transaction.map((function(e,t){return _(x,{transaction:e,key:t})})):_(\"p\",null,\"No hay transacciones disponibles\"),_(v.a.OnloadArticlesComponent,{status:f}))},w=a(\"wd/R\"),C=a.n(w),O=l.a.createElement,j=function(e){var t=Object(n.useState)([]),a=t[0],s=t[1],r=Object(n.useState)(C()().format(\"YYYY-MM-DD\")),o=r[0],c=r[1],p=function(){var e=Object(i.a)(u.a.mark((function e(){var t,a,n,l=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:C()().format(\"YYYY-MM-DD\"),e.next=3,N.a.get(\"\".concat(\"https://apiblets.herokuapp.com\",\"/v1/product/transaction/sells/metrics\"),{headers:{\"Content-Type\":\"application/json\",\"Access-Control-Allow-Origin\":\"*\",date_filter:t}});case 3:return a=e.sent,e.next=6,a.data;case 6:n=e.sent,console.log(n),s(n);case 9:case\"end\":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){p()}),[e]),O(l.a.Fragment,null,O(\"article\",{className:\"content-metrics-header-mybusiness col-12 col-sm-12 col-lg-12 col-xl-12\"},O(\"ul\",null,O(\"li\",{title:\"Pago exitoso\"},O(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",fill:\"currentColor\",className:\"bi bi-bag-check text-primary\",viewBox:\"0 0 16 16\"},O(\"path\",{fillRule:\"evenodd\",d:\"M10.854 8.146a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708 0z\"}),O(\"path\",{d:\"M8 1a2.5 2.5 0 0 1 2.5 2.5V4h-5v-.5A2.5 2.5 0 0 1 8 1zm3.5 3v-.5a3.5 3.5 0 1 0-7 0V4H1v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V4h-3.5zM2 5h12v9a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V5z\"})),O(\"span\",{className:\"text-primary d-block\"},a.success)),O(\"li\",{title:\"Pago pendiente\"},O(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",fill:\"currentColor\",className:\"bi bi-bag-dash text-secondary\",viewBox:\"0 0 16 16\"},O(\"path\",{fillRule:\"evenodd\",d:\"M5.5 10a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 0 1H6a.5.5 0 0 1-.5-.5z\"}),O(\"path\",{d:\"M8 1a2.5 2.5 0 0 1 2.5 2.5V4h-5v-.5A2.5 2.5 0 0 1 8 1zm3.5 3v-.5a3.5 3.5 0 1 0-7 0V4H1v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V4h-3.5zM2 5h12v9a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V5z\"})),O(\"span\",{className:\"text-secondary d-block\"},a.pending)),O(\"li\",null,O(\"label\",{className:\"badge p-2\"},O(\"span\",{className:\"m-1 d-block text-dark\"},\"Filtrar por fecha\"),a.latest_sell&&O(\"input\",{className:\"d-block form-control\",onChange:function(e){c(C()(e.target.value).format(\"YYYY-MM-DD\"));var t=C()(e.target.value).format(\"YYYY-MM-DD\");p(t),console.log(t),console.log(a)},type:\"date\",min:C()(a.latest_sell[0].create_at_filter),max:C()().format(\"YYYY-MM-DD\"),value:o}))),O(\"li\",null,O(\"span\",{className:\"text-dark\"},\"Cash total: \"),O(\"span\",{className:\"text-success badge bg-dark p-2 metrics-badge-amount\"},O(b.a,{value:a?a.amount_total:0,displayType:\"text\",thousandSeparator:!0,prefix:\"$\"}))),O(\"li\",null,O(\"span\",{className:\"text-dark\"},\"Cash aprobado: \"),O(\"span\",{className:\"text-success badge bg-dark p-2 metrics-badge-amount\"},O(b.a,{value:a?a.amount_total_success:0,displayType:\"text\",thousandSeparator:!0,prefix:\"$\"}))),O(\"li\",null,O(\"span\",{className:\"text-dark\"},\"Cash pendiente: \"),O(\"span\",{className:\"text-warning badge bg-dark p-2 metrics-badge-amount\"},O(b.a,{value:a?a.amount_total_pending:0,displayType:\"text\",thousandSeparator:!0,prefix:\"$\"}))),O(\"li\",null,O(\"span\",{className:\"text-dark\"},\"Cash rechazado: \"),O(\"span\",{className:\"text-danger badge bg-dark p-2 metrics-badge-amount\"},O(b.a,{value:a?a.amount_total_cancel:0,displayType:\"text\",thousandSeparator:!0,prefix:\"$\"}))))),O(\"article\",{className:\"col-12 col-sm-12 col-lg-12 col-xl-12 content-sells-pending\"},O(k,{dateFilter:o})))},Y=a(\"zyEs\"),E=l.a.createElement,M=function(){return E(l.a.Fragment,null,E(Y.a,null,E(s.a,null),E(\"main\",{className:\"container-fluid\"},E(r.a,null),E(\"section\",{className:\"row section-home\"},E(j,null)),E(o.a,null))))},T=l.a.createElement;t.default=function(){return T(M,null)}},yPZu:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/transacciones\",function(){return a(\"QIdG\")}])}},[[\"yPZu\",0,1,5,7,2,3,4,6,8]]]);","extractedComments":[]}