{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\Admin\\\\Desktop\\\\Customers\\\\blets\\\\components\\\\product\\\\product.component.jsx\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useState, useEffect, useRef } from 'react';\nimport { useRouter } from \"next/router\";\nimport CurrencyFormat from 'react-currency-format';\nimport SendTransaction from './send.transaction.component';\nimport RemoveProduct from '../management/remove.product.component';\nimport EditProduct from '../management/edit.product.component';\nimport { Image, Transformation, CloudinaryContext } from 'cloudinary-react';\nimport Link from 'next/link';\nimport SwitchPrice from './price.convert.component';\nimport axios from 'axios';\nimport moment from 'moment';\nimport GetItem from '../localStorage/getItem';\n\nvar Product = function Product(_ref) {\n  _s();\n\n  var _cookies$user9, _cookies$user9$auth, _cookies$user10, _cookies$user10$auth, _cookies$user11, _cookies$user11$auth;\n\n  var router = _ref.router;\n  var Router = useRouter();\n  var imgRef = useRef(null);\n\n  var _Router$query = Router === null || Router === void 0 ? void 0 : Router.query,\n      id = _Router$query.id,\n      name = _Router$query.name;\n\n  var imgContent = useRef(null);\n\n  var _useState = useState(false),\n      credential = _useState[0],\n      setCredential = _useState[1];\n\n  var _useState2 = useState(''),\n      imgContentState = _useState2[0],\n      setImgContentState = _useState2[1];\n\n  var _useState3 = useState(GetItem('user')),\n      cookies = _useState3[0],\n      setCookie = _useState3[1];\n\n  var _useState4 = useState([]),\n      product = _useState4[0],\n      setProduct = _useState4[1];\n\n  var _useState5 = useState('d-none'),\n      packageSendingAlert = _useState5[0],\n      setPackageSendingAlert = _useState5[1];\n\n  var _useState6 = useState('accept-payment-close'),\n      acceptPaymentSwitch = _useState6[0],\n      setAcceptPaymentSwitch = _useState6[1];\n\n  var _useState7 = useState('Comprar'),\n      valueBtnSwitchPayment = _useState7[0],\n      setValueBtnSwitchPayment = _useState7[1];\n\n  var _useState8 = useState(''),\n      discountHiddeNotLogged = _useState8[0],\n      setDiscountHiddeNotLogged = _useState8[1];\n\n  var _useState9 = useState('/img/img-not-found.png'),\n      imageProd = _useState9[0],\n      setImageProd = _useState9[1];\n\n  var _useState10 = useState(false),\n      imageIsSelected = _useState10[0],\n      setImageIsSelected = _useState10[1];\n\n  var _useState11 = useState(false),\n      paymentIsOpen = _useState11[0],\n      setPaymentIsOpen = _useState11[1];\n\n  var _useState12 = useState({}),\n      imgUpload = _useState12[0],\n      setImgUpload = _useState12[1];\n\n  var _useState13 = useState(''),\n      discount = _useState13[0],\n      setDiscount = _useState13[1];\n\n  var _useState14 = useState(''),\n      amount = _useState14[0],\n      setAmount = _useState14[1];\n\n  var _useState15 = useState(false),\n      isTransfer = _useState15[0],\n      setIsTransfer = _useState15[1];\n\n  var _useState16 = useState(false),\n      isWhatsApp = _useState16[0],\n      setIsWhatsApp = _useState16[1];\n\n  var _useState17 = useState(''),\n      userPayer = _useState17[0],\n      setUserPayer = _useState17[1];\n\n  var _useState18 = useState(false),\n      finishPay = _useState18[0],\n      setFinishPay = _useState18[1];\n\n  var HandlerFindUser = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(idUser) {\n      var getUser, resUser;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return axios.get(\"\".concat(process.env.API_PATH, \"/v1/user/\").concat(idUser));\n\n            case 2:\n              getUser = _context.sent;\n              _context.next = 5;\n              return getUser === null || getUser === void 0 ? void 0 : getUser.data;\n\n            case 5:\n              resUser = _context.sent;\n              return _context.abrupt(\"return\", resUser);\n\n            case 7:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function HandlerFindUser(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var getAllProduct = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var _cookies$user;\n\n      var fetchAll, dataFetch;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return fetch(\"\".concat(process.env.API_PATH, \"/v1/product/\").concat(id), {\n                headers: {\n                  'Content-Type': 'application/json',\n                  'Access-Control-Allow-Origin': '*'\n                }\n              });\n\n            case 2:\n              fetchAll = _context2.sent;\n              _context2.next = 5;\n              return fetchAll.json();\n\n            case 5:\n              dataFetch = _context2.sent;\n              setProduct(dataFetch);\n              setAmount(dataFetch === null || dataFetch === void 0 ? void 0 : dataFetch.amount);\n              setDiscount(dataFetch === null || dataFetch === void 0 ? void 0 : dataFetch.discount);\n              !(cookies === null || cookies === void 0 ? void 0 : (_cookies$user = cookies.user) === null || _cookies$user === void 0 ? void 0 : _cookies$user.discount_token) || !(cookies === null || cookies === void 0 ? void 0 : cookies.user) || (product === null || product === void 0 ? void 0 : product.discount) <= 0 ? setDiscountHiddeNotLogged('d-none') : setDiscountHiddeNotLogged('');\n              return _context2.abrupt(\"return\", dataFetch);\n\n            case 11:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function getAllProduct() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    var _cookies$user2, _cookies$user3, _imgContent$current;\n\n    (product === null || product === void 0 ? void 0 : product.business) === (cookies === null || cookies === void 0 ? void 0 : (_cookies$user2 = cookies.user) === null || _cookies$user2 === void 0 ? void 0 : _cookies$user2.business) || (cookies === null || cookies === void 0 ? void 0 : (_cookies$user3 = cookies.user) === null || _cookies$user3 === void 0 ? void 0 : _cookies$user3.rol) === 'master' ? setCredential(true) : setCredential(false);\n    (product === null || product === void 0 ? void 0 : product.img) && setImgContentState(imgContent === null || imgContent === void 0 ? void 0 : (_imgContent$current = imgContent.current) === null || _imgContent$current === void 0 ? void 0 : _imgContent$current.offsetWidth);\n  });\n  useEffect(function () {\n    var _cookies$user4;\n\n    if ((Router === null || Router === void 0 ? void 0 : Router.asPath) !== (Router === null || Router === void 0 ? void 0 : Router.route)) {\n      getAllProduct();\n    }\n\n    HandlerFindUser(cookies === null || cookies === void 0 ? void 0 : (_cookies$user4 = cookies.user) === null || _cookies$user4 === void 0 ? void 0 : _cookies$user4.id).then(function (r) {\n      var _r$phone, _r$phone2;\n\n      setUserPayer({\n        area_code: r === null || r === void 0 ? void 0 : (_r$phone = r.phone) === null || _r$phone === void 0 ? void 0 : _r$phone.area_code,\n        number: r === null || r === void 0 ? void 0 : (_r$phone2 = r.phone) === null || _r$phone2 === void 0 ? void 0 : _r$phone2.number\n      });\n    })[\"catch\"](function (t) {\n      return console.error(t);\n    });\n  }, [Router]);\n\n  var handlerAcceptPaymentSwitch = function handlerAcceptPaymentSwitch(e) {\n    if (cookies === null || cookies === void 0 ? void 0 : cookies.user) {\n      if (acceptPaymentSwitch === 'accept-payment-close') {\n        setPaymentIsOpen(true);\n        setAcceptPaymentSwitch('');\n      } else {\n        setPaymentIsOpen(false);\n        setAcceptPaymentSwitch('accept-payment-close');\n      }\n    } else {\n      window.location = '/iniciar-sesion';\n    }\n  },\n      handlerTransaction = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(isWhatsApp) {\n      var _cookies$user5, _cookies$user6, _cookies$user7, _cookies$user8, _imgRef$current;\n\n      var customer, frmData, resTransaction;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return HandlerFindUser(cookies === null || cookies === void 0 ? void 0 : (_cookies$user5 = cookies.user) === null || _cookies$user5 === void 0 ? void 0 : _cookies$user5.id);\n\n            case 2:\n              customer = _context3.sent;\n              setPackageSendingAlert('');\n              frmData = new FormData();\n              frmData.append('id_product', product === null || product === void 0 ? void 0 : product._id);\n              frmData.append('product', JSON.stringify(product));\n              frmData.append('payer', JSON.stringify(customer));\n              frmData.append('token_influencer', (cookies === null || cookies === void 0 ? void 0 : (_cookies$user6 = cookies.user) === null || _cookies$user6 === void 0 ? void 0 : _cookies$user6.discount_token) ? cookies === null || cookies === void 0 ? void 0 : (_cookies$user7 = cookies.user) === null || _cookies$user7 === void 0 ? void 0 : _cookies$user7.discount_token : 'organic');\n              frmData.append('id_client', cookies === null || cookies === void 0 ? void 0 : (_cookies$user8 = cookies.user) === null || _cookies$user8 === void 0 ? void 0 : _cookies$user8.id);\n              frmData.append('status_transaction', isWhatsApp ? 'whatsapp' : 'pending');\n              frmData.append('proof_payment', !isWhatsApp ? imgRef === null || imgRef === void 0 ? void 0 : (_imgRef$current = imgRef.current) === null || _imgRef$current === void 0 ? void 0 : _imgRef$current.files[0] : false);\n              frmData.append('create_at', \"\".concat(moment()._d));\n              frmData.append('create_at_filter', moment().format('YYYY-MM-DD'));\n              _context3.next = 16;\n              return SendTransaction(frmData, cookies);\n\n            case 16:\n              resTransaction = _context3.sent;\n              setIsTransfer(false);\n              setFinishPay(true);\n              return _context3.abrupt(\"return\", resTransaction);\n\n            case 20:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function handlerTransaction(_x2) {\n      return _ref4.apply(this, arguments);\n    };\n  }(),\n      imgPreviewProd = function imgPreviewProd(e) {\n    var reader = new FileReader();\n    setImageIsSelected(true);\n\n    reader.onloadend = function () {\n      setImageProd(reader.result);\n    };\n\n    if (e.target.files[0]) {\n      setImgUpload(e.target.files[0]);\n      reader.readAsDataURL(e.target.files[0]);\n    } else {\n      setImageProd('');\n    }\n  },\n      handlerIsWhatsApp = function handlerIsWhatsApp() {\n    var _window, _window$location;\n\n    handlerTransaction(true);\n    setIsTransfer(false);\n    setIsWhatsApp(true);\n    window.open(\"https://api.whatsapp.com/send?phone=\".concat(userPayer === null || userPayer === void 0 ? void 0 : userPayer.area_code).concat(userPayer === null || userPayer === void 0 ? void 0 : userPayer.number, \"&text=Hola!%20\").concat((_window = window) === null || _window === void 0 ? void 0 : (_window$location = _window.location) === null || _window$location === void 0 ? void 0 : _window$location.href, \".%20Gracias!\"));\n  },\n      handlerIsTransfer = function handlerIsTransfer() {\n    setIsWhatsApp(false);\n    setIsTransfer(true);\n  }; // handlerCheckoutProMP = async () => {\n  //     const payment = await ( await axios.post(`${process.env.API_PATH}/v1/product/transaction/mp/checkoutpro`, {}) )?.data\n  //     console.log(payment)\n  //     handlerTransaction()\n  //     window.open(\n  //         payment?.response?.init_point,\n  //         \"Popup\",\"toolbar=no, location=no, statusbar=no, menubar=no, scrollbars=1, resizable=0, width=580, height=600, top=30\"\n  //     )\n  // }\n\n\n  return __jsx(React.Fragment, null, __jsx(\"section\", {\n    className: \"row section-product\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 9\n    }\n  }, __jsx(\"article\", {\n    className: \"col-12 col-sm-12 col-lg-12 col-xl-12 p-0 mt-1\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 13\n    }\n  }, __jsx(\"nav\", {\n    \"aria-label\": \"breadcrumb breadcrumb-product-open\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 17\n    }\n  }, __jsx(\"ol\", {\n    className: \"breadcrumb breadcrumb-product-open\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 21\n    }\n  }, __jsx(\"li\", {\n    className: \"breadcrumb-item text-primary\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 25\n    }\n  }, __jsx(Link, {\n    href: \"/\",\n    as: \"/\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 70\n    }\n  }, __jsx(\"a\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 92\n    }\n  }, \"Inicio\"))), __jsx(\"li\", {\n    className: \"breadcrumb-item active text-primary\",\n    \"aria-current\": \"page\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 25\n    }\n  }, name)))), __jsx(\"article\", {\n    className: \"col-12 col-sm-12 col-lg-8 col-xl-8\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 13\n    }\n  }, __jsx(\"article\", {\n    ref: imgContent,\n    className: \"col-12 content-img-prod-open\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 17\n    }\n  }, credential && __jsx(RemoveProduct, {\n    product: product,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 36\n    }\n  }), credential && __jsx(EditProduct, {\n    product: product,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 36\n    }\n  }), product.img ? __jsx(CloudinaryContext, {\n    cloudName: \"blets\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 27\n    }\n  }, __jsx(Image, {\n    className: \"card-img\",\n    publicId: \"\".concat(product.img, \".jpg\"),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 29\n    }\n  }, __jsx(Transformation, {\n    crop: \"scale\",\n    quality: \"40\",\n    width: imgContentState - 50,\n    dpr: \"auto\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 33\n    }\n  }))) : ''), __jsx(\"article\", {\n    className: \"product-description-content col-12 p-5\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 17\n    }\n  }, __jsx(\"h2\", {\n    className: \"col-2\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 21\n    }\n  }, \"Descripci\\xF3n\"), __jsx(\"hr\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 59\n    }\n  }), __jsx(\"ul\", {\n    type: \"none\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 21\n    }\n  }, __jsx(\"li\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 25\n    }\n  }, \"- Categor\\xEDa: \", __jsx(\"span\", {\n    className: \"text-primary\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 42\n    }\n  }, __jsx(\"strong\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 73\n    }\n  }, product.type)), __jsx(\"br\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 111\n    }\n  })), product.subcategory ? __jsx(\"li\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 31\n    }\n  }, \"- Edici\\xF3n: \", __jsx(\"span\", {\n    className: \"text-primary\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 44\n    }\n  }, __jsx(\"strong\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 75\n    }\n  }, product.subcategory))) : '', __jsx(\"li\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 25\n    }\n  }, \"- Nombre del negocio: \", __jsx(\"span\", {\n    className: \"text-primary\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 51\n    }\n  }, __jsx(\"strong\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 82\n    }\n  }, product.business))), __jsx(\"li\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 25\n    }\n  }, \"- Ubicaci\\xF3n: \", __jsx(\"span\", {\n    className: \"text-primary\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 42\n    }\n  }, __jsx(\"strong\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 73\n    }\n  }, product.location)))), __jsx(\"hr\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 26\n    }\n  }), __jsx(\"pre\", {\n    className: \"wrapping\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 21\n    }\n  }, __jsx(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 25\n    }\n  }, product.description)))), __jsx(\"article\", {\n    className: \"col-12 col-sm-12 col-lg-4 col-xl-4 p-3\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 13\n    }\n  }, __jsx(\"article\", {\n    className: \"col-12 card\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 17\n    }\n  }, __jsx(\"article\", {\n    className: \"card-body\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 21\n    }\n  }, __jsx(\"pre\", {\n    className: \"wrapping\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 25\n    }\n  }, __jsx(\"h1\", {\n    className: \"text-secondary component-info-buy\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 29\n    }\n  }, product.title)), __jsx(\"h4\", {\n    className: \"text-dark component-info-buy\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 25\n    }\n  }, amount && discount && __jsx(SwitchPrice.SwitchPriceAuth, {\n    discount: discount,\n    amount: amount,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 55\n    }\n  })), __jsx(\"strike\", {\n    className: \"text-secondary\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 25\n    }\n  }, __jsx(\"h5\", {\n    className: \"component-info-buy \".concat(discountHiddeNotLogged),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 29\n    }\n  }, __jsx(CurrencyFormat, {\n    value: product.amount,\n    displayType: 'text',\n    thousandSeparator: true,\n    prefix: '$',\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 33\n    }\n  }))), __jsx(\"p\", {\n    className: \"col-12 col-sm-12 col-lg-6 col-xl-6 p-0 m-0\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 25\n    }\n  }, __jsx(\"span\", {\n    className: \"\".concat(!product.shipping ? 'd-none' : 'd-block', \" shipping-open bg-primary text-light\"),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 29\n    }\n  }, \"Lo recib\\xEDs en tu domicilio\"), __jsx(\"span\", {\n    className: \"shipping-open bg-success text-light d-block\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 29\n    }\n  }, \"Env\\xEDo gratis\")))), __jsx(\"article\", {\n    className: \"col-12 card mt-1\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 17\n    }\n  }, __jsx(\"article\", {\n    className: \"card-body\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 21\n    }\n  }, __jsx(\"p\", {\n    className: \"text-dark component-info-buy\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 25\n    }\n  }, \"Pag\\xE1 al contado o en cuotas con\", __jsx(\"span\", {\n    className: \"text-info\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 25\n    }\n  }, \" \", __jsx(\"strong\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 54\n    }\n  }, \"Mercado Pago\"))), __jsx(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 25\n    }\n  }, __jsx(\"span\", {\n    className: \"bg-primary p-2 text-light\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 29\n    }\n  }, \"Se encuentra en \", __jsx(\"strong\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 49\n    }\n  }, product.location))), __jsx(\"hr\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 25\n    }\n  }), __jsx(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 25\n    }\n  }, __jsx(\"img\", {\n    className: \"ico-payments\",\n    src: \"../img/visa.png\",\n    alt: \"Visa\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 29\n    }\n  }), __jsx(\"img\", {\n    className: \"ico-payments\",\n    src: \"../img/mastercard.png\",\n    alt: \"Mastercard\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 29\n    }\n  }), __jsx(\"img\", {\n    className: \"ico-payments\",\n    src: \"../img/transfer.png\",\n    alt: \"Transferencia\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 29\n    }\n  }), __jsx(\"img\", {\n    className: \"ico-payments\",\n    src: \"../img/mp.webp\",\n    alt: \"Mercado Pago\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 29\n    }\n  })), __jsx(\"article\", {\n    className: \"col-12 accept-payment \".concat(acceptPaymentSwitch),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 25\n    }\n  }, __jsx(\"article\", {\n    className: \"content--btn-payment p-5 \".concat(acceptPaymentSwitch),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 29\n    }\n  }, __jsx(\"button\", {\n    type: \"button\",\n    className: \"btn text-danger btn-close-btn-payment\",\n    onClick: handlerAcceptPaymentSwitch,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 33\n    }\n  }), __jsx(\"article\", {\n    className: \"btn-content\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 33\n    }\n  }, __jsx(\"div\", {\n    className: \"alert alert-success mt-1 mb-1 \".concat(packageSendingAlert),\n    role: \"alert\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 37\n    }\n  }, \"Tu pedido se ha enviado! Pronto nos pondremos en cont\\xE1cto. Sea paciente, por favor.\"), isTransfer && __jsx(React.Fragment, null, __jsx(\"p\", {\n    className: \"mt-3\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 45\n    }\n  }, \"Continuar por transferencia bancaria: \", __jsx(\"span\", {\n    className: \"text-light bg-primary\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 103\n    }\n  }, \"CBU/ALIAS \", product === null || product === void 0 ? void 0 : product.CBU)), __jsx(\"p\", {\n    className: \"mt-4\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 273,\n      columnNumber: 45\n    }\n  }, __jsx(\"strong\", {\n    className: \"text-light bg-primary badge\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 49\n    }\n  }, \"Atenci\\xF3n\"), __jsx(\"small\", {\n    className: \"d-block\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 49\n    }\n  }, \"Env\\xEDar screenshot del comprobante de pago\"), __jsx(\"label\", {\n    htmlFor: \"screenshot-payment\",\n    className: \"btn btn-success\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 49\n    }\n  }, \"Seleccionar imagen\"), __jsx(\"input\", {\n    ref: imgRef,\n    type: \"file\",\n    onChange: imgPreviewProd,\n    className: \"d-none\",\n    id: \"screenshot-payment\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 279,\n      columnNumber: 49\n    }\n  }), __jsx(\"img\", {\n    src: imageProd,\n    alt: \"preview proof\",\n    className: \"proof-preview-prod d-block\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 49\n    }\n  }), imageIsSelected && __jsx(\"input\", {\n    type: \"button\",\n    onClick: function onClick() {\n      return handlerTransaction(false);\n    },\n    className: \"btn btn-warning d-block\",\n    value: \"Finalizar y Enviar\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 282,\n      columnNumber: 72\n    }\n  }))), !isTransfer && !finishPay && __jsx(\"span\", {\n    className: \"text-dark\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 295,\n      columnNumber: 41\n    }\n  }, __jsx(\"strong\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 296,\n      columnNumber: 45\n    }\n  }, __jsx(\"img\", {\n    src: \"/img/car.svg\",\n    alt: \"car\",\n    className: \"mr-2\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 297,\n      columnNumber: 49\n    }\n  }), \"Ya casi es tuyo! \\xBFC\\xF3mo quer\\xE9s pagar?\")), __jsx(\"p\", {\n    className: \"mt-4 d-flex\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 304,\n      columnNumber: 37\n    }\n  }, __jsx(\"button\", {\n    onClick: handlerIsTransfer,\n    type: \"button\",\n    className: \"btn btn-primary text-light d-block m-1 ml-auto mr-auto\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 305,\n      columnNumber: 41\n    }\n  }, \"Por transferencia\", __jsx(\"img\", {\n    src: \"/img/card.svg\",\n    alt: \"wpp\",\n    className: \"ml-2\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 311,\n      columnNumber: 45\n    }\n  })), __jsx(\"button\", {\n    onClick: handlerIsWhatsApp,\n    type: \"button\",\n    className: \"btn btn-success text-light d-block m-1 ml-auto mr-auto\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 313,\n      columnNumber: 41\n    }\n  }, \"Por WhatsApp\", __jsx(\"img\", {\n    src: \"/img/wpp.svg\",\n    alt: \"wpp\",\n    className: \"ml-2\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 319,\n      columnNumber: 45\n    }\n  })))))), (cookies === null || cookies === void 0 ? void 0 : (_cookies$user9 = cookies.user) === null || _cookies$user9 === void 0 ? void 0 : (_cookies$user9$auth = _cookies$user9.auth) === null || _cookies$user9$auth === void 0 ? void 0 : _cookies$user9$auth.user_verify) && __jsx(\"input\", {\n    disabled: !(cookies === null || cookies === void 0 ? void 0 : (_cookies$user10 = cookies.user) === null || _cookies$user10 === void 0 ? void 0 : (_cookies$user10$auth = _cookies$user10.auth) === null || _cookies$user10$auth === void 0 ? void 0 : _cookies$user10$auth.user_verify),\n    onClick: handlerAcceptPaymentSwitch,\n    type: \"button\",\n    className: \"btn btn-buy-now btn-primary text-light col-12\",\n    value: valueBtnSwitchPayment,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 327,\n      columnNumber: 33\n    }\n  }), !(cookies === null || cookies === void 0 ? void 0 : (_cookies$user11 = cookies.user) === null || _cookies$user11 === void 0 ? void 0 : (_cookies$user11$auth = _cookies$user11.auth) === null || _cookies$user11$auth === void 0 ? void 0 : _cookies$user11$auth.user_verify) && __jsx(\"p\", {\n    className: \"alert bg-info mt-1\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 338,\n      columnNumber: 33\n    }\n  }, \"Completa tu datos para realizar esta compra\"))))), paymentIsOpen && __jsx(\"article\", {\n    className: \"content-onload-shadow\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 347,\n      columnNumber: 28\n    }\n  }));\n}; // 0720006988000038698918\n\n\n_s(Product, \"MtWs2LNLiMkO48LhFSwrJ5kn+Qk=\", false, function () {\n  return [useRouter];\n});\n\n_c = Product;\nexport default Product;\n\nvar _c;\n\n$RefreshReg$(_c, \"Product\");","map":{"version":3,"sources":["C:/Users/Admin/Desktop/Customers/blets/components/product/product.component.jsx"],"names":["useState","useEffect","useRef","useRouter","CurrencyFormat","SendTransaction","RemoveProduct","EditProduct","Image","Transformation","CloudinaryContext","Link","SwitchPrice","axios","moment","GetItem","Product","router","Router","imgRef","query","id","name","imgContent","credential","setCredential","imgContentState","setImgContentState","cookies","setCookie","product","setProduct","packageSendingAlert","setPackageSendingAlert","acceptPaymentSwitch","setAcceptPaymentSwitch","valueBtnSwitchPayment","setValueBtnSwitchPayment","discountHiddeNotLogged","setDiscountHiddeNotLogged","imageProd","setImageProd","imageIsSelected","setImageIsSelected","paymentIsOpen","setPaymentIsOpen","imgUpload","setImgUpload","discount","setDiscount","amount","setAmount","isTransfer","setIsTransfer","isWhatsApp","setIsWhatsApp","userPayer","setUserPayer","finishPay","setFinishPay","HandlerFindUser","idUser","get","process","env","API_PATH","getUser","data","resUser","getAllProduct","fetch","headers","fetchAll","json","dataFetch","user","discount_token","business","rol","img","current","offsetWidth","asPath","route","then","r","area_code","phone","number","t","console","error","handlerAcceptPaymentSwitch","e","window","location","handlerTransaction","customer","frmData","FormData","append","_id","JSON","stringify","files","_d","format","resTransaction","imgPreviewProd","reader","FileReader","onloadend","result","target","readAsDataURL","handlerIsWhatsApp","open","href","handlerIsTransfer","type","subcategory","description","title","shipping","CBU","auth","user_verify"],"mappings":"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","sourcesContent":["import { useState, useEffect, useRef } from 'react';\r\nimport { useRouter } from \"next/router\";\r\nimport CurrencyFormat from 'react-currency-format';\r\nimport SendTransaction from './send.transaction.component';\r\nimport RemoveProduct from '../management/remove.product.component';\r\nimport EditProduct from '../management/edit.product.component';\r\nimport {Image, Transformation, CloudinaryContext} from 'cloudinary-react';\r\nimport Link from 'next/link';\r\nimport SwitchPrice from './price.convert.component'\r\nimport axios from 'axios'\r\nimport moment from 'moment';\r\nimport GetItem from '../localStorage/getItem';\r\n\r\nconst Product = ({ router }) => {\r\n    const Router = useRouter();\r\n    const imgRef = useRef(null);\r\n    const { id, name } = Router?.query;\r\n    const imgContent = useRef(null);\r\n    const [credential, setCredential] = useState(false);\r\n    const [imgContentState, setImgContentState] = useState('');\r\n    const [cookies, setCookie] = useState(GetItem('user'));\r\n    const [product, setProduct] = useState([]);\r\n    const [packageSendingAlert, setPackageSendingAlert] = useState('d-none')\r\n    const [acceptPaymentSwitch, setAcceptPaymentSwitch] = useState('accept-payment-close');\r\n    const [valueBtnSwitchPayment, setValueBtnSwitchPayment] = useState('Comprar');\r\n    const [discountHiddeNotLogged, setDiscountHiddeNotLogged] = useState('')\r\n    const [imageProd, setImageProd] = useState('/img/img-not-found.png');\r\n    const [imageIsSelected, setImageIsSelected] = useState(false);\r\n    const [paymentIsOpen, setPaymentIsOpen] = useState(false);\r\n    const [imgUpload, setImgUpload] = useState({});\r\n    const [discount, setDiscount] = useState('');\r\n    const [amount, setAmount] = useState('');\r\n    const [isTransfer, setIsTransfer] = useState(false);\r\n    const [isWhatsApp, setIsWhatsApp] = useState(false);\r\n    const [userPayer, setUserPayer] = useState('');\r\n    const [finishPay, setFinishPay] = useState(false);\r\n\r\n    const HandlerFindUser = async idUser => {\r\n        const getUser = await axios.get(`${process.env.API_PATH}/v1/user/${idUser}`),\r\n        resUser = await getUser?.data\r\n        return resUser\r\n    }\r\n    const getAllProduct = async () => {\r\n        const fetchAll = await fetch(`${process.env.API_PATH}/v1/product/${id}`, {\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Access-Control-Allow-Origin': '*'\r\n            }\r\n        })\r\n        const dataFetch = await fetchAll.json();\r\n        setProduct(dataFetch);\r\n        setAmount(dataFetch?.amount)\r\n        setDiscount(dataFetch?.discount)\r\n        !cookies?.user?.discount_token \r\n        || !cookies?.user\r\n        || product?.discount <= 0 \r\n        ? setDiscountHiddeNotLogged('d-none')\r\n        : setDiscountHiddeNotLogged('')\r\n        return dataFetch\r\n    }\r\n\r\n    useEffect(() => {\r\n        product?.business === cookies?.user?.business \r\n        || cookies?.user?.rol === 'master' \r\n        ? setCredential(true) : setCredential(false);\r\n        product?.img && setImgContentState(imgContent?.current?.offsetWidth);\r\n    })\r\n    \r\n    useEffect(() => {\r\n        if (Router?.asPath !== Router?.route) {\r\n            getAllProduct()\r\n        }\r\n        HandlerFindUser(cookies?.user?.id)\r\n        .then(r => {\r\n            setUserPayer({\r\n                area_code: r?.phone?.area_code,\r\n                number: r?.phone?.number\r\n            })\r\n        })\r\n        .catch(t => console.error(t))\r\n    }, [Router])\r\n    \r\n    const handlerAcceptPaymentSwitch = e => {\r\n        if(cookies?.user){\r\n            if(acceptPaymentSwitch === 'accept-payment-close'){\r\n                setPaymentIsOpen(true);\r\n                setAcceptPaymentSwitch('');\r\n            }else{\r\n                setPaymentIsOpen(false);\r\n                setAcceptPaymentSwitch('accept-payment-close');\r\n            } \r\n        }else{\r\n            window.location = '/iniciar-sesion';\r\n        }\r\n    },\r\n    handlerTransaction = async (isWhatsApp) => {\r\n        const customer = await HandlerFindUser(cookies?.user?.id)\r\n        setPackageSendingAlert('');\r\n        let frmData = new FormData();\r\n        frmData.append('id_product', product?._id);\r\n        frmData.append('product', JSON.stringify(product));\r\n        frmData.append('payer', JSON.stringify(customer));\r\n        frmData.append('token_influencer', (cookies?.user?.discount_token) ? cookies?.user?.discount_token : 'organic');\r\n        frmData.append('id_client', cookies?.user?.id);\r\n        frmData.append('status_transaction', isWhatsApp ? 'whatsapp' : 'pending');\r\n        frmData.append('proof_payment', !isWhatsApp ? imgRef?.current?.files[0] : false);\r\n        frmData.append('create_at', `${moment()._d}`);\r\n        frmData.append('create_at_filter', moment().format('YYYY-MM-DD'));\r\n        const resTransaction = await SendTransaction(frmData, cookies)\r\n        setIsTransfer(false)\r\n        setFinishPay(true)\r\n\r\n        return resTransaction\r\n    },\r\n    imgPreviewProd = e => {\r\n        let reader = new FileReader()\r\n        setImageIsSelected(true)\r\n        reader.onloadend = () => {\r\n            setImageProd(reader.result);\r\n        }\r\n        if (e.target.files[0]){\r\n            setImgUpload(e.target.files[0])\r\n            reader.readAsDataURL(e.target.files[0]);\r\n        }else{\r\n            setImageProd('');\r\n        }\r\n    },\r\n    handlerIsWhatsApp = () => {\r\n        handlerTransaction(true);\r\n        setIsTransfer(false);\r\n        setIsWhatsApp(true);\r\n        window.open(`https://api.whatsapp.com/send?phone=${userPayer?.area_code}${userPayer?.number}&text=Hola!%20${window?.location?.href}.%20Gracias!`)\r\n    },\r\n    handlerIsTransfer = () => {\r\n        setIsWhatsApp(false);\r\n        setIsTransfer(true);\r\n    }    \r\n    // handlerCheckoutProMP = async () => {\r\n    //     const payment = await ( await axios.post(`${process.env.API_PATH}/v1/product/transaction/mp/checkoutpro`, {}) )?.data\r\n    //     console.log(payment)\r\n    //     handlerTransaction()\r\n    //     window.open(\r\n    //         payment?.response?.init_point,\r\n    //         \"Popup\",\"toolbar=no, location=no, statusbar=no, menubar=no, scrollbars=1, resizable=0, width=580, height=600, top=30\"\r\n    //     )\r\n    // }\r\n\r\n    return(\r\n        <>\r\n        <section className=\"row section-product\">\r\n            <article className='col-12 col-sm-12 col-lg-12 col-xl-12 p-0 mt-1'>\r\n                <nav aria-label=\"breadcrumb breadcrumb-product-open\">\r\n                    <ol className=\"breadcrumb breadcrumb-product-open\">\r\n                        <li className=\"breadcrumb-item text-primary\"><Link href=\"/\" as='/'><a>Inicio</a></Link></li>\r\n                        <li className=\"breadcrumb-item active text-primary\" aria-current=\"page\">{name}</li>\r\n                    </ol>\r\n                </nav>\r\n            </article>\r\n            <article className=\"col-12 col-sm-12 col-lg-8 col-xl-8\">\r\n                <article ref={imgContent} className=\"col-12 content-img-prod-open\">\r\n                    {credential && <RemoveProduct product={product}/>}\r\n                    {credential && <EditProduct product={product}/>}\r\n                    {\r\n                        product.img \r\n                        ? <CloudinaryContext cloudName=\"blets\">\r\n                            <Image className='card-img' publicId={`${product.img}.jpg`}>\r\n                                <Transformation crop='scale' quality='40' width={(imgContentState - 50)} dpr='auto'/>\r\n                            </Image>\r\n                        </CloudinaryContext>\r\n                        : ''\r\n                    }\r\n                </article>\r\n                <article className=\"product-description-content col-12 p-5\">\r\n                    <h2 className='col-2'>Descripción</h2><hr/>\r\n                    <ul type='none'>\r\n                        <li>\r\n                            - Categoría: <span className='text-primary'><strong>{product.type}</strong></span><br/>\r\n                        </li>\r\n                        {\r\n                            product.subcategory \r\n                            ? <li>\r\n                                - Edición: <span className='text-primary'><strong>{product.subcategory}</strong></span>\r\n                            </li>\r\n                            : '' \r\n                        }\r\n                        <li>\r\n                            - Nombre del negocio: <span className='text-primary'><strong>{product.business}</strong></span>\r\n                        </li>\r\n                        <li>\r\n                            - Ubicación: <span className='text-primary'><strong>{product.location}</strong></span>\r\n                        </li>\r\n                    </ul><hr/>\r\n                    <pre className='wrapping'>\r\n                        <p>\r\n                            {product.description}\r\n                        </p>\r\n                    </pre>\r\n                </article>\r\n            </article>\r\n            <article className=\"col-12 col-sm-12 col-lg-4 col-xl-4 p-3\">\r\n                <article className=\"col-12 card\">\r\n                    <article className=\"card-body\">\r\n                        <pre className='wrapping'>\r\n                            <h1 className=\"text-secondary component-info-buy\">\r\n                                {product.title}\r\n                            </h1>\r\n                        </pre>\r\n                        <h4 className={`text-dark component-info-buy`}>\r\n                            {\r\n                                amount && discount && <SwitchPrice.SwitchPriceAuth \r\n                                    discount={discount} \r\n                                    amount={amount}\r\n                                />\r\n                            }\r\n                        </h4>\r\n                        <strike className='text-secondary'>\r\n                            <h5 className={`component-info-buy ${discountHiddeNotLogged}`}>\r\n                                <CurrencyFormat \r\n                                    value={product.amount} \r\n                                    displayType={'text'} \r\n                                    thousandSeparator={true} \r\n                                    prefix={'$'}/>\r\n                            </h5>\r\n                        </strike>\r\n                        <p className='col-12 col-sm-12 col-lg-6 col-xl-6 p-0 m-0'>\r\n                            <span className={`${(!product.shipping) ? 'd-none' : 'd-block'} shipping-open bg-primary text-light`}>\r\n                                Lo recibís en tu domicilio\r\n                            </span>\r\n                            <span className={`shipping-open bg-success text-light d-block`}>\r\n                                Envío gratis\r\n                            </span>\r\n                        </p>\r\n                    </article>\r\n                </article>\r\n                <article className=\"col-12 card mt-1\">\r\n                    <article className=\"card-body\">\r\n                        <p className=\"text-dark component-info-buy\">Pagá al contado o en cuotas con \r\n                        <span className=\"text-info\"> <strong>Mercado Pago</strong></span></p>\r\n                        <p>\r\n                            <span className='bg-primary p-2 text-light'>\r\n                                Se encuentra en <strong>{product.location}</strong>\r\n                            </span>\r\n                        </p>\r\n                        <hr/>\r\n                        <p>\r\n                            <img className='ico-payments' src=\"../img/visa.png\" alt=\"Visa\"/>\r\n                            <img className='ico-payments' src=\"../img/mastercard.png\" alt=\"Mastercard\"/>\r\n                            <img className='ico-payments' src=\"../img/transfer.png\" alt=\"Transferencia\"/>\r\n                            <img className='ico-payments' src=\"../img/mp.webp\" alt=\"Mercado Pago\"/>\r\n                        </p>\r\n                        <article className={`col-12 accept-payment ${acceptPaymentSwitch}`}>\r\n                            <article className={`content--btn-payment p-5 ${acceptPaymentSwitch}`}>\r\n                                <button \r\n                                    type=\"button\" \r\n                                    className='btn text-danger btn-close-btn-payment' \r\n                                    onClick={ handlerAcceptPaymentSwitch }\r\n                                />\r\n                                <article className=\"btn-content\">\r\n                                    {/* <input \r\n                                        onClick={() => handlerCheckoutProMP()}\r\n                                        className='btn btn-primary d-block mb-1'\r\n                                        type=\"button\" \r\n                                        value=\"Continuar con Mercado Pago\"\r\n                                    /> */}\r\n                                    <div className={`alert alert-success mt-1 mb-1 ${packageSendingAlert}`} role=\"alert\">\r\n                                        Tu pedido se ha enviado! Pronto nos pondremos en contácto.\r\n                                        Sea paciente, por favor.\r\n                                    </div>\r\n                                    {\r\n                                        isTransfer && (\r\n                                            <>\r\n                                            <p className='mt-3'>Continuar por transferencia bancaria: <span className='text-light bg-primary'>CBU/ALIAS {product?.CBU}</span></p>\r\n                                            <p className='mt-4'>\r\n                                                <strong className='text-light bg-primary badge'>Atención</strong>\r\n                                                <small className='d-block'>Envíar screenshot del comprobante de pago</small>\r\n                                                <label htmlFor=\"screenshot-payment\" className='btn btn-success'>\r\n                                                    Seleccionar imagen\r\n                                                </label>\r\n                                                <input ref={imgRef} type=\"file\" onChange={imgPreviewProd} className='d-none' id='screenshot-payment'/>\r\n                                                <img src={imageProd} alt=\"preview proof\" className='proof-preview-prod d-block'/>\r\n                                                {\r\n                                                    imageIsSelected && <input \r\n                                                        type='button' \r\n                                                        onClick={() => handlerTransaction(false)}\r\n                                                        className='btn btn-warning d-block'\r\n                                                        value='Finalizar y Enviar'\r\n                                                    />\r\n                                                }\r\n                                            </p>\r\n                                            </>\r\n                                        )\r\n                                    }\r\n                                    {\r\n                                        !isTransfer && !finishPay && (\r\n                                        <span className='text-dark'>\r\n                                            <strong>\r\n                                                <img src=\"/img/car.svg\" alt=\"car\" className='mr-2'/>\r\n                                                Ya casi es tuyo! ¿Cómo querés pagar?\r\n                                            </strong>\r\n                                        </span>\r\n\r\n                                        )\r\n                                    }\r\n                                    <p className=\"mt-4 d-flex\">\r\n                                        <button \r\n                                            onClick={ handlerIsTransfer }\r\n                                            type=\"button\" \r\n                                            className='btn btn-primary text-light d-block m-1 ml-auto mr-auto'\r\n                                        >\r\n                                            Por transferencia\r\n                                            <img src=\"/img/card.svg\" alt=\"wpp\" className='ml-2'/>\r\n                                        </button>\r\n                                        <button \r\n                                            onClick={ handlerIsWhatsApp }\r\n                                            type=\"button\" \r\n                                            className='btn btn-success text-light d-block m-1 ml-auto mr-auto'\r\n                                        >\r\n                                            Por WhatsApp\r\n                                            <img src=\"/img/wpp.svg\" alt=\"wpp\" className='ml-2'/>\r\n                                        </button>\r\n                                    </p>\r\n                                </article>       \r\n                            </article>\r\n                        </article>\r\n                        {\r\n                            cookies?.user?.auth?.user_verify && (\r\n                                <input \r\n                                    disabled={!cookies?.user?.auth?.user_verify}\r\n                                    onClick={handlerAcceptPaymentSwitch} \r\n                                    type='button'\r\n                                    className=\"btn btn-buy-now btn-primary text-light col-12\" \r\n                                    value={valueBtnSwitchPayment}\r\n                                />\r\n                            )\r\n                        }\r\n                        {\r\n                            !cookies?.user?.auth?.user_verify && (\r\n                                <p className=\"alert bg-info mt-1\">\r\n                                    Completa tu datos para realizar esta compra\r\n                                </p>\r\n                            )\r\n                        }\r\n                    </article>\r\n                </article>\r\n            </article>\r\n        </section>\r\n        { paymentIsOpen && <article className='content-onload-shadow'/> }\r\n        </>\r\n    )\r\n}\r\n// 0720006988000038698918\r\nexport default Product;"]},"metadata":{},"sourceType":"module"}