{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport Link from \"next/link\";\nimport { useRouter } from \"next/router\";\nimport { useEffect } from \"react\";\nimport { useRef } from \"react\";\nimport { useState } from \"react\";\nimport { useCookies } from 'react-cookie';\n\nvar Register = function Register() {\n  // get value inputs of form login\n  var _useState = useState(''),\n      user = _useState[0],\n      setUser = _useState[1];\n\n  var _useState2 = useState(''),\n      pdw = _useState2[0],\n      setPdw = _useState2[1];\n\n  var _useState3 = useState(''),\n      userEmail = _useState3[0],\n      setEmail = _useState3[1];\n\n  var _useState4 = useState([]),\n      geoData = _useState4[0],\n      setGeoData = _useState4[1];\n\n  var _useState5 = useState(''),\n      fullname = _useState5[0],\n      setFullname = _useState5[1];\n\n  var _useState6 = useState(''),\n      location = _useState6[0],\n      setLocation = _useState6[1];\n\n  var userWarningNull = useRef(null);\n  var userWarning = useRef(null);\n  var userSuccess = useRef(null); // user cookie\n\n  var _useCookies = useCookies(['user']),\n      _useCookies2 = _slicedToArray(_useCookies, 3),\n      cookies = _useCookies2[0],\n      setCookie = _useCookies2[1],\n      removeCookie = _useCookies2[2]; // switch for view or not pdw when write\n\n\n  var _useState7 = useState('password'),\n      viewPdw = _useState7[0],\n      setViewPdw = _useState7[1];\n\n  var _useState8 = useState('d-none'),\n      viewPdwClose = _useState8[0],\n      setViewPdwClose = _useState8[1];\n\n  var _useState9 = useState('d-block'),\n      viewPdwOpen = _useState9[0],\n      setViewPdwOpen = _useState9[1]; // array list of South Am√©rica provinces, Argentina\n\n\n  useEffect(function () {\n    var geoDataFetch = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var geo, geoJSON;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return fetch('https://apis.datos.gob.ar/georef/api/provincias');\n\n              case 2:\n                geo = _context.sent;\n                _context.next = 5;\n                return geo.json();\n\n              case 5:\n                geoJSON = _context.sent;\n                setGeoData(geoJSON.provincias);\n\n              case 7:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function geoDataFetch() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    geoDataFetch();\n  }, []); // handler of view pdw or not\n\n  var handlePdwView = function handlePdwView() {\n    if (viewPdwClose === 'd-none') {\n      setViewPdwClose('d-block');\n      setViewPdwOpen('d-none');\n      setViewPdw('text');\n    } else {\n      setViewPdwClose('d-none');\n      setViewPdwOpen('d-block');\n      setViewPdw('password');\n    }\n  }; // data since user create\n\n\n  var valueDate = new Date();\n  var options = {\n    year: 'numeric',\n    month: 'long',\n    day: 'numeric'\n  }; // handler of the start session of the login\n\n  var userSessionStart = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(username, userPdw) {\n      var statusDataUser, dataVerifyUser, res, datares;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              statusDataUser = true;\n              dataVerifyUser = [username, fullname, location, userPdw, userEmail];\n              dataVerifyUser.forEach(function (element) {\n                if (element === '') return statusDataUser = false;\n              });\n\n              if (!statusDataUser) {\n                _context2.next = 13;\n                break;\n              }\n\n              _context2.next = 6;\n              return fetch(\"\".concat(process.env.API_PATH, \"/v1/user/signup\"), {\n                body: JSON.stringify({\n                  since_create: valueDate.toLocaleDateString(\"es-AR\", options),\n                  username: username,\n                  fullname: fullname,\n                  location: location,\n                  pdw: userPdw,\n                  email: userEmail\n                }),\n                method: 'POST',\n                headers: {\n                  'Content-Type': 'application/json',\n                  'Access-Control-Allow-Origin': '*'\n                }\n              });\n\n            case 6:\n              res = _context2.sent;\n              _context2.next = 9;\n              return res.json();\n\n            case 9:\n              datares = _context2.sent;\n\n              if (!datares.create_user) {\n                userWarning.current.classList.toggle('d-block');\n                setTimeout(function () {\n                  userWarning.current.classList.toggle('d-block');\n                }, 2500);\n              } else {\n                userSuccess.current.classList.toggle('d-block');\n                setTimeout(function () {\n                  userSuccess.current.classList.toggle('d-block');\n                  window.location = '/iniciar-sesion';\n                }, 2500);\n              }\n\n              _context2.next = 15;\n              break;\n\n            case 13:\n              userWarningNull.current.classList.toggle('d-block');\n              setTimeout(function () {\n                userWarningNull.current.classList.toggle('d-block');\n              }, 2500);\n\n            case 15:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function userSessionStart(_x, _x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }(); // event submit and get data of the user for the login\n\n\n  var handleSubmit = function handleSubmit(e) {\n    e.preventDefault(); // get for parameter the data of the form login for your verification\n\n    userSessionStart(user, pdw);\n  }; // handler value input username\n\n\n  var handleChangeUsername = function handleChangeUsername(e) {\n    setUser(e.target.value);\n  };\n\n  var handleChangeFullname = function handleChangeFullname(e) {\n    setFullname(e.target.value);\n  };\n\n  var handleChangeLocation = function handleChangeLocation(e) {\n    setLocation(e.target.value);\n  };\n\n  var handleChangePdw = function handleChangePdw(e) {\n    setPdw(e.target.value);\n  };\n\n  var handleChangeEmail = function handleChangeEmail(e) {\n    setEmail(e.target.value);\n  };\n\n  return __jsx(\"article\", {\n    className: \"content-frm-login col-10 col-sm-10 col-lg-4 col-xl-4 m-auto\"\n  }, __jsx(\"h1\", {\n    className: \"title-register\"\n  }, \"Reg\\xEDstrate ahora\"), __jsx(\"form\", {\n    onSubmit: handleSubmit,\n    id: \"frm-login\"\n  }, __jsx(\"p\", {\n    ref: userSuccess,\n    className: \"user-warning d-none bg-success p-2\"\n  }, \"Se ha creado exitosamente!\"), __jsx(\"p\", {\n    ref: userWarning,\n    className: \"user-warning d-none bg-secondary p-2\"\n  }, \"Este usuario ya existe\"), __jsx(\"p\", {\n    ref: userWarningNull,\n    className: \"user-warning d-none bg-secondary p-2\"\n  }, \"Los datos est\\xE1n incompletos\"), __jsx(\"input\", {\n    onChange: handleChangeFullname,\n    type: \"text\",\n    name: \"fullname\",\n    placeholder: \"Nombre completo\"\n  }), __jsx(\"input\", {\n    onChange: handleChangeUsername,\n    type: \"text\",\n    name: \"user\",\n    placeholder: \"Nombre de usuario\"\n  }), __jsx(\"input\", {\n    onChange: handleChangeEmail,\n    type: \"email\",\n    name: \"email\",\n    placeholder: \"Correo electr\\xF3nico\"\n  }), __jsx(\"select\", {\n    onChange: handleChangeLocation,\n    name: \"location\"\n  }, geoData ? geoData.map(function (location) {\n    return __jsx(\"option\", {\n      key: location.id\n    }, location.nombre);\n  }) : __jsx(\"option\", null, \"No hay provincias\")), __jsx(\"article\", {\n    className: \"col-12 p-0\"\n  }, __jsx(\"input\", {\n    onChange: handleChangePdw,\n    type: viewPdw,\n    name: \"pdw\",\n    placeholder: \"Contrase\\xF1a\"\n  }), __jsx(\"button\", {\n    onClick: handlePdwView,\n    type: \"button\",\n    className: \"btn-switch-pdw\"\n  }, __jsx(\"svg\", {\n    width: \"1em\",\n    height: \"1em\",\n    viewBox: \"0 0 16 16\",\n    className: \"bi bi-eye-slash \".concat(viewPdwClose),\n    fill: \"currentColor\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, __jsx(\"path\", {\n    d: \"M13.359 11.238C15.06 9.72 16 8 16 8s-3-5.5-8-5.5a7.028 7.028 0 0 0-2.79.588l.77.771A5.944 5.944 0 0 1 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.134 13.134 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755-.165.165-.337.328-.517.486l.708.709z\"\n  }), __jsx(\"path\", {\n    d: \"M11.297 9.176a3.5 3.5 0 0 0-4.474-4.474l.823.823a2.5 2.5 0 0 1 2.829 2.829l.822.822zm-2.943 1.299l.822.822a3.5 3.5 0 0 1-4.474-4.474l.823.823a2.5 2.5 0 0 0 2.829 2.829z\"\n  }), __jsx(\"path\", {\n    d: \"M3.35 5.47c-.18.16-.353.322-.518.487A13.134 13.134 0 0 0 1.172 8l.195.288c.335.48.83 1.12 1.465 1.755C4.121 11.332 5.881 12.5 8 12.5c.716 0 1.39-.133 2.02-.36l.77.772A7.029 7.029 0 0 1 8 13.5C3 13.5 0 8 0 8s.939-1.721 2.641-3.238l.708.709z\"\n  }), __jsx(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M13.646 14.354l-12-12 .708-.708 12 12-.708.708z\"\n  })), __jsx(\"svg\", {\n    width: \"1em\",\n    height: \"1em\",\n    viewBox: \"0 0 16 16\",\n    className: \"bi bi-eye \".concat(viewPdwOpen),\n    fill: \"currentColor\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, __jsx(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8zM1.173 8a13.134 13.134 0 0 0 1.66 2.043C4.12 11.332 5.88 12.5 8 12.5c2.12 0 3.879-1.168 5.168-2.457A13.134 13.134 0 0 0 14.828 8a13.133 13.133 0 0 0-1.66-2.043C11.879 4.668 10.119 3.5 8 3.5c-2.12 0-3.879 1.168-5.168 2.457A13.133 13.133 0 0 0 1.172 8z\"\n  }), __jsx(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5zM4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0z\"\n  })))), __jsx(\"input\", {\n    className: \"btn\",\n    type: \"submit\",\n    value: \"Registrarme\"\n  }), __jsx(Link, {\n    href: \"/iniciar-sesion\",\n    as: \"/iniciar-sesion\"\n  }, __jsx(\"a\", null, \"Iniciar sesi\\xF3n\"))));\n};\n\nexport default Register;","map":null,"metadata":{},"sourceType":"module"}