{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\nimport { useRef, useState } from \"react\";\nimport { useCookies } from 'react-cookie';\nimport axios from 'axios';\n\nconst AddProduct = props => {\n  const imgRef = useRef(null);\n  const [cookies, setCookie] = useCookies(['user']);\n  const {\n    0: imageProd,\n    1: setImageProd\n  } = useState('/img/img-not-found.png');\n  const {\n    0: imgUpload,\n    1: setImgUpload\n  } = useState({});\n  const {\n    0: title,\n    1: setTitle\n  } = useState('');\n  const {\n    0: titleSuccessProduct,\n    1: setTitleSuccessProduct\n  } = useState('d-none');\n  const {\n    0: description,\n    1: setDescription\n  } = useState('');\n  const {\n    0: amount,\n    1: setAmount\n  } = useState('');\n  const {\n    0: discount,\n    1: setDiscount\n  } = useState('');\n  const {\n    0: shipping,\n    1: setShipping\n  } = useState('');\n  const {\n    0: business,\n    1: setBusiness\n  } = useState('');\n  const {\n    0: location,\n    1: setLocation\n  } = useState('');\n  const {\n    0: type,\n    1: setType\n  } = useState('');\n  const {\n    0: payment,\n    1: setPayment\n  } = useState('');\n\n  const handleAddProduct = async () => {\n    await fetch(`${process.env.API_PATH}/v1/auth`, {\n      body: JSON.stringify({\n        token: await cookies.user.token\n      }),\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*',\n        'token': cookies.user.token\n      }\n    }).then(res => res.json()).then(async success => {\n      if (success.auth) {\n        let frmData = new FormData();\n        frmData.append('img', imgRef.current.files[0]);\n        frmData.append('title', title);\n        frmData.append('description', description);\n        frmData.append('amount', amount);\n        frmData.append('discount', discount);\n        frmData.append('payment', payment);\n        frmData.append('shipping', shipping);\n        frmData.append('business', business);\n        frmData.append('location', location);\n        frmData.append('type', type);\n        axios.post(`${process.env.API_PATH}/v1/product`, frmData, {\n          headers: {\n            'Content-Type': 'multipart/form-data',\n            'Access-Control-Allow-Origin': '*',\n            'token': cookies.user.token\n          }\n        }).then(productAdd => {\n          if (productAdd.data.insert) {\n            setTitleSuccessProduct('d-block');\n            setTimeout(() => {\n              setTitleSuccessProduct('d-none');\n            }, 2500);\n          } else {\n            console.log('error: product is not added');\n          }\n        }).catch(errAdd => console.error(errAdd));\n      }\n    }).catch(err => console.error(err));\n  };\n\n  const handlerSubmit = e => {\n    e.preventDefault();\n    handleAddProduct();\n    setLocation('');\n    setDescription('');\n    setAmount('');\n    setDiscount('');\n    setShipping('');\n    setBusiness('');\n    setTitle('');\n    setType('');\n    setImageProd('');\n    setPayment('');\n  };\n\n  const handleInputTitle = e => {\n    setTitle(e.target.value);\n  };\n\n  const handleInputDescription = e => {\n    setDescription(`${e.target.value}`);\n  };\n\n  const handleInputAmount = e => {\n    setAmount(e.target.value);\n  };\n\n  const handleInputDiscount = e => {\n    setDiscount(e.target.value);\n  };\n\n  const handleInputShipping = e => {\n    setShipping(e.target.value);\n  };\n\n  const handleInputBusiness = e => {\n    setBusiness(e.target.value);\n  };\n\n  const handleInputLocation = e => {\n    setLocation(e.target.value);\n  };\n\n  const handleInputType = e => {\n    setType(e.target.value);\n  };\n\n  const imgPreviewProd = e => {\n    let reader = new FileReader();\n\n    reader.onloadend = () => {\n      setImageProd(reader.result);\n    };\n\n    if (e.target.files[0]) {\n      setImgUpload(e.target.files[0]);\n      reader.readAsDataURL(e.target.files[0]);\n    } else {\n      setImageProd('');\n    }\n  };\n\n  const handleInputPayment = e => {\n    setPayment(e.target.value);\n  };\n\n  return __jsx(React.Fragment, null, __jsx(\"article\", {\n    className: \"col-12 col-sm-12 col-lg-6 col-xl-6 content-frm-login frm-create-influencer\"\n  }, __jsx(\"article\", {\n    className: \"col-12\"\n  }, __jsx(\"h4\", {\n    className: \"d-inline-flex\"\n  }, \"Agregar un producto\"), __jsx(\"svg\", {\n    width: \"1em\",\n    height: \"1em\",\n    viewBox: \"0 0 16 16\",\n    className: \"ml-2 bi bi-plus-circle\",\n    fill: \"currentColor\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, __jsx(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z\"\n  }), __jsx(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z\"\n  })), __jsx(\"form\", {\n    onSubmit: handlerSubmit\n  }, __jsx(\"small\", {\n    className: \"p-2 m-0\"\n  }, \"T\\xEDtulo \", __jsx(\"span\", {\n    className: \"text-danger\"\n  }, \"*\")), __jsx(\"input\", {\n    required: true,\n    onChange: handleInputTitle,\n    className: \"d-block\",\n    type: \"text\",\n    placeholder: \"T\\xEDtulo\",\n    value: title\n  }), __jsx(\"small\", {\n    className: \"p-2 m-0\"\n  }, \"Seleccionar una im\\xE1gen \", __jsx(\"span\", {\n    className: \"text-danger\"\n  }, \"*\")), __jsx(\"input\", {\n    ref: imgRef,\n    required: true,\n    type: \"file\",\n    onChange: imgPreviewProd,\n    className: \"mt-2 mb-2\",\n    accept: \"image/*\"\n  }), __jsx(\"article\", {\n    style: {\n      backgroundImage: `url('${imageProd}')`\n    },\n    className: \"img-preview-prod\"\n  }), __jsx(\"small\", {\n    className: \"p-2 m-0\"\n  }, \"Categor\\xEDa \", __jsx(\"span\", {\n    className: \"text-danger\"\n  }, \"*\")), __jsx(\"select\", {\n    required: true,\n    onChange: handleInputType,\n    className: \"d-block bg-light\"\n  }, __jsx(\"option\", {\n    value: \"null\"\n  }, \"-- Seleccionar una opci\\xF3n --\"), __jsx(\"option\", {\n    value: \"accesorios\"\n  }, \"Accesorios\"), __jsx(\"option\", {\n    value: \"belleza\"\n  }, \"Belleza\"), __jsx(\"option\", {\n    value: \"bolsos-y-carteras\"\n  }, \"Bolsos y Carteras\"), __jsx(\"option\", {\n    value: \"celulares\"\n  }, \"Celulares\"), __jsx(\"option\", {\n    value: \"computacion\"\n  }, \"Computaci\\xF3n\"), __jsx(\"option\", {\n    value: \"consolas\"\n  }, \"Consolas\"), __jsx(\"option\", {\n    value: \"camaras\"\n  }, \"C\\xE1maras\"), __jsx(\"option\", {\n    value: \"deportes-y-fitness\"\n  }, \"Deportes y Fitness\"), __jsx(\"option\", {\n    value: \"dise\\xF1o\"\n  }, \"Dise\\xF1o\"), __jsx(\"option\", {\n    value: \"electrodomesticos\"\n  }, \"Electrodom\\xE9sticos\"), __jsx(\"option\", {\n    value: \"indumentarias\"\n  }, \"Indumentarias\"), __jsx(\"option\", {\n    value: \"joyas\"\n  }, \"Joyas\"), __jsx(\"option\", {\n    value: \"mates\"\n  }, \"Mates\"), __jsx(\"option\", {\n    value: \"marketing\"\n  }, \"Marketing\"), __jsx(\"option\", {\n    value: \"muebles\"\n  }, \"Muebles\"), __jsx(\"option\", {\n    value: \"musica\"\n  }, \"M\\xFAsica\"), __jsx(\"option\", {\n    value: \"viajes\"\n  }, \"Viajes\"), __jsx(\"option\", {\n    value: \"zapatos\"\n  }, \"Zapatos\"), __jsx(\"option\", {\n    value: \"empleos\"\n  }, \"Empleos\")), __jsx(\"small\", {\n    className: \"p-2 m-0\"\n  }, \"Precio \", __jsx(\"span\", {\n    className: \"text-danger\"\n  }, \"*\")), __jsx(\"input\", {\n    required: true,\n    onChange: handleInputAmount,\n    className: \"d-block\",\n    type: \"text\",\n    placeholder: \"Precio\",\n    value: amount\n  }), __jsx(\"small\", {\n    className: \"p-2 m-0\"\n  }, \"Descuento \", __jsx(\"span\", {\n    className: \"text-danger\"\n  }, \"*\")), __jsx(\"input\", {\n    required: true,\n    onChange: handleInputDiscount,\n    className: \"d-block\",\n    type: \"text\",\n    placeholder: \"Descuento\",\n    value: discount\n  }), __jsx(\"small\", {\n    className: \"p-2 m-0\"\n  }, \"Descripci\\xF3n \", __jsx(\"span\", {\n    className: \"text-danger\"\n  }, \"*\")), __jsx(\"textarea\", {\n    required: true,\n    onChange: handleInputDescription,\n    className: \"d-block\",\n    value: description,\n    placeholder: \"Descripci\\xF3n\"\n  }), __jsx(\"small\", {\n    className: \"p-2 m-0\"\n  }, \"Link Mercado Pago \", __jsx(\"span\", {\n    className: \"text-danger\"\n  }, \"*\")), __jsx(\"input\", {\n    required: true,\n    onChange: handleInputPayment,\n    className: \"d-block\",\n    type: \"text\",\n    placeholder: \"Link Mercado Pago\",\n    value: payment\n  }), __jsx(\"small\", {\n    className: \"p-2 m-0\"\n  }, \"Empresa \", __jsx(\"span\", {\n    className: \"text-danger\"\n  }, \"*\")), __jsx(\"input\", {\n    required: true,\n    onChange: handleInputBusiness,\n    className: \"d-block\",\n    type: \"text\",\n    placeholder: \"Empresa\",\n    value: business\n  }), __jsx(\"small\", {\n    className: \"p-2 m-0\"\n  }, \"Localidad \", __jsx(\"span\", {\n    className: \"text-danger\"\n  }, \"*\")), __jsx(\"input\", {\n    required: true,\n    onChange: handleInputLocation,\n    className: \"d-block\",\n    type: \"text\",\n    placeholder: \"Localidad\",\n    value: location\n  }), __jsx(\"small\", {\n    className: \"p-2 m-0\"\n  }, \"Env\\xEDos \", __jsx(\"span\", {\n    className: \"text-danger\"\n  }, \"*\")), __jsx(\"select\", {\n    required: true,\n    onChange: handleInputShipping,\n    className: \"mb-2 d-block bg-light\"\n  }, __jsx(\"option\", {\n    value: \"null\"\n  }, \"-- Seleccionar una opci\\xF3n --\"), __jsx(\"option\", {\n    value: \"true\"\n  }, \"Acepto env\\xEDos\"), __jsx(\"option\", {\n    value: \"false\"\n  }, \"No acepto env\\xEDos\")), __jsx(\"input\", {\n    onChange: handleInputTitle,\n    type: \"submit\",\n    value: \"Agregar\",\n    className: \"form-control d-block btn\"\n  }), __jsx(\"p\", {\n    className: `bg-success text-light add-success ${titleSuccessProduct}`\n  }, \"Se ha insertado con \\xE9xito!\")))));\n};\n\nexport default AddProduct;","map":null,"metadata":{},"sourceType":"module"}