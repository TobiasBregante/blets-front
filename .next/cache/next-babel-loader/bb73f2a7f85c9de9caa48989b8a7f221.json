{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\nimport { useRef } from \"react\";\nimport { useState } from \"react\";\nimport { useCookies } from 'react-cookie';\nimport axios from 'axios';\nimport { useRouter } from \"next/router\";\nimport CategoryList from './category.list.component';\nimport OnLoadComponent from '../onload.component';\n\nconst EditProduct = prop => {\n  const Router = useRouter();\n  const frmUpdate = useRef(null);\n  const beforeFrm = useRef(null);\n  const imgRef = useRef(null);\n  const [cookies, setCookie] = useCookies(['user']);\n  const {\n    0: imageProd,\n    1: setImageProd\n  } = useState('');\n  const {\n    0: title,\n    1: setTitle\n  } = useState('');\n  const {\n    0: titleSuccessProduct,\n    1: setTitleSuccessProduct\n  } = useState('d-none');\n  const {\n    0: description,\n    1: setDescription\n  } = useState('');\n  const {\n    0: amount,\n    1: setAmount\n  } = useState('');\n  const {\n    0: amountSale,\n    1: setAmountSale\n  } = useState('');\n  const {\n    0: discount,\n    1: setDiscount\n  } = useState('');\n  const {\n    0: shipping,\n    1: setShipping\n  } = useState('true');\n  const {\n    0: business,\n    1: setBusiness\n  } = useState('');\n  const {\n    0: location,\n    1: setLocation\n  } = useState('');\n  const {\n    0: type,\n    1: setType\n  } = useState('');\n  const {\n    0: contact,\n    1: setContact\n  } = useState('');\n  const {\n    0: CBU,\n    1: setCBU\n  } = useState('');\n  const {\n    0: subCategory,\n    1: setSubCategory\n  } = useState('');\n  const {\n    0: payment,\n    1: setPayment\n  } = useState('');\n  const {\n    0: onLoadAdd,\n    1: setOnLoadAdd\n  } = useState(false);\n  const {\n    0: hiddenBtn,\n    1: setHiddenBtn\n  } = useState('d-block');\n\n  const handleUpdateProduct = async () => {\n    await fetch(`${process.env.API_PATH}/v1/auth`, {\n      body: JSON.stringify({\n        token: await cookies.user.token\n      }),\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*',\n        'token': cookies.user.token\n      }\n    }).then(res => res.json()).then(async success => {\n      if (success.auth) {\n        let frmData = new FormData();\n        frmData.append('imgPublicId', prop.product.img);\n        frmData.append('img', imgRef.current.files[0]);\n        frmData.append('title', title);\n        frmData.append('description', description);\n        frmData.append('amount', amount);\n        frmData.append('amount_sale', amountSale);\n        frmData.append('discount', discount);\n        frmData.append('payment', payment);\n        frmData.append('shipping', shipping);\n        frmData.append('CBU', CBU);\n        frmData.append('contact_business', contact);\n        frmData.append('business', business);\n        frmData.append('location', location);\n        frmData.append('type', type);\n        frmData.append('subcategory', subCategory);\n        axios.put(`${process.env.API_PATH}/v1/product/update/${prop.product._id}`, frmData, {\n          headers: {\n            'Content-Type': 'multipart/form-data',\n            'Access-Control-Allow-Origin': '*',\n            'token': cookies.user.token\n          }\n        }).then(productAdd => {\n          if (productAdd.data.update) {\n            setOnLoadAdd(false);\n            Router.reload(window.location.pathname);\n            setTitleSuccessProduct('d-block');\n            setTimeout(() => {\n              setTitleSuccessProduct('d-none');\n            }, 2500);\n          } else {\n            console.log('error: product is not added');\n          }\n        }).catch(errAdd => console.error(errAdd));\n      }\n    }).catch(err => console.error(err));\n  };\n\n  const handlerSubmit = e => {\n    e.preventDefault();\n    setOnLoadAdd(true);\n    setHiddenBtn('d-none');\n    setLocation('');\n    setDescription('');\n    setAmount('');\n    setAmountSale('');\n    setDiscount('');\n    setBusiness('');\n    setContact('');\n    setCBU('');\n    setTitle('');\n    setType('');\n    setImageProd('');\n    setPayment('');\n    handleUpdateProduct();\n  };\n\n  const handleInputTitle = e => setTitle(e.target.value),\n        handleInputDescription = e => setDescription(`${e.target.value}`),\n        handleInputAmount = e => setAmount(e.target.value),\n        handleInputAmountSale = e => setAmountSale(e.target.value),\n        handleInputDiscount = e => setDiscount(e.target.value),\n        handleInputBusiness = e => setBusiness(e.target.value),\n        handleInputLocation = e => setLocation(e.target.value),\n        handleInputType = e => setType(e.target.value),\n        handleInputSubCategory = e => setSubCategory(e.target.value),\n        handleInputPayment = e => setPayment(e.target.value),\n        handleInputCBU = e => setCBU(e.target.value),\n        handleInputContact = e => setContact(e.target.value),\n        imgPreviewProd = e => {\n    let reader = new FileReader();\n\n    reader.onloadend = () => {\n      setImageProd(reader.result);\n    };\n\n    if (e.target.files[0]) {\n      reader.readAsDataURL(e.target.files[0]);\n    } else {\n      setImageProd('');\n    }\n  },\n        handlerOpenEdit = () => {\n    frmUpdate.current.classList.remove('d-none');\n    beforeFrm.current.classList.remove('d-none');\n  },\n        handlerCloseEdit = () => {\n    frmUpdate.current.classList.add('d-none');\n    beforeFrm.current.classList.add('d-none');\n  };\n\n  return __jsx(React.Fragment, null, __jsx(\"button\", {\n    onClick: handlerOpenEdit,\n    className: \"btn-edit-product-open btn-warning btn\",\n    type: \"button\"\n  }, __jsx(\"svg\", {\n    width: \"1em\",\n    height: \"1em\",\n    viewBox: \"0 0 16 16\",\n    className: \"ml-2 bi bi-pencil-square\",\n    fill: \"currentColor\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, __jsx(\"path\", {\n    d: \"M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456l-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z\"\n  }), __jsx(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z\"\n  }))), __jsx(\"article\", {\n    ref: beforeFrm,\n    className: \"d-none content-edit-product-before\"\n  }), __jsx(\"article\", {\n    ref: frmUpdate,\n    className: \"d-none col-12 col-sm-12 col-lg-12 col-xl-12 content-frm-login frm-create-influencer content-edit-product\"\n  }, __jsx(\"button\", {\n    onClick: handlerCloseEdit,\n    type: \"button\",\n    className: \"btn btn-danger btn-close-frm-edit\"\n  }, \"x\"), __jsx(\"article\", {\n    className: \"col-12\"\n  }, __jsx(\"h4\", {\n    className: \"d-inline-flex\"\n  }, \"Editar un producto\"), __jsx(\"svg\", {\n    width: \"1em\",\n    height: \"1em\",\n    viewBox: \"0 0 16 16\",\n    className: \"ml-2 bi bi-pencil-square\",\n    fill: \"currentColor\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, __jsx(\"path\", {\n    d: \"M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456l-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z\"\n  }), __jsx(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z\"\n  })), __jsx(\"form\", {\n    onSubmit: handlerSubmit\n  }, __jsx(\"small\", {\n    className: \"p-2 m-0\"\n  }, \"T\\xEDtulo \", __jsx(\"span\", {\n    className: \"text-danger\"\n  }, \"*\")), __jsx(\"input\", {\n    onChange: handleInputTitle,\n    className: \"d-block\",\n    type: \"text\",\n    placeholder: \"T\\xEDtulo\",\n    value: title\n  }), __jsx(\"small\", {\n    className: \"p-2 m-0\"\n  }, \"Seleccionar una im\\xE1gen \", __jsx(\"span\", {\n    className: \"text-danger\"\n  }, \"*\")), __jsx(\"input\", {\n    ref: imgRef,\n    type: \"file\",\n    onChange: imgPreviewProd,\n    className: \"mt-2 mb-2\",\n    accept: \"image/*\"\n  }), __jsx(\"article\", {\n    style: {\n      backgroundImage: `url('${imageProd}')`\n    },\n    className: \"img-preview-prod\"\n  }), __jsx(\"small\", {\n    className: \"p-2 m-0\"\n  }, \"Categor\\xEDa \", __jsx(\"span\", {\n    className: \"text-danger\"\n  }, \"*\")), __jsx(\"select\", {\n    onChange: handleInputType,\n    className: \"d-block bg-light\"\n  }, __jsx(\"option\", {\n    key: \"-1\",\n    value: \"null\"\n  }, \"-- Seleccionar una opci\\xF3n --\"), CategoryList.map((element, i) => __jsx(\"option\", {\n    key: i,\n    value: element.category\n  }, element.title))), __jsx(\"small\", {\n    className: \"p-2 m-0\"\n  }, \"Sub-categor\\xEDa \", __jsx(\"span\", {\n    className: \"text-danger\"\n  }, \"*\")), __jsx(\"select\", {\n    onChange: handleInputSubCategory,\n    className: \"d-block bg-light\"\n  }, __jsx(\"option\", {\n    value: \"null\"\n  }, \"No\"), __jsx(\"option\", {\n    value: \"hombre\"\n  }, \"Hombre\"), __jsx(\"option\", {\n    value: \"mujer\"\n  }, \"Mujer\"), __jsx(\"option\", {\n    value: \"ni\\xF1os\"\n  }, \"Ni\\xF1os\"), __jsx(\"option\", {\n    value: \"invierno\"\n  }, \"Invierno\"), __jsx(\"option\", {\n    value: \"verano\"\n  }, \"Verano\")), __jsx(\"small\", {\n    className: \"p-2 m-0\"\n  }, \"Precio \", __jsx(\"span\", {\n    className: \"text-danger\"\n  }, \"*\")), __jsx(\"input\", {\n    onChange: handleInputAmount,\n    className: \"d-block\",\n    type: \"text\",\n    placeholder: \"Precio\",\n    value: amount\n  }), __jsx(\"small\", {\n    className: \"p-2 m-0\"\n  }, \"Descuento \", __jsx(\"span\", {\n    className: \"text-danger\"\n  }, \"*\")), __jsx(\"input\", {\n    onChange: handleInputDiscount,\n    className: \"d-block\",\n    type: \"text\",\n    placeholder: \"Descuento\",\n    value: discount\n  }), __jsx(\"small\", {\n    className: \"p-2 m-0\"\n  }, \"Descripci\\xF3n \", __jsx(\"span\", {\n    className: \"text-danger\"\n  }, \"*\")), __jsx(\"textarea\", {\n    onChange: handleInputDescription,\n    className: \"d-block\",\n    value: description,\n    placeholder: \"Descripci\\xF3n\"\n  }), __jsx(\"small\", {\n    className: \"p-2 m-0\"\n  }, \"Link Mercado Pago \", __jsx(\"span\", {\n    className: \"text-danger\"\n  }, \"*\")), __jsx(\"input\", {\n    onChange: handleInputPayment,\n    className: \"d-block\",\n    type: \"text\",\n    placeholder: \"Link Mercado Pago\",\n    value: payment\n  }), __jsx(\"small\", {\n    className: \"p-2 m-0\"\n  }, \"Link Mercado Pago con descuento \", __jsx(\"span\", {\n    className: \"text-danger\"\n  }, \"*\")), __jsx(\"input\", {\n    onChange: handleInputAmountSale,\n    type: \"text\",\n    className: \"d-block\",\n    placeholder: \"Link Mercado Pago con descuento\"\n  }), __jsx(\"small\", {\n    className: \"p-2 m-0\"\n  }, \"CBU de ingresos \", __jsx(\"span\", {\n    className: \"text-danger\"\n  }, \"*\")), __jsx(\"input\", {\n    onChange: handleInputCBU,\n    type: \"text\",\n    name: \"CBU\",\n    className: \"d-block\",\n    placeholder: \"CBU de ingresos\"\n  }), __jsx(\"small\", {\n    className: \"p-2 m-0\"\n  }, \"Tel\\xE9fono \", __jsx(\"span\", {\n    className: \"text-danger\"\n  }, \"*\")), __jsx(\"input\", {\n    onChange: handleInputContact,\n    type: \"text\",\n    name: \"contact_business\",\n    className: \"d-block\",\n    placeholder: \"Tel\\xE9fono\"\n  }), __jsx(\"small\", {\n    className: \"p-2 m-0\"\n  }, \"Empresa \", __jsx(\"span\", {\n    className: \"text-danger\"\n  }, \"*\")), __jsx(\"input\", {\n    onChange: handleInputBusiness,\n    className: \"d-block\",\n    type: \"text\",\n    placeholder: \"Empresa\",\n    value: business\n  }), __jsx(\"small\", {\n    className: \"p-2 m-0\"\n  }, \"Localidad \", __jsx(\"span\", {\n    className: \"text-danger\"\n  }, \"*\")), __jsx(\"input\", {\n    onChange: handleInputLocation,\n    className: \"d-block\",\n    type: \"text\",\n    placeholder: \"Localidad\",\n    value: location\n  }), __jsx(\"input\", {\n    onChange: handleInputTitle,\n    type: \"submit\",\n    value: \"Agregar\",\n    className: \"form-control d-block btn\"\n  }), __jsx(\"p\", {\n    className: `bg-success text-light add-success ${titleSuccessProduct}`\n  }, \"Se ha insertado con \\xE9xito!\")))), __jsx(OnLoadComponent.OnloadProductComponent, {\n    status: onLoadAdd\n  }));\n};\n\nexport default EditProduct;","map":null,"metadata":{},"sourceType":"module"}