{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useRouter } from \"next/router\";\nimport { useEffect } from \"react\";\nimport { useState } from \"react\";\nimport { useCookies } from \"react-cookie\";\n\nvar InputTokenInfluencer = function InputTokenInfluencer() {\n  var Router = useRouter();\n\n  var _useState = useState(''),\n      tokenValue = _useState[0],\n      setTokenValue = _useState[1];\n\n  var _useState2 = useState('bg-light text-dark'),\n      btnValueToken = _useState2[0],\n      setBtnValueToken = _useState2[1];\n\n  var _useCookies = useCookies(['user']),\n      _useCookies2 = _slicedToArray(_useCookies, 2),\n      cookies = _useCookies2[0],\n      setCookie = _useCookies2[1];\n\n  useEffect(function () {\n    if (cookies.user && cookies.user.discount_token) {\n      setBtnValueToken('bg-success text-light');\n    }\n  });\n\n  var handlerInputToken = function handlerInputToken(e) {\n    setTokenValue(e.target.value);\n  };\n\n  var AuthToken = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(token_payment) {\n      var fetchToken, getFetch;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return fetch(\"\".concat(process.env.API_PATH, \"/v1/influencer/\").concat(token_payment));\n\n            case 2:\n              fetchToken = _context.sent;\n              _context.next = 5;\n              return fetchToken.json();\n\n            case 5:\n              getFetch = _context.sent;\n              return _context.abrupt(\"return\", getFetch);\n\n            case 7:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function AuthToken(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var handlerSubmit = function handlerSubmit(e) {\n    e.preventDefault();\n\n    if (cookies.user) {\n      AuthToken(tokenValue).then(function (success) {\n        if (success.token_verify === 1) {\n          setBtnValueToken('bg-success text-light');\n          var userCookieCredentials = cookies.user;\n          userCookieCredentials.discount_token = tokenValue;\n          setCookie('user', userCookieCredentials, {\n            maxAge: 86400\n          });\n        } else {\n          setBtnValueToken('bg-danger text-light');\n        }\n      });\n    } else {\n      window.location = '/iniciar-sesion';\n    }\n  };\n\n  return __jsx(React.Fragment, null, __jsx(\"form\", {\n    className: \"frm-token\",\n    onSubmit: handlerSubmit\n  }, __jsx(\"input\", {\n    onChange: handlerInputToken,\n    className: \"border-0 code-ref-input form-control \".concat(btnValueToken),\n    type: \"text\",\n    placeholder: \"#C\\xF3digo de referido\",\n    \"aria-label\": \"#C\\xF3digo de referido\"\n  }), __jsx(\"input\", {\n    type: \"submit\",\n    className: \"btn btn-search\",\n    value: \"Ir\"\n  })));\n};\n\nexport default InputTokenInfluencer;","map":null,"metadata":{},"sourceType":"module"}