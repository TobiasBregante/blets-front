{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport axios from 'axios';\nimport { useEffect, useState } from 'react';\nimport { useCookies } from 'react-cookie';\nimport NavbarProfile from '../components/navbarProfile.component';\nimport GetItem from './localStorage/getItem';\n\nconst PersonalData = () => {\n  var _user$address, _user$address2, _user$address3, _user$phone, _user$phone2, _cookie$user2, _cookie$user2$auth, _user$address4, _user$address5, _user$address6, _user$phone3, _user$phone4;\n\n  const {\n    0: cookie,\n    1: setCookie\n  } = useState(GetItem('user')),\n        {\n    0: disabledBtn,\n    1: setDisabledBtn\n  } = useState({\n    disabled: true\n  }),\n        {\n    0: userChange,\n    1: setUserChange\n  } = useState(false),\n        {\n    0: user,\n    1: setUser\n  } = useState({}),\n        userModel = {\n    since_create: user === null || user === void 0 ? void 0 : user.since_create,\n    fullname: user === null || user === void 0 ? void 0 : user.fullname,\n    name: user === null || user === void 0 ? void 0 : user.name,\n    surname: user === null || user === void 0 ? void 0 : user.surname,\n    username: user === null || user === void 0 ? void 0 : user.username,\n    public_token: user === null || user === void 0 ? void 0 : user.public_token,\n    location: user === null || user === void 0 ? void 0 : user.location,\n    address: {\n      street_name: user === null || user === void 0 ? void 0 : (_user$address = user.address) === null || _user$address === void 0 ? void 0 : _user$address.street_name,\n      street_number: user === null || user === void 0 ? void 0 : (_user$address2 = user.address) === null || _user$address2 === void 0 ? void 0 : _user$address2.street_number,\n      zip_code: user === null || user === void 0 ? void 0 : (_user$address3 = user.address) === null || _user$address3 === void 0 ? void 0 : _user$address3.zip_code\n    },\n    DNI: user === null || user === void 0 ? void 0 : user.DNI,\n    email: user === null || user === void 0 ? void 0 : user.email,\n    business: user === null || user === void 0 ? void 0 : user.business,\n    social_medial: user === null || user === void 0 ? void 0 : user.social_medial,\n    phone: {\n      number: user === null || user === void 0 ? void 0 : (_user$phone = user.phone) === null || _user$phone === void 0 ? void 0 : _user$phone.number,\n      area_code: user === null || user === void 0 ? void 0 : (_user$phone2 = user.phone) === null || _user$phone2 === void 0 ? void 0 : _user$phone2.area_code\n    }\n  };\n  useEffect(() => {\n    setUser(userModel);\n  }, []);\n\n  const handlerGetUser = async () => {\n    var _await$axios$get, _cookie$user, _userData$address, _userData$address2, _userData$address3, _userData$phone, _userData$phone2;\n\n    const userData = await ((_await$axios$get = await axios.get(`${process.env.API_PATH}/v1/user/${cookie === null || cookie === void 0 ? void 0 : (_cookie$user = cookie.user) === null || _cookie$user === void 0 ? void 0 : _cookie$user.id}`)) === null || _await$axios$get === void 0 ? void 0 : _await$axios$get.data);\n    let catchUserData = {\n      since_create: userData === null || userData === void 0 ? void 0 : userData.since_create,\n      fullname: userData === null || userData === void 0 ? void 0 : userData.fullname,\n      name: userData === null || userData === void 0 ? void 0 : userData.name,\n      surname: userData === null || userData === void 0 ? void 0 : userData.surname,\n      username: userData === null || userData === void 0 ? void 0 : userData.username,\n      public_token: userData === null || userData === void 0 ? void 0 : userData.public_token,\n      location: userData === null || userData === void 0 ? void 0 : userData.location,\n      address: {\n        street_name: userData === null || userData === void 0 ? void 0 : (_userData$address = userData.address) === null || _userData$address === void 0 ? void 0 : _userData$address.street_name,\n        street_number: userData === null || userData === void 0 ? void 0 : (_userData$address2 = userData.address) === null || _userData$address2 === void 0 ? void 0 : _userData$address2.street_number,\n        zip_code: userData === null || userData === void 0 ? void 0 : (_userData$address3 = userData.address) === null || _userData$address3 === void 0 ? void 0 : _userData$address3.zip_code\n      },\n      DNI: userData === null || userData === void 0 ? void 0 : userData.DNI,\n      email: userData === null || userData === void 0 ? void 0 : userData.email,\n      business: userData === null || userData === void 0 ? void 0 : userData.business,\n      social_medial: userData === null || userData === void 0 ? void 0 : userData.social_medial,\n      phone: {\n        number: userData === null || userData === void 0 ? void 0 : (_userData$phone = userData.phone) === null || _userData$phone === void 0 ? void 0 : _userData$phone.number,\n        area_code: userData === null || userData === void 0 ? void 0 : (_userData$phone2 = userData.phone) === null || _userData$phone2 === void 0 ? void 0 : _userData$phone2.area_code\n      }\n    };\n    setUser(catchUserData);\n    userChange ? setDisabledBtn({\n      disabled: false\n    }) : setDisabledBtn({\n      disabled: true\n    });\n  };\n\n  const handlerSubmit = async e => {\n    e.preventDefault();\n    e.target.reset();\n    const response = await (await axios.put(`${process.env.API_PATH}/v1/user/${cookie.user.id}`, user)).data;\n    setUserChange(false);\n    handlerGetUser();\n  },\n        handlerFullname = e => {\n    const userData = user;\n    userData.fullname = e.target.value;\n    setUserChange(true);\n    setUser(userData);\n  },\n        handlerName = e => {\n    const userData = user;\n    userData.name = e.target.value;\n    setUserChange(true);\n    setUser(userData);\n  },\n        handlerSurname = e => {\n    const userData = user;\n    userData.surname = e.target.value;\n    setUserChange(true);\n    setUser(userData);\n  },\n        handlerPublicToken = e => {\n    const userData = user;\n    userData.public_token = e.target.value;\n    setUserChange(true);\n    setUser(userData);\n  },\n        handlerLocation = e => {\n    const userData = user;\n    userData.location = e.target.value;\n    setUserChange(true);\n    setUser(userData);\n  },\n        handlerStreetName = e => {\n    const userData = user;\n    userData.address.street_name = e.target.value;\n    setUserChange(true);\n    setUser(userData);\n  },\n        handlerStreetNumber = e => {\n    const userData = user;\n    userData.address.street_number = e.target.value;\n    setUserChange(true);\n    setUser(userData);\n  },\n        handlerZipCode = e => {\n    const userData = user;\n    userData.address.zip_code = e.target.value;\n    setUserChange(true);\n    setUser(userData);\n  },\n        handlerDNI = e => {\n    const userData = user;\n    userData.DNI = e.target.value;\n    setUserChange(true);\n    setUser(userData);\n  },\n        handlerEmail = e => {\n    const userData = user;\n    userData.email = e.target.value;\n    setUserChange(true);\n    setUser(userData);\n  },\n        handlerBusiness = e => {\n    const userData = user;\n    userData.business = e.target.value;\n    setUserChange(true);\n    setUser(userData);\n  },\n        handlerSocialMedial = e => {\n    const userData = user;\n    userData.social_medial = e.target.value;\n    setUserChange(true);\n    setUser(userData);\n  },\n        handlerNumber = e => {\n    const userData = user;\n    userData.phone.number = e.target.value;\n    setUserChange(true);\n    setUser(userData);\n  },\n        handlerAreaCode = e => {\n    const userData = user;\n    userData.phone.area_code = e.target.value;\n    setUserChange(true);\n    setUser(userData);\n  };\n\n  useEffect(() => {\n    userChange ? setDisabledBtn({\n      disabled: false\n    }) : setDisabledBtn({\n      disabled: true\n    });\n  }, [userChange]);\n  useEffect(() => {\n    handlerGetUser();\n  }, []);\n  return __jsx(React.Fragment, null, __jsx(\"article\", {\n    className: \"col-12\"\n  }, __jsx(NavbarProfile, null)), __jsx(\"article\", {\n    className: \"contain-user-profile container\"\n  }, user && __jsx(React.Fragment, null, __jsx(\"form\", {\n    id: \"frmDataProfile\",\n    className: \"row\",\n    onSubmit: handlerSubmit\n  }, !(cookie === null || cookie === void 0 ? void 0 : (_cookie$user2 = cookie.user) === null || _cookie$user2 === void 0 ? void 0 : (_cookie$user2$auth = _cookie$user2.auth) === null || _cookie$user2$auth === void 0 ? void 0 : _cookie$user2$auth.user_verify) && __jsx(\"article\", {\n    className: \"alert alert-primary col-12 m-auto\",\n    role: \"alert\"\n  }, __jsx(\"p\", null, __jsx(\"span\", {\n    className: \"badge bg-warning\"\n  }, \"IMPORTANTE\"), \" Para comenzar a aprovechar todos los servicios que ofrecemos, deb\\xE9s seguir los siguientes pasos para obtener la verificaci\\xF3n de tu cuenta.\"), __jsx(\"hr\", null), __jsx(\"ol\", {\n    className: \"col-12 col-sm-12 col-lg-4 col-xl-4 p-3\"\n  }, __jsx(\"li\", null, \"Complet\\xE1 tus datos\"), __jsx(\"li\", null, \"Haz click en \", __jsx(\"strong\", null, \"Guardar\")), __jsx(\"li\", null, \"Empez\\xE1 a hacer tus compras!\"))), userChange && __jsx(\"article\", {\n    className: \"alert alert-primary col-12 m-auto\",\n    role: \"alert\"\n  }, __jsx(\"center\", null, __jsx(\"p\", null, \"Tienes cambios sin guardar.\"))), __jsx(\"article\", {\n    className: \"col-12 col-sm-12 col-lg-6 col-xl-6\"\n  }, __jsx(\"article\", {\n    className: \"row p-1\"\n  }, __jsx(\"p\", {\n    className: \"badge\"\n  }, \"DNI\"), __jsx(\"input\", {\n    type: \"text\",\n    className: \"form-control mb-1\",\n    placeholder: user === null || user === void 0 ? void 0 : user.DNI,\n    onChange: handlerDNI\n  })), __jsx(\"article\", {\n    className: \"row p-1\"\n  }, __jsx(\"p\", {\n    className: \"badge\"\n  }, \"Calle 1\"), __jsx(\"input\", {\n    type: \"text\",\n    className: \"form-control mb-1\",\n    placeholder: user === null || user === void 0 ? void 0 : (_user$address4 = user.address) === null || _user$address4 === void 0 ? void 0 : _user$address4.street_name,\n    onChange: handlerStreetName\n  })), __jsx(\"article\", {\n    className: \"row p-1\"\n  }, __jsx(\"p\", {\n    className: \"badge\"\n  }, \"Altura\"), __jsx(\"input\", {\n    type: \"text\",\n    className: \"form-control mb-1\",\n    placeholder: user === null || user === void 0 ? void 0 : (_user$address5 = user.address) === null || _user$address5 === void 0 ? void 0 : _user$address5.street_number,\n    onChange: handlerStreetNumber\n  })), __jsx(\"article\", {\n    className: \"row p-1\"\n  }, __jsx(\"p\", {\n    className: \"badge\"\n  }, \"C\\xF3digo postal\"), __jsx(\"input\", {\n    type: \"text\",\n    className: \"form-control mb-1\",\n    placeholder: user === null || user === void 0 ? void 0 : (_user$address6 = user.address) === null || _user$address6 === void 0 ? void 0 : _user$address6.zip_code,\n    onChange: handlerZipCode\n  })), __jsx(\"article\", {\n    className: \"row p-1\"\n  }, __jsx(\"p\", {\n    className: \"badge\"\n  }, \"Email\"), __jsx(\"input\", {\n    type: \"text\",\n    className: \"form-control mb-1\",\n    placeholder: user === null || user === void 0 ? void 0 : user.email,\n    onChange: handlerEmail\n  })), __jsx(\"article\", {\n    className: \"row p-1\"\n  }, __jsx(\"p\", {\n    className: \"badge\"\n  }, \"Localidad\"), __jsx(\"input\", {\n    type: \"text\",\n    className: \"form-control mb-1\",\n    placeholder: user === null || user === void 0 ? void 0 : user.location,\n    onChange: handlerLocation\n  })), __jsx(\"article\", {\n    className: \"row p-1\"\n  }, __jsx(\"p\", {\n    className: \"badge\"\n  }, \"Nombre completo\"), __jsx(\"input\", {\n    type: \"text\",\n    className: \"form-control mb-1\",\n    placeholder: user === null || user === void 0 ? void 0 : user.fullname,\n    onChange: handlerFullname\n  })), __jsx(\"article\", {\n    className: \"row p-1\"\n  }, __jsx(\"p\", {\n    className: \"badge\"\n  }, \"Nombre\"), __jsx(\"input\", {\n    type: \"text\",\n    className: \"form-control mb-1\",\n    placeholder: user === null || user === void 0 ? void 0 : user.name,\n    onChange: handlerName\n  })), __jsx(\"article\", {\n    className: \"row p-1\"\n  }, __jsx(\"p\", {\n    className: \"badge\"\n  }, \"Apelido\"), __jsx(\"input\", {\n    type: \"text\",\n    className: \"form-control mb-1\",\n    placeholder: user === null || user === void 0 ? void 0 : user.surname,\n    onChange: handlerSurname\n  })), __jsx(\"article\", {\n    className: \"row p-1\"\n  }, __jsx(\"p\", {\n    className: \"badge\"\n  }, \"C\\xF3digo de pa\\xEDs\"), __jsx(\"input\", {\n    type: \"text\",\n    className: \"form-control mb-1\",\n    placeholder: user === null || user === void 0 ? void 0 : (_user$phone3 = user.phone) === null || _user$phone3 === void 0 ? void 0 : _user$phone3.area_code,\n    onChange: handlerAreaCode\n  })), __jsx(\"article\", {\n    className: \"row p-1\"\n  }, __jsx(\"p\", {\n    className: \"badge\"\n  }, \"N\\xFAmero celular\"), __jsx(\"input\", {\n    type: \"text\",\n    className: \"form-control mb-1\",\n    placeholder: user === null || user === void 0 ? void 0 : (_user$phone4 = user.phone) === null || _user$phone4 === void 0 ? void 0 : _user$phone4.number,\n    onChange: handlerNumber\n  }))), __jsx(\"article\", {\n    className: \"col-12 col-sm-12 col-lg-6 col-xl-6\"\n  }, __jsx(\"article\", {\n    className: \"row p-1\"\n  }, __jsx(\"p\", {\n    className: \"badge\"\n  }, \"Nombre de negocio\"), __jsx(\"input\", {\n    type: \"text\",\n    className: \"form-control mb-1\",\n    placeholder: user === null || user === void 0 ? void 0 : user.business,\n    onChange: handlerBusiness\n  })), __jsx(\"article\", {\n    className: \"row p-1\"\n  }, __jsx(\"p\", {\n    className: \"badge\"\n  }, \"C\\xF3digo de descuentos\"), __jsx(\"input\", {\n    type: \"text\",\n    className: \"form-control mb-1\",\n    placeholder: user === null || user === void 0 ? void 0 : user.public_token,\n    onChange: handlerPublicToken\n  })), __jsx(\"article\", {\n    className: \"row p-1\"\n  }, __jsx(\"p\", {\n    className: \"badge\"\n  }, \"Fecha de inscripci\\xF3n\"), __jsx(\"input\", {\n    type: \"text\",\n    className: \"form-control mb-1\",\n    placeholder: user === null || user === void 0 ? void 0 : user.since_create,\n    disabled: true\n  })), __jsx(\"article\", {\n    className: \"row p-1\"\n  }, __jsx(\"p\", {\n    className: \"badge\"\n  }, \"Redes sociales\"), __jsx(\"input\", {\n    type: \"text\",\n    className: \"form-control mb-1\",\n    placeholder: user === null || user === void 0 ? void 0 : user.social_medial,\n    onChange: handlerSocialMedial\n  })), __jsx(\"article\", {\n    className: \"row p-1\"\n  }, __jsx(\"p\", {\n    className: \"badge\"\n  }, \"Nombre de usuario\"), __jsx(\"input\", {\n    type: \"text\",\n    className: \"form-control mb-1\",\n    placeholder: user === null || user === void 0 ? void 0 : user.username,\n    disabled: true\n  }))), __jsx(\"article\", {\n    className: \"col-12 p-2\"\n  }, __jsx(\"input\", _extends({\n    type: \"submit\",\n    className: `btn m-auto d-block col-12 col-sm-10 col-lg-5 col-xl-4 btn-${!userChange ? 'secondary' : 'primary'}`,\n    value: \"Guardar cambios\"\n  }, disabledBtn)))))));\n};\n\nexport default PersonalData;","map":null,"metadata":{},"sourceType":"module"}