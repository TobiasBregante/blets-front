{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\nimport uniqid from 'uniqid';\nimport { useRef } from 'react';\nimport { useEffect } from \"react\";\nimport { useState } from \"react\";\nimport { useCookies } from 'react-cookie';\nimport categoryList from '../management/category.list.component';\nimport OnloadComponent from '../onload.component';\n\nconst SuperUser = () => {\n  const inputTokenInfluencer = useRef(null);\n\n  const handleCreateTokenInfluencer = () => {\n    inputTokenInfluencer.current.value = `${uniqid()}-blets`;\n  }; // get value inputs of form login\n\n\n  const {\n    0: user,\n    1: setUser\n  } = useState('');\n  const {\n    0: pdw,\n    1: setPdw\n  } = useState('');\n  const {\n    0: userEmail,\n    1: setEmail\n  } = useState('');\n  const {\n    0: geoData,\n    1: setGeoData\n  } = useState([]);\n  const {\n    0: Name,\n    1: setName\n  } = useState('');\n  const {\n    0: location,\n    1: setLocation\n  } = useState('');\n  const {\n    0: socialMedial,\n    1: setSocialMedial\n  } = useState('');\n  const {\n    0: pdwVerify,\n    1: setPdwVerify\n  } = useState('');\n  const {\n    0: business,\n    1: setBusiness\n  } = useState('');\n  const {\n    0: contact,\n    1: setContact\n  } = useState('');\n  const {\n    0: rol,\n    1: setRol\n  } = useState('');\n  const {\n    0: CBU,\n    1: setCBU\n  } = useState('');\n  const userDenied = useRef(null);\n  const userWarning = useRef(null);\n  const userSuccess = useRef(null); // user cookie\n\n  const [cookies, setCookie, removeCookie] = useCookies(['user']); // switch for view or not pdw when write\n\n  const {\n    0: viewPdw,\n    1: setViewPdw\n  } = useState('password');\n  const {\n    0: viewPdwClose,\n    1: setViewPdwClose\n  } = useState('d-none');\n  const {\n    0: viewPdwOpen,\n    1: setViewPdwOpen\n  } = useState('d-block');\n  const {\n    0: onLoadAdd,\n    1: setOnLoadAdd\n  } = useState(false);\n  const {\n    0: hiddenBtn,\n    1: setHiddenBtn\n  } = useState('d-block');\n  const {\n    0: surname,\n    1: setSurname\n  } = useState('');\n  const {\n    0: streetName,\n    1: setStreetName\n  } = useState('');\n  const {\n    0: streetNumber,\n    1: setStreetNumber\n  } = useState('');\n  const {\n    0: zipCode,\n    1: setZipCode\n  } = useState('');\n  const {\n    0: DNI,\n    1: setDNI\n  } = useState('');\n  const {\n    0: areaCode,\n    1: setAreaCode\n  } = useState(''); // array list of South AmÃ©rica provinces, Argentina\n\n  useEffect(() => {\n    const geoDataFetch = async () => {\n      const geo = await fetch('https://apis.datos.gob.ar/georef/api/provincias');\n      const geoJSON = await geo.json();\n      setGeoData(geoJSON.provincias);\n    };\n\n    geoDataFetch();\n  }, []); // handler of view pdw or not\n\n  const handlePdwView = () => {\n    if (viewPdwClose === 'd-none') {\n      setViewPdwClose('d-block');\n      setViewPdwOpen('d-none');\n      setViewPdw('text');\n    } else {\n      setViewPdwClose('d-none');\n      setViewPdwOpen('d-block');\n      setViewPdw('password');\n    }\n  }; // data since user create\n\n\n  const valueDate = new Date();\n  const options = {\n    year: 'numeric',\n    month: 'long',\n    day: 'numeric'\n  }; // handler of the start session of the login\n\n  const userSessionStart = async (username, userPdw) => {\n    const res = await fetch(`${process.env.API_PATH}/v1/user/signup-influencer`, {\n      body: JSON.stringify({\n        since_create: valueDate.toLocaleDateString(\"es-AR\", options),\n        username: username,\n        fullname: Name,\n        pdw: userPdw,\n        email: userEmail,\n        public_token: inputTokenInfluencer.current.value,\n        location: location,\n        business: business,\n        social_medial: socialMedial,\n        rol: rol,\n        contact_business: contact,\n        CBU: CBU,\n        surname: surname,\n        address: {\n          street_name: `${streetName}`,\n          street_number: parseInt(streetNumber),\n          zip_code: `${zipCode}`\n        },\n        DNI: `${DNI}`,\n        phone: {\n          number: contact,\n          area_code: `${areaCode}`\n        }\n      }),\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*'\n      }\n    });\n    const datares = await res.json();\n\n    if (!datares.create_user) {\n      userWarning.current.classList.toggle('d-block');\n      setTimeout(() => {\n        userWarning.current.classList.toggle('d-block');\n      }, 2500);\n    } else {\n      userSuccess.current.classList.toggle('d-block');\n      setTimeout(() => {\n        userSuccess.current.classList.toggle('d-block');\n      }, 2500);\n    }\n  };\n\n  const handlerVerifyMaster = async (username, userPdw) => {\n    let statusUser = false;\n    const res = await fetch(`${process.env.API_PATH}/v1/user/login`, {\n      body: JSON.stringify({\n        username: username,\n        pdw: userPdw\n      }),\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*'\n      }\n    });\n    const datares = await res.json();\n\n    if (datares.status == 401) {\n      setOnLoadAdd(false);\n      setHiddenBtn('d-block');\n      console.warn(datares);\n      userDenied.current.classList.toggle('d-block');\n      setTimeout(() => {\n        userDenied.current.classList.toggle('d-block');\n      }, 2500);\n    } else {\n      setOnLoadAdd(false);\n      setHiddenBtn('d-block');\n      userSessionStart(user, pdw);\n      statusUser = true;\n    }\n\n    return statusUser;\n  }; // event submit and get data of the user for the login\n\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    setOnLoadAdd(true);\n    setHiddenBtn('d-none'); // get for parameter the data of the form login for your verification \n\n    handlerVerifyMaster(cookies.user.user, pdwVerify);\n  }; // handler value input username\n\n\n  const handleChangeUsername = e => setUser(e.target.value),\n        handleChangeName = e => setName(e.target.value),\n        handleChangeLocation = e => setLocation(e.target.value),\n        handleChangePdw = e => setPdw(e.target.value),\n        handleChangeEmail = e => setEmail(e.target.value),\n        handleChangeSocialMedial = e => setSocialMedial(e.target.value),\n        handleChangeRol = e => setRol(e.target.value),\n        handleChangePdwVerify = e => setPdwVerify(e.target.value),\n        handleChangeBusiness = e => setBusiness(e.target.value),\n        handlerChangeContact = e => setContact(e.target.value),\n        handleChangeCBU = e => setCBU(e.target.value),\n        handleChangeSurname = e => setSurname(e.target.value),\n        handleChangeStreetName = e => {\n    setStreetName(e.target.value);\n    console.log(streetName);\n  },\n        handleChangeStreetNumber = e => {\n    setStreetNumber(e.target.value);\n    console.log(streetNumber);\n  },\n        handleChangeZipCode = e => {\n    setZipCode(e.target.value);\n    console.log(zipCode);\n  },\n        handleChangeDNI = e => setDNI(e.target.value),\n        handleChangeAreaCode = e => setAreaCode(e.target.value);\n\n  return __jsx(React.Fragment, null, __jsx(\"article\", {\n    className: \"content-frm-login frm-create-influencer col-12 col-sm-12 col-lg-6 col-xl-6\"\n  }, __jsx(\"article\", {\n    className: \"col-12 col-sm-12 col-lg-12 col-xl-12\"\n  }, __jsx(\"h4\", {\n    className: \"d-inline\"\n  }, \"Crear super-usuarios\"), __jsx(\"svg\", {\n    width: \"1em\",\n    height: \"1em\",\n    viewBox: \"0 0 16 16\",\n    className: \"ml-2 bi bi-people-fill\",\n    fill: \"currentColor\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, __jsx(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M7 14s-1 0-1-1 1-4 5-4 5 3 5 4-1 1-1 1H7zm4-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm-5.784 6A2.238 2.238 0 0 1 5 13c0-1.355.68-2.75 1.936-3.72A6.325 6.325 0 0 0 5 9c-4 0-5 3-5 4s1 1 1 1h4.216zM4.5 8a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5z\"\n  }))), __jsx(\"form\", {\n    onSubmit: handleSubmit\n  }, __jsx(\"small\", null, \"Nombre de usuario \", __jsx(\"span\", {\n    className: \"text-danger\"\n  }, \"*\")), __jsx(\"input\", {\n    onChange: handleChangeUsername,\n    className: \"d-block\",\n    type: \"text\",\n    placeholder: \"Nombre de usuario\"\n  }), __jsx(\"small\", null, \"Nombre \", __jsx(\"span\", {\n    className: \"text-danger\"\n  }, \"*\")), __jsx(\"input\", {\n    onChange: handleChangeName,\n    className: \"d-block\",\n    type: \"text\",\n    placeholder: \"Nombre\"\n  }), __jsx(\"small\", null, \"Apellido \", __jsx(\"span\", {\n    className: \"text-danger\"\n  }, \"*\")), __jsx(\"input\", {\n    onChange: handleChangeSurname,\n    className: \"d-block\",\n    type: \"text\",\n    placeholder: \"Apellido\"\n  }), __jsx(\"small\", null, \"DNI \", __jsx(\"span\", {\n    className: \"text-danger\"\n  }, \"*\")), __jsx(\"input\", {\n    onChange: handleChangeDNI,\n    type: \"text\",\n    className: \"d-block\",\n    placeholder: \"DNI\"\n  }), __jsx(\"small\", null, \"Contrase\\xF1a \", __jsx(\"span\", {\n    className: \"text-danger\"\n  }, \"*\")), __jsx(\"input\", {\n    onChange: handleChangePdw,\n    className: \"d-block\",\n    type: \"password\",\n    placeholder: \"Contrase\\xF1a\"\n  }), __jsx(\"small\", null, \"Correo electr\\xF3nico \", __jsx(\"span\", {\n    className: \"text-danger\"\n  }, \"*\")), __jsx(\"input\", {\n    onChange: handleChangeEmail,\n    type: \"email\",\n    name: \"email\",\n    placeholder: \"Correo electr\\xF3nico\"\n  }), __jsx(\"small\", null, \"Tel\\xE9fono (sin cod. \\xC1rea)\"), __jsx(\"input\", {\n    onChange: handlerChangeContact,\n    type: \"text\",\n    name: \"contact_business\",\n    className: \"d-block\",\n    placeholder: \"Tel\\xE9fono (sin cod. \\xC1rea)\"\n  }), __jsx(\"small\", null, \"C\\xF3digo de \\xE1rea \", __jsx(\"span\", {\n    className: \"text-danger\"\n  }, \"*\")), __jsx(\"input\", {\n    onChange: handleChangeAreaCode,\n    type: \"text\",\n    className: \"d-block\",\n    placeholder: \"C\\xF3digo de \\xE1rea\"\n  }), __jsx(\"small\", null, \"CBU de ingresos\"), __jsx(\"input\", {\n    onChange: handleChangeCBU,\n    type: \"text\",\n    name: \"CBU\",\n    className: \"d-block\",\n    placeholder: \"CBU de ingresos\"\n  }), __jsx(\"small\", null, \"Nombre de negocio \", __jsx(\"span\", {\n    className: \"text-danger\"\n  }, \"*\")), __jsx(\"input\", {\n    onChange: handleChangeBusiness,\n    className: \"d-block\",\n    type: \"text\",\n    placeholder: \"Nombre de negocio\"\n  }), __jsx(\"small\", null, \"Red social \", __jsx(\"span\", {\n    className: \"text-danger\"\n  }, \"*\")), __jsx(\"input\", {\n    onChange: handleChangeSocialMedial,\n    className: \"d-block\",\n    type: \"text\",\n    placeholder: \"@Red social\"\n  }), __jsx(\"small\", null, \"Calle \", __jsx(\"span\", {\n    className: \"text-danger\"\n  }, \"*\")), __jsx(\"input\", {\n    onChange: handleChangeStreetName,\n    className: \"d-block\",\n    type: \"text\",\n    placeholder: \"Calle\"\n  }), __jsx(\"small\", null, \"Altura \", __jsx(\"span\", {\n    className: \"text-danger\"\n  }, \"*\")), __jsx(\"input\", {\n    onChange: handleChangeStreetNumber,\n    className: \"d-block\",\n    type: \"text\",\n    placeholder: \"Altura\"\n  }), __jsx(\"small\", null, \"C\\xF3digo postal \", __jsx(\"span\", {\n    className: \"text-danger\"\n  }, \"*\")), __jsx(\"input\", {\n    onChange: handleChangeZipCode,\n    className: \"d-block\",\n    type: \"text\",\n    placeholder: \"C\\xF3digo postal\"\n  }), __jsx(\"small\", null, \"Localidad \", __jsx(\"span\", {\n    className: \"text-danger\"\n  }, \"*\")), __jsx(\"select\", {\n    onChange: handleChangeLocation,\n    name: \"location\",\n    className: \"bg-light\"\n  }, geoData ? geoData.map(location => __jsx(\"option\", {\n    key: location.id\n  }, location.nombre)) : __jsx(\"option\", null, \"No hay provincias\")), __jsx(\"label\", {\n    className: \"col-12 p-0 mt-2\"\n  }, __jsx(\"span\", {\n    className: \"p-2 d-block text-light bg-dark\"\n  }, \"Credencial de usuario\"), __jsx(\"select\", {\n    onChange: handleChangeRol,\n    className: \"bg-light mt-2 d-block\"\n  }, __jsx(\"option\", {\n    value: \"null\"\n  }, \"-- Elegir una opci\\xF3n --\"), __jsx(\"option\", {\n    value: \"master\"\n  }, \"Administrador\"), __jsx(\"option\", {\n    value: \"influencer\"\n  }, \"Influencer\"), __jsx(\"option\", {\n    value: \"seller\"\n  }, \"Ventas y cobranzas\"), categoryList.map((element, i) => __jsx(\"option\", {\n    key: i,\n    value: element.category\n  }, element.title)))), __jsx(\"small\", null, \"Generar token promocional \", __jsx(\"span\", {\n    className: \"text-danger\"\n  }, \"*\")), __jsx(\"label\", {\n    className: \"content-input-create-code-influencer\"\n  }, __jsx(\"input\", {\n    ref: inputTokenInfluencer,\n    className: \"d-block input-create-code-influencer\",\n    type: \"text\",\n    placeholder: \"Generar c\\xF3digo\"\n  }), __jsx(\"button\", {\n    onClick: handleCreateTokenInfluencer,\n    type: \"button\",\n    className: \"ico-create-code-influencer btn\"\n  }, __jsx(\"svg\", {\n    width: \"1em\",\n    height: \"1em\",\n    viewBox: \"0 0 16 16\",\n    className: \"bi bi-upc-scan\",\n    fill: \"currentColor\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, __jsx(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M1.5 1a.5.5 0 0 0-.5.5v3a.5.5 0 0 1-1 0v-3A1.5 1.5 0 0 1 1.5 0h3a.5.5 0 0 1 0 1h-3zM11 .5a.5.5 0 0 1 .5-.5h3A1.5 1.5 0 0 1 16 1.5v3a.5.5 0 0 1-1 0v-3a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 1-.5-.5zM.5 11a.5.5 0 0 1 .5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 1 0 1h-3A1.5 1.5 0 0 1 0 14.5v-3a.5.5 0 0 1 .5-.5zm15 0a.5.5 0 0 1 .5.5v3a1.5 1.5 0 0 1-1.5 1.5h-3a.5.5 0 0 1 0-1h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 1 .5-.5z\"\n  }), __jsx(\"path\", {\n    d: \"M3 4.5a.5.5 0 0 1 1 0v7a.5.5 0 0 1-1 0v-7zm2 0a.5.5 0 0 1 1 0v7a.5.5 0 0 1-1 0v-7zm2 0a.5.5 0 0 1 1 0v7a.5.5 0 0 1-1 0v-7zm2 0a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-7zm3 0a.5.5 0 0 1 1 0v7a.5.5 0 0 1-1 0v-7z\"\n  })))), __jsx(\"label\", {\n    className: \"pdw-info-add-superuser col-12 p-0 mt-2\"\n  }, __jsx(\"small\", {\n    className: \"p-2 d-block text-dark\"\n  }, \"Para mayor seguridad, verificaremos su contrase\\xF1a\", __jsx(\"svg\", {\n    width: \"1em\",\n    height: \"1em\",\n    viewBox: \"0 0 16 16\",\n    className: \"bi bi-info-circle-fill\",\n    fill: \"currentColor\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, __jsx(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm.93-9.412l-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533L8.93 6.588zM8 5.5a1 1 0 1 0 0-2 1 1 0 0 0 0 2z\"\n  })))), __jsx(\"article\", {\n    className: \"col-12 p-0\"\n  }, __jsx(\"input\", {\n    onChange: handleChangePdwVerify,\n    type: viewPdw,\n    name: \"pdw\",\n    placeholder: \"Contrase\\xF1a\"\n  }), __jsx(\"button\", {\n    onClick: handlePdwView,\n    type: \"button\",\n    className: \"btn-switch-pdw\"\n  }, __jsx(\"svg\", {\n    width: \"1em\",\n    height: \"1em\",\n    viewBox: \"0 0 16 16\",\n    className: `bi bi-eye-slash ${viewPdwClose}`,\n    fill: \"currentColor\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, __jsx(\"path\", {\n    d: \"M13.359 11.238C15.06 9.72 16 8 16 8s-3-5.5-8-5.5a7.028 7.028 0 0 0-2.79.588l.77.771A5.944 5.944 0 0 1 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.134 13.134 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755-.165.165-.337.328-.517.486l.708.709z\"\n  }), __jsx(\"path\", {\n    d: \"M11.297 9.176a3.5 3.5 0 0 0-4.474-4.474l.823.823a2.5 2.5 0 0 1 2.829 2.829l.822.822zm-2.943 1.299l.822.822a3.5 3.5 0 0 1-4.474-4.474l.823.823a2.5 2.5 0 0 0 2.829 2.829z\"\n  }), __jsx(\"path\", {\n    d: \"M3.35 5.47c-.18.16-.353.322-.518.487A13.134 13.134 0 0 0 1.172 8l.195.288c.335.48.83 1.12 1.465 1.755C4.121 11.332 5.881 12.5 8 12.5c.716 0 1.39-.133 2.02-.36l.77.772A7.029 7.029 0 0 1 8 13.5C3 13.5 0 8 0 8s.939-1.721 2.641-3.238l.708.709z\"\n  }), __jsx(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M13.646 14.354l-12-12 .708-.708 12 12-.708.708z\"\n  })), __jsx(\"svg\", {\n    width: \"1em\",\n    height: \"1em\",\n    viewBox: \"0 0 16 16\",\n    className: `bi bi-eye ${viewPdwOpen}`,\n    fill: \"currentColor\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, __jsx(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8zM1.173 8a13.134 13.134 0 0 0 1.66 2.043C4.12 11.332 5.88 12.5 8 12.5c2.12 0 3.879-1.168 5.168-2.457A13.134 13.134 0 0 0 14.828 8a13.133 13.133 0 0 0-1.66-2.043C11.879 4.668 10.119 3.5 8 3.5c-2.12 0-3.879 1.168-5.168 2.457A13.133 13.133 0 0 0 1.172 8z\"\n  }), __jsx(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5zM4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0z\"\n  })))), __jsx(\"input\", {\n    type: \"submit\",\n    value: \"Agregar\",\n    className: `mt-2 ${hiddenBtn} btn`\n  }), __jsx(\"p\", {\n    ref: userDenied,\n    className: \"mt-1 user-warning d-none bg-danger p-2 text-light\"\n  }, \"Acceso denegado!\"), __jsx(\"p\", {\n    ref: userSuccess,\n    className: \"mt-1 user-warning d-none bg-success p-2\"\n  }, \"Se ha creado exitosamente!\"), __jsx(\"p\", {\n    ref: userWarning,\n    className: \"mt-1 user-warning d-none bg-secondary p-2\"\n  }, \"Este usuario ya existe\"))), __jsx(OnloadComponent.OnloadUserComponent, {\n    status: onLoadAdd\n  }));\n};\n\nexport default SuperUser;","map":null,"metadata":{},"sourceType":"module"}