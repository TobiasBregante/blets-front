{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useRef } from \"react\";\nimport { useState } from \"react\";\nimport { useCookies } from 'react-cookie';\nimport axios from 'axios';\nimport { useRouter } from \"next/router\";\n\nvar EditProduct = function EditProduct(prop) {\n  var Router = useRouter();\n  var frmUpdate = useRef(null);\n  var beforeFrm = useRef(null);\n  var imgRef = useRef(null);\n\n  var _useCookies = useCookies(['user']),\n      _useCookies2 = _slicedToArray(_useCookies, 2),\n      cookies = _useCookies2[0],\n      setCookie = _useCookies2[1];\n\n  var _useState = useState(''),\n      imageProd = _useState[0],\n      setImageProd = _useState[1];\n\n  var _useState2 = useState(''),\n      title = _useState2[0],\n      setTitle = _useState2[1];\n\n  var _useState3 = useState('d-none'),\n      titleSuccessProduct = _useState3[0],\n      setTitleSuccessProduct = _useState3[1];\n\n  var _useState4 = useState(''),\n      description = _useState4[0],\n      setDescription = _useState4[1];\n\n  var _useState5 = useState(''),\n      amount = _useState5[0],\n      setAmount = _useState5[1];\n\n  var _useState6 = useState(''),\n      discount = _useState6[0],\n      setDiscount = _useState6[1];\n\n  var _useState7 = useState(''),\n      shipping = _useState7[0],\n      setShipping = _useState7[1];\n\n  var _useState8 = useState(''),\n      business = _useState8[0],\n      setBusiness = _useState8[1];\n\n  var _useState9 = useState(''),\n      location = _useState9[0],\n      setLocation = _useState9[1];\n\n  var _useState10 = useState(''),\n      type = _useState10[0],\n      setType = _useState10[1];\n\n  var _useState11 = useState(''),\n      payment = _useState11[0],\n      setPayment = _useState11[1];\n\n  var handleUpdateProduct = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.t0 = fetch;\n              _context2.t1 = \"\".concat(process.env.API_PATH, \"/v1/auth\");\n              _context2.t2 = JSON;\n              _context2.next = 5;\n              return cookies.user.token;\n\n            case 5:\n              _context2.t3 = _context2.sent;\n              _context2.t4 = {\n                token: _context2.t3\n              };\n              _context2.t5 = _context2.t2.stringify.call(_context2.t2, _context2.t4);\n              _context2.t6 = {\n                'Content-Type': 'application/json',\n                'Access-Control-Allow-Origin': '*',\n                'token': cookies.user.token\n              };\n              _context2.t7 = {\n                body: _context2.t5,\n                method: 'POST',\n                headers: _context2.t6\n              };\n              _context2.next = 12;\n              return (0, _context2.t0)(_context2.t1, _context2.t7).then(function (res) {\n                return res.json();\n              }).then( /*#__PURE__*/function () {\n                var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(success) {\n                  var frmData;\n                  return _regeneratorRuntime.wrap(function _callee$(_context) {\n                    while (1) {\n                      switch (_context.prev = _context.next) {\n                        case 0:\n                          if (success.auth) {\n                            frmData = new FormData();\n                            frmData.append('imgPublicId', prop.product.img);\n                            frmData.append('img', imgRef.current.files[0]);\n                            frmData.append('title', title);\n                            frmData.append('description', description);\n                            frmData.append('amount', amount);\n                            frmData.append('discount', discount);\n                            frmData.append('payment', payment);\n                            frmData.append('shipping', shipping);\n                            frmData.append('business', business);\n                            frmData.append('location', location);\n                            frmData.append('type', type);\n                            axios.put(\"\".concat(process.env.API_PATH, \"/v1/product/update/\").concat(prop.product._id), frmData, {\n                              headers: {\n                                'Content-Type': 'multipart/form-data',\n                                'Access-Control-Allow-Origin': '*',\n                                'token': cookies.user.token\n                              }\n                            }).then(function (productAdd) {\n                              if (productAdd.data.update) {\n                                Router.reload(window.location.pathname);\n                                setTitleSuccessProduct('d-block');\n                                setTimeout(function () {\n                                  setTitleSuccessProduct('d-none');\n                                }, 2500);\n                              } else {\n                                console.log('error: product is not added');\n                              }\n                            })[\"catch\"](function (errAdd) {\n                              return console.error(errAdd);\n                            });\n                          }\n\n                        case 1:\n                        case \"end\":\n                          return _context.stop();\n                      }\n                    }\n                  }, _callee);\n                }));\n\n                return function (_x) {\n                  return _ref2.apply(this, arguments);\n                };\n              }())[\"catch\"](function (err) {\n                return console.error(err);\n              });\n\n            case 12:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function handleUpdateProduct() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var handlerSubmit = function handlerSubmit(e) {\n    e.preventDefault();\n    handleUpdateProduct();\n  };\n\n  var handleInputTitle = function handleInputTitle(e) {\n    setTitle(e.target.value);\n  };\n\n  var handleInputDescription = function handleInputDescription(e) {\n    setDescription(e.target.value);\n  };\n\n  var handleInputAmount = function handleInputAmount(e) {\n    setAmount(e.target.value);\n  };\n\n  var handleInputDiscount = function handleInputDiscount(e) {\n    setDiscount(e.target.value);\n  };\n\n  var handleInputShipping = function handleInputShipping(e) {\n    setShipping(e.target.value);\n  };\n\n  var handleInputBusiness = function handleInputBusiness(e) {\n    setBusiness(e.target.value);\n  };\n\n  var handleInputLocation = function handleInputLocation(e) {\n    setLocation(e.target.value);\n  };\n\n  var handleInputType = function handleInputType(e) {\n    setType(e.target.value);\n  };\n\n  var imgPreviewProd = function imgPreviewProd(e) {\n    var reader = new FileReader();\n\n    reader.onloadend = function () {\n      setImageProd(reader.result);\n    };\n\n    if (e.target.files[0]) {\n      reader.readAsDataURL(e.target.files[0]);\n    } else {\n      setImageProd('');\n    }\n  };\n\n  var handleInputPayment = function handleInputPayment(e) {\n    setPayment(e.target.value);\n  };\n\n  var handlerOpenEdit = function handlerOpenEdit() {\n    frmUpdate.current.classList.remove('d-none');\n    beforeFrm.current.classList.remove('d-none');\n  };\n\n  var handlerCloseEdit = function handlerCloseEdit() {\n    frmUpdate.current.classList.add('d-none');\n    beforeFrm.current.classList.add('d-none');\n  };\n\n  return __jsx(React.Fragment, null, __jsx(\"button\", {\n    onClick: handlerOpenEdit,\n    className: \"btn-edit-product-open btn-warning btn\",\n    type: \"button\"\n  }, __jsx(\"svg\", {\n    width: \"1em\",\n    height: \"1em\",\n    viewBox: \"0 0 16 16\",\n    className: \"ml-2 bi bi-pencil-square\",\n    fill: \"currentColor\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, __jsx(\"path\", {\n    d: \"M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456l-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z\"\n  }), __jsx(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z\"\n  }))), __jsx(\"article\", {\n    ref: beforeFrm,\n    className: \"d-none content-edit-product-before\"\n  }), __jsx(\"article\", {\n    ref: frmUpdate,\n    className: \"d-none col-12 col-sm-12 col-lg-12 col-xl-12 content-frm-login frm-create-influencer content-edit-product\"\n  }, __jsx(\"button\", {\n    onClick: handlerCloseEdit,\n    type: \"button\",\n    className: \"btn btn-danger btn-close-frm-edit\"\n  }, \"x\"), __jsx(\"article\", {\n    className: \"col-12\"\n  }, __jsx(\"h4\", {\n    className: \"d-inline-flex\"\n  }, \"Editar un producto\"), __jsx(\"svg\", {\n    width: \"1em\",\n    height: \"1em\",\n    viewBox: \"0 0 16 16\",\n    className: \"ml-2 bi bi-pencil-square\",\n    fill: \"currentColor\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, __jsx(\"path\", {\n    d: \"M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456l-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z\"\n  }), __jsx(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z\"\n  })), __jsx(\"form\", {\n    onSubmit: handlerSubmit\n  }, __jsx(\"small\", {\n    className: \"p-2 m-0\"\n  }, \"T\\xEDtulo \", __jsx(\"span\", {\n    className: \"text-danger\"\n  }, \"*\")), __jsx(\"input\", {\n    onChange: handleInputTitle,\n    className: \"d-block\",\n    type: \"text\",\n    placeholder: \"T\\xEDtulo\",\n    value: title\n  }), __jsx(\"small\", {\n    className: \"p-2 m-0\"\n  }, \"Seleccionar una im\\xE1gen \", __jsx(\"span\", {\n    className: \"text-danger\"\n  }, \"*\")), __jsx(\"input\", {\n    ref: imgRef,\n    type: \"file\",\n    onChange: imgPreviewProd,\n    className: \"mt-2 mb-2\",\n    accept: \"image/*\"\n  }), __jsx(\"article\", {\n    style: {\n      backgroundImage: \"url('\".concat(imageProd, \"')\")\n    },\n    className: \"img-preview-prod\"\n  }), __jsx(\"small\", {\n    className: \"p-2 m-0\"\n  }, \"Categor\\xEDa \", __jsx(\"span\", {\n    className: \"text-danger\"\n  }, \"*\")), __jsx(\"select\", {\n    onChange: handleInputType,\n    className: \"d-block bg-light\"\n  }, __jsx(\"option\", {\n    value: \"null\"\n  }, \"-- Seleccionar una opci\\xF3n --\"), __jsx(\"option\", {\n    value: \"accesorios\"\n  }, \"Accesorios\"), __jsx(\"option\", {\n    value: \"belleza\"\n  }, \"Belleza\"), __jsx(\"option\", {\n    value: \"bolsos-y-carteras\"\n  }, \"Bolsos y Carteras\"), __jsx(\"option\", {\n    value: \"celulares\"\n  }, \"Celulares\"), __jsx(\"option\", {\n    value: \"computacion\"\n  }, \"Computaci\\xF3n\"), __jsx(\"option\", {\n    value: \"consolas\"\n  }, \"Consolas\"), __jsx(\"option\", {\n    value: \"camaras\"\n  }, \"C\\xE1maras\"), __jsx(\"option\", {\n    value: \"deportes-y-fitness\"\n  }, \"Deportes y Fitness\"), __jsx(\"option\", {\n    value: \"dise\\xF1o\"\n  }, \"Dise\\xF1o\"), __jsx(\"option\", {\n    value: \"electrodomesticos\"\n  }, \"Electrodom\\xE9sticos\"), __jsx(\"option\", {\n    value: \"indumentarias\"\n  }, \"Indumentarias\"), __jsx(\"option\", {\n    value: \"joyas\"\n  }, \"Joyas\"), __jsx(\"option\", {\n    value: \"mates\"\n  }, \"Mates\"), __jsx(\"option\", {\n    value: \"marketing\"\n  }, \"Marketing\"), __jsx(\"option\", {\n    value: \"muebles\"\n  }, \"Muebles\"), __jsx(\"option\", {\n    value: \"musica\"\n  }, \"M\\xFAsica\"), __jsx(\"option\", {\n    value: \"viajes\"\n  }, \"Viajes\"), __jsx(\"option\", {\n    value: \"zapatos\"\n  }, \"Zapatos\")), __jsx(\"small\", {\n    className: \"p-2 m-0\"\n  }, \"Precio \", __jsx(\"span\", {\n    className: \"text-danger\"\n  }, \"*\")), __jsx(\"input\", {\n    onChange: handleInputAmount,\n    className: \"d-block\",\n    type: \"text\",\n    placeholder: \"Precio\",\n    value: amount\n  }), __jsx(\"small\", {\n    className: \"p-2 m-0\"\n  }, \"Descuento \", __jsx(\"span\", {\n    className: \"text-danger\"\n  }, \"*\")), __jsx(\"input\", {\n    onChange: handleInputDiscount,\n    className: \"d-block\",\n    type: \"text\",\n    placeholder: \"Descuento\",\n    value: discount\n  }), __jsx(\"small\", {\n    className: \"p-2 m-0\"\n  }, \"Descripci\\xF3n \", __jsx(\"span\", {\n    className: \"text-danger\"\n  }, \"*\")), __jsx(\"textarea\", {\n    onChange: handleInputDescription,\n    className: \"d-block\",\n    value: description,\n    placeholder: \"Descripci\\xF3n\"\n  }), __jsx(\"small\", {\n    className: \"p-2 m-0\"\n  }, \"Link Mercado Pago \", __jsx(\"span\", {\n    className: \"text-danger\"\n  }, \"*\")), __jsx(\"input\", {\n    onChange: handleInputPayment,\n    className: \"d-block\",\n    type: \"text\",\n    placeholder: \"Link Mercado Pago\",\n    value: payment\n  }), __jsx(\"small\", {\n    className: \"p-2 m-0\"\n  }, \"Empresa \", __jsx(\"span\", {\n    className: \"text-danger\"\n  }, \"*\")), __jsx(\"input\", {\n    onChange: handleInputBusiness,\n    className: \"d-block\",\n    type: \"text\",\n    placeholder: \"Empresa\",\n    value: business\n  }), __jsx(\"small\", {\n    className: \"p-2 m-0\"\n  }, \"Localidad \", __jsx(\"span\", {\n    className: \"text-danger\"\n  }, \"*\")), __jsx(\"input\", {\n    onChange: handleInputLocation,\n    className: \"d-block\",\n    type: \"text\",\n    placeholder: \"Localidad\",\n    value: location\n  }), __jsx(\"small\", {\n    className: \"p-2 m-0\"\n  }, \"Env\\xEDos \", __jsx(\"span\", {\n    className: \"text-danger\"\n  }, \"*\")), __jsx(\"select\", {\n    onChange: handleInputShipping,\n    className: \"mb-2 d-block bg-light\"\n  }, __jsx(\"option\", {\n    value: \"null\"\n  }, \"-- Seleccionar una opci\\xF3n --\"), __jsx(\"option\", {\n    value: \"true\"\n  }, \"Acepto env\\xEDos\"), __jsx(\"option\", {\n    value: \"false\"\n  }, \"No acepto env\\xEDos\")), __jsx(\"input\", {\n    onChange: handleInputTitle,\n    type: \"submit\",\n    value: \"Agregar\",\n    className: \"d-block btn\"\n  }), __jsx(\"p\", {\n    className: \"bg-success text-light add-success \".concat(titleSuccessProduct)\n  }, \"Se ha insertado con \\xE9xito!\")))));\n};\n\nexport default EditProduct;","map":null,"metadata":{},"sourceType":"module"}