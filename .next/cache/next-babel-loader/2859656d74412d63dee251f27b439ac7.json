{"ast":null,"code":"var _jsxFileName = \"/home/naza/Escritorio/private/marketblets/front-end/components/user/register.component.jsx\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport Link from \"next/link\";\nimport { useRouter } from \"next/router\";\nimport { useEffect } from \"react\";\nimport { useRef } from \"react\";\nimport { useState } from \"react\";\nimport { useCookies } from 'react-cookie';\n\nconst Register = () => {\n  // get value inputs of form login\n  const {\n    0: user,\n    1: setUser\n  } = useState('');\n  const {\n    0: pdw,\n    1: setPdw\n  } = useState('');\n  const {\n    0: userEmail,\n    1: setEmail\n  } = useState('');\n  const {\n    0: geoData,\n    1: setGeoData\n  } = useState([]);\n  const {\n    0: fullname,\n    1: setFullname\n  } = useState('');\n  const {\n    0: location,\n    1: setLocation\n  } = useState('');\n  const userWarningNull = useRef(null);\n  const userWarning = useRef(null);\n  const userSuccess = useRef(null); // user cookie\n\n  const [cookies, setCookie, removeCookie] = useCookies(['user']); // switch for view or not pdw when write\n\n  const {\n    0: viewPdw,\n    1: setViewPdw\n  } = useState('password');\n  const {\n    0: viewPdwClose,\n    1: setViewPdwClose\n  } = useState('d-none');\n  const {\n    0: viewPdwOpen,\n    1: setViewPdwOpen\n  } = useState('d-block'); // array list of South América provinces, Argentina\n\n  useEffect(() => {\n    const geoDataFetch = async () => {\n      const geo = await fetch('https://apis.datos.gob.ar/georef/api/provincias');\n      const geoJSON = await geo.json();\n      setGeoData(geoJSON.provincias);\n    };\n\n    geoDataFetch();\n  }, []); // handler of view pdw or not\n\n  const handlePdwView = () => {\n    if (viewPdwClose === 'd-none') {\n      setViewPdwClose('d-block');\n      setViewPdwOpen('d-none');\n      setViewPdw('text');\n    } else {\n      setViewPdwClose('d-none');\n      setViewPdwOpen('d-block');\n      setViewPdw('password');\n    }\n  }; // data since user create\n\n\n  const valueDate = new Date();\n  const options = {\n    year: 'numeric',\n    month: 'long',\n    day: 'numeric'\n  }; // handler of the start session of the login\n\n  const userSessionStart = async (username, userPdw) => {\n    let statusDataUser = true;\n    dataVerifyUser.forEach(element => statusDataUser = element === '' && false);\n    const dataVerifyUser = [username, fullname, location, userPdw, userEmail];\n\n    if (statusDataUser) {\n      const res = await fetch(`${process.env.API_PATH}/v1/user/signup`, {\n        body: JSON.stringify({\n          since_create: valueDate.toLocaleDateString(\"es-AR\", options),\n          username: username,\n          fullname: fullname,\n          location: location,\n          pdw: userPdw,\n          email: userEmail\n        }),\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*'\n        }\n      });\n      const datares = await res.json();\n\n      if (!datares.create_user) {\n        userWarning.current.classList.toggle('d-block');\n        setTimeout(() => {\n          userWarning.current.classList.toggle('d-block');\n        }, 2500);\n      } else {\n        userSuccess.current.classList.toggle('d-block');\n        setTimeout(() => {\n          userSuccess.current.classList.toggle('d-block');\n          window.location = '/iniciar-sesion';\n        }, 2500);\n      }\n    } else {\n      userWarningNull.current.classList.toggle('d-block');\n      setTimeout(() => {\n        userWarningNull.current.classList.toggle('d-block');\n      }, 2500);\n    }\n  }; // event submit and get data of the user for the login\n\n\n  const handleSubmit = e => {\n    e.preventDefault(); // get for parameter the data of the form login for your verification\n\n    userSessionStart(user, pdw);\n  }; // handler value input username\n\n\n  const handleChangeUsername = e => {\n    setUser(e.target.value);\n  };\n\n  const handleChangeFullname = e => {\n    setFullname(e.target.value);\n  };\n\n  const handleChangeLocation = e => {\n    setLocation(e.target.value);\n  };\n\n  const handleChangePdw = e => {\n    setPdw(e.target.value);\n  };\n\n  const handleChangeEmail = e => {\n    setEmail(e.target.value);\n  };\n\n  return __jsx(\"article\", {\n    className: \"content-frm-login col-10 col-sm-10 col-lg-4 col-xl-4 m-auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 9\n    }\n  }, __jsx(\"h1\", {\n    className: \"title-register\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 13\n    }\n  }, \"Reg\\xEDstrate ahora\"), __jsx(\"form\", {\n    onSubmit: handleSubmit,\n    id: \"frm-login\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 13\n    }\n  }, __jsx(\"p\", {\n    ref: userSuccess,\n    className: \"user-warning d-none bg-success p-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 17\n    }\n  }, \"Se ha creado exitosamente!\"), __jsx(\"p\", {\n    ref: userWarning,\n    className: \"user-warning d-none bg-secondary p-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 17\n    }\n  }, \"Este usuario ya existe\"), __jsx(\"p\", {\n    ref: userWarningNull,\n    className: \"user-warning d-none bg-secondary p-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 17\n    }\n  }, \"Los datos est\\xE1n incompletos\"), __jsx(\"input\", {\n    onChange: handleChangeFullname,\n    type: \"text\",\n    name: \"fullname\",\n    placeholder: \"Nombre completo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 17\n    }\n  }), __jsx(\"input\", {\n    onChange: handleChangeUsername,\n    type: \"text\",\n    name: \"user\",\n    placeholder: \"Nombre de usuario\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 17\n    }\n  }), __jsx(\"input\", {\n    onChange: handleChangeEmail,\n    type: \"email\",\n    name: \"email\",\n    placeholder: \"Correo electr\\xF3nico\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 17\n    }\n  }), __jsx(\"select\", {\n    onChange: handleChangeLocation,\n    name: \"location\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 17\n    }\n  }, geoData ? geoData.map(location => __jsx(\"option\", {\n    key: location.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 49\n    }\n  }, location.nombre)) : __jsx(\"option\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 27\n    }\n  }, \"No hay provincias\")), __jsx(\"article\", {\n    className: \"col-12 p-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 17\n    }\n  }, __jsx(\"input\", {\n    onChange: handleChangePdw,\n    type: viewPdw,\n    name: \"pdw\",\n    placeholder: \"Contrase\\xF1a\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 21\n    }\n  }), __jsx(\"button\", {\n    onClick: handlePdwView,\n    type: \"button\",\n    className: \"btn-switch-pdw\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 21\n    }\n  }, __jsx(\"svg\", {\n    width: \"1em\",\n    height: \"1em\",\n    viewBox: \"0 0 16 16\",\n    className: `bi bi-eye-slash ${viewPdwClose}`,\n    fill: \"currentColor\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 25\n    }\n  }, __jsx(\"path\", {\n    d: \"M13.359 11.238C15.06 9.72 16 8 16 8s-3-5.5-8-5.5a7.028 7.028 0 0 0-2.79.588l.77.771A5.944 5.944 0 0 1 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.134 13.134 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755-.165.165-.337.328-.517.486l.708.709z\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 29\n    }\n  }), __jsx(\"path\", {\n    d: \"M11.297 9.176a3.5 3.5 0 0 0-4.474-4.474l.823.823a2.5 2.5 0 0 1 2.829 2.829l.822.822zm-2.943 1.299l.822.822a3.5 3.5 0 0 1-4.474-4.474l.823.823a2.5 2.5 0 0 0 2.829 2.829z\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 29\n    }\n  }), __jsx(\"path\", {\n    d: \"M3.35 5.47c-.18.16-.353.322-.518.487A13.134 13.134 0 0 0 1.172 8l.195.288c.335.48.83 1.12 1.465 1.755C4.121 11.332 5.881 12.5 8 12.5c.716 0 1.39-.133 2.02-.36l.77.772A7.029 7.029 0 0 1 8 13.5C3 13.5 0 8 0 8s.939-1.721 2.641-3.238l.708.709z\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 29\n    }\n  }), __jsx(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M13.646 14.354l-12-12 .708-.708 12 12-.708.708z\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 29\n    }\n  })), __jsx(\"svg\", {\n    width: \"1em\",\n    height: \"1em\",\n    viewBox: \"0 0 16 16\",\n    className: `bi bi-eye ${viewPdwOpen}`,\n    fill: \"currentColor\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 25\n    }\n  }, __jsx(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8zM1.173 8a13.134 13.134 0 0 0 1.66 2.043C4.12 11.332 5.88 12.5 8 12.5c2.12 0 3.879-1.168 5.168-2.457A13.134 13.134 0 0 0 14.828 8a13.133 13.133 0 0 0-1.66-2.043C11.879 4.668 10.119 3.5 8 3.5c-2.12 0-3.879 1.168-5.168 2.457A13.133 13.133 0 0 0 1.172 8z\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 29\n    }\n  }), __jsx(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5zM4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0z\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 29\n    }\n  })))), __jsx(\"input\", {\n    className: \"btn\",\n    type: \"submit\",\n    value: \"Registrarme\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 17\n    }\n  }), __jsx(Link, {\n    href: \"/iniciar-sesion\",\n    as: \"/iniciar-sesion\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 17\n    }\n  }, __jsx(\"a\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 21\n    }\n  }, \"Iniciar sesi\\xF3n\"))));\n};\n\nexport default Register;","map":{"version":3,"sources":["/home/naza/Escritorio/private/marketblets/front-end/components/user/register.component.jsx"],"names":["Link","useRouter","useEffect","useRef","useState","useCookies","Register","user","setUser","pdw","setPdw","userEmail","setEmail","geoData","setGeoData","fullname","setFullname","location","setLocation","userWarningNull","userWarning","userSuccess","cookies","setCookie","removeCookie","viewPdw","setViewPdw","viewPdwClose","setViewPdwClose","viewPdwOpen","setViewPdwOpen","geoDataFetch","geo","fetch","geoJSON","json","provincias","handlePdwView","valueDate","Date","options","year","month","day","userSessionStart","username","userPdw","statusDataUser","dataVerifyUser","forEach","element","res","process","env","API_PATH","body","JSON","stringify","since_create","toLocaleDateString","email","method","headers","datares","create_user","current","classList","toggle","setTimeout","window","handleSubmit","e","preventDefault","handleChangeUsername","target","value","handleChangeFullname","handleChangeLocation","handleChangePdw","handleChangeEmail","map","id","nombre"],"mappings":"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","sourcesContent":["import Link from \"next/link\";\r\nimport { useRouter } from \"next/router\";\r\nimport { useEffect } from \"react\";\r\nimport { useRef } from \"react\";\r\nimport { useState } from \"react\";\r\nimport { useCookies } from 'react-cookie';\r\n\r\nconst Register = () => {\r\n    // get value inputs of form login\r\n    const [user, setUser] = useState('');\r\n    const [pdw, setPdw] = useState('');\r\n    const [userEmail, setEmail] = useState('');\r\n    const [geoData, setGeoData] = useState([]);\r\n    const [fullname, setFullname] = useState('');\r\n    const [location, setLocation] = useState('');\r\n    const userWarningNull = useRef(null);\r\n    const userWarning = useRef(null);\r\n    const userSuccess = useRef(null);\r\n    // user cookie\r\n    const [cookies, setCookie, removeCookie] = useCookies(['user']);\r\n    // switch for view or not pdw when write\r\n    const [viewPdw, setViewPdw] = useState('password');\r\n    const [viewPdwClose, setViewPdwClose] = useState('d-none');\r\n    const [viewPdwOpen, setViewPdwOpen] = useState('d-block');\r\n\r\n    // array list of South América provinces, Argentina\r\n    useEffect(() => {\r\n        const geoDataFetch = async () => {\r\n            const geo = await fetch('https://apis.datos.gob.ar/georef/api/provincias');\r\n            const geoJSON = await geo.json();\r\n            setGeoData(geoJSON.provincias)\r\n        }\r\n        geoDataFetch()\r\n    }, [])\r\n    // handler of view pdw or not\r\n    const handlePdwView = () => {\r\n        if(viewPdwClose === 'd-none'){\r\n            setViewPdwClose('d-block');\r\n            setViewPdwOpen('d-none');\r\n            setViewPdw('text');\r\n        }else{\r\n            setViewPdwClose('d-none');\r\n            setViewPdwOpen('d-block');\r\n            setViewPdw('password');\r\n        }\r\n    }\r\n    // data since user create\r\n    const valueDate = new Date();\r\n    const options = { year: 'numeric', month: 'long', day: 'numeric' };\r\n    // handler of the start session of the login\r\n    const userSessionStart = async (username, userPdw) => {\r\n        let statusDataUser = true\r\n        dataVerifyUser.forEach(element => statusDataUser = element === '' && false)\r\n        const dataVerifyUser = [\r\n            username,\r\n            fullname,\r\n            location, \r\n            userPdw, \r\n            userEmail\r\n        ]\r\n        if(statusDataUser){\r\n            const res = await fetch(`${process.env.API_PATH}/v1/user/signup`, {\r\n                body: JSON.stringify({\r\n                    since_create: valueDate.toLocaleDateString(\"es-AR\", options),\r\n                    username: username,\r\n                    fullname: fullname,\r\n                    location: location, \r\n                    pdw: userPdw, \r\n                    email: userEmail\r\n                }), \r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    'Access-Control-Allow-Origin': '*'\r\n                }\r\n            })\r\n            const datares = await res.json()\r\n            \r\n            if(!datares.create_user){\r\n                userWarning.current.classList.toggle('d-block');\r\n                setTimeout(() => {\r\n                    userWarning.current.classList.toggle('d-block');\r\n                }, 2500)\r\n            }else{\r\n                userSuccess.current.classList.toggle('d-block');\r\n                setTimeout(() => {\r\n                    userSuccess.current.classList.toggle('d-block');\r\n                    window.location = '/iniciar-sesion';\r\n                }, 2500)\r\n            }\r\n        }else{\r\n            userWarningNull.current.classList.toggle('d-block');\r\n            setTimeout(() => {\r\n                userWarningNull.current.classList.toggle('d-block');\r\n            }, 2500)\r\n        }\r\n    }\r\n    // event submit and get data of the user for the login\r\n    const handleSubmit = e => {\r\n        e.preventDefault()\r\n        // get for parameter the data of the form login for your verification\r\n        userSessionStart(user, pdw);\r\n    }\r\n    // handler value input username\r\n    const handleChangeUsername = e => {\r\n        setUser(e.target.value);\r\n    }\r\n    const handleChangeFullname = e => {\r\n        setFullname(e.target.value);\r\n    }\r\n    const handleChangeLocation = e => {\r\n        setLocation(e.target.value);\r\n    }\r\n    const handleChangePdw = e => {\r\n        setPdw(e.target.value);\r\n    }\r\n    const handleChangeEmail = e => {\r\n        setEmail(e.target.value);\r\n    }\r\n    return(\r\n        <article className=\"content-frm-login col-10 col-sm-10 col-lg-4 col-xl-4 m-auto\">\r\n            <h1 className='title-register'>Regístrate ahora</h1>\r\n            <form onSubmit={handleSubmit} id='frm-login'>\r\n                <p ref={userSuccess} className=\"user-warning d-none bg-success p-2\">Se ha creado exitosamente!</p>\r\n                <p ref={userWarning} className=\"user-warning d-none bg-secondary p-2\">Este usuario ya existe</p>\r\n                <p ref={userWarningNull} className=\"user-warning d-none bg-secondary p-2\">Los datos están incompletos</p>\r\n                <input onChange={handleChangeFullname} type=\"text\" name=\"fullname\" placeholder='Nombre completo'/>\r\n                <input onChange={handleChangeUsername} type='text' name='user' placeholder='Nombre de usuario'/>\r\n                <input onChange={handleChangeEmail} type='email' name='email' placeholder='Correo electrónico'/>\r\n                <select onChange={handleChangeLocation} name=\"location\">\r\n                    {\r\n                        geoData ? \r\n                        geoData.map(location => <option key={location.id}>{location.nombre}</option>) \r\n                        : <option>No hay provincias</option>\r\n                    }\r\n                </select>\r\n                <article className=\"col-12 p-0\">\r\n                    <input onChange={handleChangePdw} type={viewPdw} name='pdw' placeholder='Contraseña'/>\r\n                    <button onClick={handlePdwView} type='button' className='btn-switch-pdw'>\r\n                        <svg width=\"1em\" height=\"1em\" viewBox=\"0 0 16 16\" className={`bi bi-eye-slash ${viewPdwClose}`} fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                            <path d=\"M13.359 11.238C15.06 9.72 16 8 16 8s-3-5.5-8-5.5a7.028 7.028 0 0 0-2.79.588l.77.771A5.944 5.944 0 0 1 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.134 13.134 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755-.165.165-.337.328-.517.486l.708.709z\"/>\r\n                            <path d=\"M11.297 9.176a3.5 3.5 0 0 0-4.474-4.474l.823.823a2.5 2.5 0 0 1 2.829 2.829l.822.822zm-2.943 1.299l.822.822a3.5 3.5 0 0 1-4.474-4.474l.823.823a2.5 2.5 0 0 0 2.829 2.829z\"/>\r\n                            <path d=\"M3.35 5.47c-.18.16-.353.322-.518.487A13.134 13.134 0 0 0 1.172 8l.195.288c.335.48.83 1.12 1.465 1.755C4.121 11.332 5.881 12.5 8 12.5c.716 0 1.39-.133 2.02-.36l.77.772A7.029 7.029 0 0 1 8 13.5C3 13.5 0 8 0 8s.939-1.721 2.641-3.238l.708.709z\"/>\r\n                            <path fillRule=\"evenodd\" d=\"M13.646 14.354l-12-12 .708-.708 12 12-.708.708z\"/>\r\n                        </svg>\r\n                        <svg width=\"1em\" height=\"1em\" viewBox=\"0 0 16 16\" className={`bi bi-eye ${viewPdwOpen}`} fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                            <path fillRule=\"evenodd\" d=\"M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8zM1.173 8a13.134 13.134 0 0 0 1.66 2.043C4.12 11.332 5.88 12.5 8 12.5c2.12 0 3.879-1.168 5.168-2.457A13.134 13.134 0 0 0 14.828 8a13.133 13.133 0 0 0-1.66-2.043C11.879 4.668 10.119 3.5 8 3.5c-2.12 0-3.879 1.168-5.168 2.457A13.133 13.133 0 0 0 1.172 8z\"/>\r\n                            <path fillRule=\"evenodd\" d=\"M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5zM4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0z\"/>\r\n                        </svg>\r\n                    </button>\r\n                </article>\r\n                <input className='btn' type='submit' value='Registrarme'/>\r\n                <Link href='/iniciar-sesion' as='/iniciar-sesion'>\r\n                    <a>\r\n                        Iniciar sesión\r\n                    </a>\r\n                </Link>\r\n            </form>\r\n        </article>\r\n    )\r\n}\r\n\r\nexport default Register;\r\n"]},"metadata":{},"sourceType":"module"}