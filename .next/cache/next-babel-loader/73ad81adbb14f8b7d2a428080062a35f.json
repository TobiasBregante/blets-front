{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\nimport { useState, useEffect } from 'react';\nimport SellsPending from './sells.pending.component';\nimport CurrencyFormat from 'react-currency-format';\nimport moment from 'moment';\nimport axios from 'axios';\nimport GetItem from '../../localStorage/getItem';\n\nconst TransactionsComp = prop => {\n  var _transactionMetrics$l, _transactionMetrics$l2;\n\n  const {\n    0: transactionMetrics,\n    1: setTransactionMetrics\n  } = useState([]);\n  const {\n    0: valueDate,\n    1: setValueDate\n  } = useState(moment().format('YYYY-MM-DD'));\n  const {\n    0: cookie,\n    1: setCookie\n  } = useState(GetItem('user'));\n\n  const handlerFetchMetrics = async (date = moment().format('YYYY-MM-DD')) => {\n    var _cookie$user, _cookie$user2;\n\n    // fetch metrics\n    const getFetchMetrics = await axios.get(`${process.env.API_PATH}/v1/product/transaction/sells/metrics`, {\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*',\n        'date_filter': date,\n        'business': cookie === null || cookie === void 0 ? void 0 : (_cookie$user = cookie.user) === null || _cookie$user === void 0 ? void 0 : _cookie$user.business,\n        'rol': cookie === null || cookie === void 0 ? void 0 : (_cookie$user2 = cookie.user) === null || _cookie$user2 === void 0 ? void 0 : _cookie$user2.rol\n      }\n    });\n    const resFetchMetrics = await (getFetchMetrics === null || getFetchMetrics === void 0 ? void 0 : getFetchMetrics.data);\n    setTransactionMetrics(resFetchMetrics);\n  },\n        handlerChangeFilterDate = e => {\n    setValueDate(moment(e.target.value).format('YYYY-MM-DD'));\n    const date = moment(e.target.value).format('YYYY-MM-DD');\n    handlerFetchMetrics(date);\n    console.log(date);\n    console.log(transactionMetrics);\n  };\n\n  useEffect(() => {\n    handlerFetchMetrics();\n  }, [prop]);\n  return __jsx(React.Fragment, null, __jsx(\"article\", {\n    className: \"content-metrics-header-mybusiness col-12 col-sm-12 col-lg-12 col-xl-12\"\n  }, __jsx(\"ul\", null, __jsx(\"li\", {\n    title: \"Pago exitoso\"\n  }, __jsx(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"currentColor\",\n    className: \"bi bi-bag-check text-primary\",\n    viewBox: \"0 0 16 16\"\n  }, __jsx(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M10.854 8.146a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708 0z\"\n  }), __jsx(\"path\", {\n    d: \"M8 1a2.5 2.5 0 0 1 2.5 2.5V4h-5v-.5A2.5 2.5 0 0 1 8 1zm3.5 3v-.5a3.5 3.5 0 1 0-7 0V4H1v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V4h-3.5zM2 5h12v9a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V5z\"\n  })), __jsx(\"span\", {\n    className: \"text-primary d-block\"\n  }, transactionMetrics === null || transactionMetrics === void 0 ? void 0 : transactionMetrics.success)), __jsx(\"li\", {\n    title: \"Pago pendiente\"\n  }, __jsx(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"currentColor\",\n    className: \"bi bi-bag-dash text-secondary\",\n    viewBox: \"0 0 16 16\"\n  }, __jsx(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M5.5 10a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 0 1H6a.5.5 0 0 1-.5-.5z\"\n  }), __jsx(\"path\", {\n    d: \"M8 1a2.5 2.5 0 0 1 2.5 2.5V4h-5v-.5A2.5 2.5 0 0 1 8 1zm3.5 3v-.5a3.5 3.5 0 1 0-7 0V4H1v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V4h-3.5zM2 5h12v9a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V5z\"\n  })), __jsx(\"span\", {\n    className: \"text-secondary d-block\"\n  }, transactionMetrics === null || transactionMetrics === void 0 ? void 0 : transactionMetrics.pending)), __jsx(\"li\", null, __jsx(\"label\", {\n    className: \"badge p-2\"\n  }, __jsx(\"span\", {\n    className: \"m-1 d-block text-dark\"\n  }, \"Filtrar por fecha\"), transactionMetrics.latest_sell && __jsx(\"input\", {\n    className: \"d-block form-control\",\n    onChange: handlerChangeFilterDate,\n    type: \"date\",\n    min: moment((transactionMetrics === null || transactionMetrics === void 0 ? void 0 : (_transactionMetrics$l = transactionMetrics.latest_sell[0]) === null || _transactionMetrics$l === void 0 ? void 0 : _transactionMetrics$l.length) >= 0 && ((_transactionMetrics$l2 = transactionMetrics.latest_sell[0]) === null || _transactionMetrics$l2 === void 0 ? void 0 : _transactionMetrics$l2.create_at_filter)),\n    max: moment().format('YYYY-MM-DD'),\n    value: valueDate\n  }))), __jsx(\"li\", null, __jsx(\"span\", {\n    className: \"text-dark\"\n  }, \"Cash total: \"), __jsx(\"span\", {\n    className: \"text-success badge bg-dark p-2 metrics-badge-amount\"\n  }, __jsx(CurrencyFormat, {\n    value: (transactionMetrics === null || transactionMetrics === void 0 ? void 0 : transactionMetrics.amount_total_cancel) || 0,\n    displayType: 'text',\n    thousandSeparator: true,\n    prefix: '$'\n  }))), __jsx(\"li\", null, __jsx(\"span\", {\n    className: \"text-dark\"\n  }, \"Cash aprobado: \"), __jsx(\"span\", {\n    className: \"text-success badge bg-dark p-2 metrics-badge-amount\"\n  }, __jsx(CurrencyFormat, {\n    value: (transactionMetrics === null || transactionMetrics === void 0 ? void 0 : transactionMetrics.amount_total_cancel) || 0,\n    displayType: 'text',\n    thousandSeparator: true,\n    prefix: '$'\n  }))), __jsx(\"li\", null, __jsx(\"span\", {\n    className: \"text-dark\"\n  }, \"Cash pendiente: \"), __jsx(\"span\", {\n    className: \"text-warning badge bg-dark p-2 metrics-badge-amount\"\n  }, __jsx(CurrencyFormat, {\n    value: (transactionMetrics === null || transactionMetrics === void 0 ? void 0 : transactionMetrics.amount_total_cancel) || 0,\n    displayType: 'text',\n    thousandSeparator: true,\n    prefix: '$'\n  }))), __jsx(\"li\", null, __jsx(\"span\", {\n    className: \"text-dark\"\n  }, \"Cash rechazado: \"), __jsx(\"span\", {\n    className: \"text-danger badge bg-dark p-2 metrics-badge-amount\"\n  }, __jsx(CurrencyFormat, {\n    value: (transactionMetrics === null || transactionMetrics === void 0 ? void 0 : transactionMetrics.amount_total_cancel) || 0,\n    displayType: 'text',\n    thousandSeparator: true,\n    prefix: '$'\n  }))))), __jsx(\"article\", {\n    className: \"col-12 col-sm-12 col-lg-12 col-xl-12 content-sells-pending\"\n  }, __jsx(SellsPending, {\n    dateFilter: valueDate\n  })));\n};\n\nexport default TransactionsComp;","map":null,"metadata":{},"sourceType":"module"}