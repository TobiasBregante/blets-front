{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useRef } from \"react\";\nimport { useState } from \"react\";\nimport { useEffect } from \"react\";\nimport { useRouter } from 'next/router';\n\nvar ColSellPending = function ColSellPending(prop) {\n  var Router = useRouter();\n\n  var _useState = useState([]),\n      product = _useState[0],\n      setProduct = _useState[1];\n\n  var _useState2 = useState([]),\n      user = _useState2[0],\n      setUser = _useState2[1];\n\n  var cardViewMore = useRef(null);\n  var cardViewMoreUser = useRef(null);\n\n  var getAllProduct = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(id) {\n      var fetchAll, dataFetch;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return fetch(\"\".concat(process.env.API_PATH, \"/v1/product/\").concat(id), {\n                headers: {\n                  'Content-Type': 'application/json',\n                  'Access-Control-Allow-Origin': '*'\n                }\n              });\n\n            case 2:\n              fetchAll = _context.sent;\n              _context.next = 5;\n              return fetchAll.json();\n\n            case 5:\n              dataFetch = _context.sent;\n              setProduct(dataFetch);\n\n            case 7:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function getAllProduct(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var FindUser = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id) {\n      var fetchUser, dataFetch;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return fetch(\"\".concat(process.env.API_PATH, \"/v1/user/\").concat(id), {\n                headers: {\n                  'Content-Type': 'application/json',\n                  'Access-Control-Allow-Origin': '*'\n                }\n              });\n\n            case 2:\n              fetchUser = _context2.sent;\n              _context2.next = 5;\n              return fetchUser.json();\n\n            case 5:\n              dataFetch = _context2.sent;\n              setUser(dataFetch);\n\n            case 7:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function FindUser(_x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var handlerAcceptPayment = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(id, value) {\n      var data, fetchUser, dataFetch;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              // prop.dataOrder\n              data = false;\n              _context3.next = 3;\n              return fetch(\"\".concat(process.env.API_PATH, \"/v1/product/transaction/payments/\").concat(id), {\n                method: 'PUT',\n                body: JSON.stringify({\n                  response: value\n                }),\n                headers: {\n                  'Content-Type': 'application/json',\n                  'Access-Control-Allow-Origin': '*'\n                }\n              });\n\n            case 3:\n              fetchUser = _context3.sent;\n              _context3.next = 6;\n              return fetchUser.json();\n\n            case 6:\n              dataFetch = _context3.sent;\n\n              if (dataFetch.update) {\n                data = true;\n              }\n\n              return _context3.abrupt(\"return\", data);\n\n            case 9:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function handlerAcceptPayment(_x3, _x4) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var handlerClickPayment = function handlerClickPayment(e) {\n    handlerAcceptPayment(prop.dataOrder._id, e.target.value).then(function (success) {\n      if (success) {\n        Router.push(window.location.pathname);\n      }\n    })[\"catch\"](function (err) {\n      return console.error(err);\n    });\n  };\n\n  useEffect(function () {\n    getAllProduct(prop.idProduct);\n    FindUser(prop.dataOrder.id_client);\n  }, [prop]);\n\n  var handlerSwitchCardView = function handlerSwitchCardView(e) {\n    if (cardViewMore !== null) {\n      cardViewMore.current.classList.toggle('d-block');\n      e.target.classList.toggle('btn-danger');\n      e.target.value = e.target.value === 'Ver descripción del producto' ? 'Cerrar' : 'Ver descripción del producto';\n    }\n  };\n\n  var handlerSwitchCardViewCustomer = function handlerSwitchCardViewCustomer(e) {\n    if (cardViewMoreUser !== null) {\n      cardViewMoreUser.current.classList.toggle('d-block');\n      e.target.classList.toggle('btn-danger');\n      e.target.value = e.target.value === 'Ver descripción del cliente' ? 'Cerrar' : 'Ver descripción del cliente';\n    }\n  };\n\n  var canalBuyClient = prop.dataOrder.token_influencer === 'organic' ? 'Orgánico' : prop.dataOrder.token_influencer;\n  return __jsx(\"article\", {\n    className: \"col-12 col-sm-12 col-lg-12 col-xl-12 col-sells\"\n  }, __jsx(\"ul\", null, __jsx(\"li\", null, \"Cliente: \", __jsx(\"span\", {\n    className: \"text-dark\"\n  }, __jsx(\"strong\", null, user.username))), __jsx(\"li\", null, \"Canal: \", __jsx(\"span\", {\n    className: \"text-primary\"\n  }, \" \", __jsx(\"strong\", null, canalBuyClient))), __jsx(\"li\", null, \"Precio: \", __jsx(\"span\", {\n    className: \"text-success\"\n  }, __jsx(\"strong\", null, product ? \"$\".concat(product.amount) : __jsx(\"span\", {\n    className: \"text-secondary\"\n  }, \"producto no disponible\")))), __jsx(\"li\", {\n    className: prop.dataOrder.status_transaction === 'success' || prop.dataOrder.status_transaction === 'refuse' ? 'd-none' : ''\n  }, __jsx(\"button\", {\n    onClick: handlerClickPayment,\n    type: \"button\",\n    value: \"success\",\n    className: \"btn btn-primary\"\n  }, \"Acreditado\"), __jsx(\"button\", {\n    onClick: handlerClickPayment,\n    type: \"button\",\n    value: \"refuse\",\n    className: \"btn btn-warning\"\n  }, \"Rechazado\")), __jsx(\"li\", {\n    className: prop.dataOrder.status_transaction === 'success' ? 'text-success' : 'd-none'\n  }, __jsx(\"strong\", null, \"Acreditado\"), __jsx(\"svg\", {\n    width: \"2em\",\n    height: \"2em\",\n    viewBox: \"0 0 16 16\",\n    className: \"ml-2 bi bi-check-circle-fill\",\n    fill: \"currentColor\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, __jsx(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z\"\n  }))), __jsx(\"li\", {\n    className: prop.dataOrder.status_transaction === 'refuse' ? 'text-danger' : 'd-none'\n  }, __jsx(\"strong\", null, \"Rechazado\"), __jsx(\"svg\", {\n    width: \"2em\",\n    height: \"2em\",\n    viewBox: \"0 0 16 16\",\n    className: \"ml-2 bi bi-x-octagon-fill\",\n    fill: \"currentColor\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, __jsx(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M11.46.146A.5.5 0 0 0 11.107 0H4.893a.5.5 0 0 0-.353.146L.146 4.54A.5.5 0 0 0 0 4.893v6.214a.5.5 0 0 0 .146.353l4.394 4.394a.5.5 0 0 0 .353.146h6.214a.5.5 0 0 0 .353-.146l4.394-4.394a.5.5 0 0 0 .146-.353V4.893a.5.5 0 0 0-.146-.353L11.46.146zm-6.106 4.5a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293 5.354 4.646z\"\n  })))), __jsx(\"input\", {\n    onClick: handlerSwitchCardView,\n    type: \"button\",\n    className: \"btn btn-secondary\",\n    value: \"Ver descripci\\xF3n del producto\"\n  }), __jsx(\"input\", {\n    onClick: handlerSwitchCardViewCustomer,\n    type: \"button\",\n    className: \"btn btn-info\",\n    value: \"Ver descripci\\xF3n del cliente\"\n  }), __jsx(\"ul\", {\n    className: \"content-description-prod-transaction d-none\",\n    ref: cardViewMore\n  }, __jsx(\"li\", null, \"T\\xEDtulo: \", __jsx(\"strong\", null, product ? product.title : 'producto no disponible')), __jsx(\"li\", {\n    className: \"desc-card-view-transaction\"\n  }, \"Descripci\\xF3n: \", __jsx(\"p\", {\n    className: \"p-3 d-inline\"\n  }, __jsx(\"strong\", null, product ? product.description : 'producto no disponible'))), __jsx(\"li\", null, \"Localidad: \", __jsx(\"strong\", null, product ? product.location : 'producto no disponible')), __jsx(\"li\", null, \"Negocio: \", __jsx(\"strong\", null, product ? product.business : 'producto no disponible')), __jsx(\"li\", null, \"Categor\\xEDa \", __jsx(\"strong\", null, product ? product.type : 'producto no disponible'))), __jsx(\"ul\", {\n    className: \"content-description-prod-transaction d-none\",\n    ref: cardViewMoreUser\n  }, __jsx(\"li\", null, \"Nombre de Usuario: \", __jsx(\"strong\", null, user.username)), __jsx(\"li\", null, \"Nombre completo: \", __jsx(\"strong\", null, user.fullname)), __jsx(\"li\", null, \"Correo electr\\xF3nico: \", __jsx(\"strong\", null, user.email)), __jsx(\"li\", null, \"Localidad: \", __jsx(\"strong\", null, user.location))));\n};\n\nexport default ColSellPending;","map":null,"metadata":{},"sourceType":"module"}