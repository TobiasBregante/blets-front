{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"D:\\\\Escritorio\\\\marketblets\\\\front-end\\\\components\\\\user\\\\register.component.jsx\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport Link from \"next/link\";\nimport { useRouter } from \"next/router\";\nimport { useEffect } from \"react\";\nimport { useRef } from \"react\";\nimport { useState } from \"react\";\nimport { useCookies } from 'react-cookie';\n\nvar Register = function Register() {\n  _s();\n\n  // router redirect\n  var router = useRouter(); // get value inputs of form login\n\n  var _useState = useState(''),\n      user = _useState[0],\n      setUser = _useState[1];\n\n  var _useState2 = useState(''),\n      pdw = _useState2[0],\n      setPdw = _useState2[1];\n\n  var _useState3 = useState(''),\n      userEmail = _useState3[0],\n      setEmail = _useState3[1];\n\n  var _useState4 = useState([]),\n      geoData = _useState4[0],\n      setGeoData = _useState4[1];\n\n  var _useState5 = useState(''),\n      fullname = _useState5[0],\n      setFullname = _useState5[1];\n\n  var _useState6 = useState(''),\n      location = _useState6[0],\n      setLocation = _useState6[1];\n\n  var userWarning = useRef(null); // user cookie\n\n  var _useCookies = useCookies(['user']),\n      _useCookies2 = _slicedToArray(_useCookies, 3),\n      cookies = _useCookies2[0],\n      setCookie = _useCookies2[1],\n      removeCookie = _useCookies2[2]; // switch for view or not pdw when write\n\n\n  var _useState7 = useState('password'),\n      viewPdw = _useState7[0],\n      setViewPdw = _useState7[1];\n\n  var _useState8 = useState('d-none'),\n      viewPdwClose = _useState8[0],\n      setViewPdwClose = _useState8[1];\n\n  var _useState9 = useState('d-block'),\n      viewPdwOpen = _useState9[0],\n      setViewPdwOpen = _useState9[1]; // array list of South Am√©rica provinces, Argentina\n\n\n  useEffect(function () {\n    var geoDataFetch = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var geo, geoJSON;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return fetch('https://apis.datos.gob.ar/georef/api/provincias');\n\n              case 2:\n                geo = _context.sent;\n                _context.next = 5;\n                return geo.json();\n\n              case 5:\n                geoJSON = _context.sent;\n                setGeoData(geoJSON.provincias);\n\n              case 7:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function geoDataFetch() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    geoDataFetch();\n  }, []); // handler of view pdw or not\n\n  var handlePdwView = function handlePdwView() {\n    if (viewPdwClose === 'd-none') {\n      setViewPdwClose('d-block');\n      setViewPdwOpen('d-none');\n      setViewPdw('text');\n    } else {\n      setViewPdwClose('d-none');\n      setViewPdwOpen('d-block');\n      setViewPdw('password');\n    }\n  }; // handler of the start session of the login\n\n\n  var userSessionStart = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(username, userPdw, email) {\n      var formData, res, datares;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              formData = new FormData();\n              _context2.next = 3;\n              return fetch('http://localhost:4000/v1/user/signup', {\n                body: JSON.stringify({\n                  username: username,\n                  fullname: fullname,\n                  location: location,\n                  pdw: userPdw,\n                  email: userEmail\n                }),\n                method: 'POST',\n                headers: {\n                  'Content-Type': 'application/json',\n                  'Access-Control-Allow-Origin': '*'\n                }\n              });\n\n            case 3:\n              res = _context2.sent;\n              _context2.next = 6;\n              return res.json();\n\n            case 6:\n              datares = _context2.sent;\n\n              if (!datares.create_user) {\n                userWarning.current.classList.toggle('d-block');\n                setTimeout(function () {\n                  userWarning.current.classList.toggle('d-block');\n                }, 2500);\n              } else {\n                console.log(datares); //setCookie('user', datares);\n                //router.push('/');\n              }\n\n            case 8:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function userSessionStart(_x, _x2, _x3) {\n      return _ref2.apply(this, arguments);\n    };\n  }(); // event submit and get data of the user for the login\n\n\n  var handleSubmit = function handleSubmit(e) {\n    e.preventDefault(); // get for parameter the data of the form login for your verification\n\n    userSessionStart(user, pdw);\n  }; // handler value input username\n\n\n  var handleChangeUsername = function handleChangeUsername(e) {\n    setUser(e.target.value);\n  };\n\n  var handleChangeFullname = function handleChangeFullname(e) {\n    setFullname(e.target.value);\n  };\n\n  var handleChangeLocation = function handleChangeLocation(e) {\n    setLocation(e.target.value);\n  };\n\n  var handleChangePdw = function handleChangePdw(e) {\n    setPdw(e.target.value);\n  };\n\n  var handleChangeEmail = function handleChangeEmail(e) {\n    setEmail(e.target.value);\n  };\n\n  return __jsx(\"article\", {\n    className: \"content-frm-login col-10 col-sm-10 col-lg-4 col-xl-4 m-auto bg-dark\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 9\n    }\n  }, __jsx(\"form\", {\n    onSubmit: handleSubmit,\n    id: \"frm-login\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 13\n    }\n  }, __jsx(\"p\", {\n    ref: userWarning,\n    className: \"user-warning d-none bg-secondary p-2\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 17\n    }\n  }, \"Este usuario ya existe\"), __jsx(\"input\", {\n    onChange: handleChangeFullname,\n    type: \"text\",\n    name: \"fullname\",\n    placeholder: \"Nombre completo\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 17\n    }\n  }), __jsx(\"input\", {\n    onChange: handleChangeUsername,\n    type: \"text\",\n    name: \"user\",\n    placeholder: \"Nombre de usuario\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 17\n    }\n  }), __jsx(\"input\", {\n    onChange: handleChangeEmail,\n    type: \"email\",\n    name: \"email\",\n    placeholder: \"Correo electr\\xF3nico\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 17\n    }\n  }), __jsx(\"select\", {\n    onChange: handleChangeLocation,\n    name: \"location\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 17\n    }\n  }, geoData ? geoData.map(function (location) {\n    return __jsx(\"option\", {\n      key: location.id,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 49\n      }\n    }, location.nombre);\n  }) : __jsx(\"option\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 27\n    }\n  }, \"No hay provincias\")), __jsx(\"article\", {\n    className: \"col-12 p-0\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 17\n    }\n  }, __jsx(\"input\", {\n    onChange: handleChangePdw,\n    type: viewPdw,\n    name: \"pdw\",\n    placeholder: \"Contrase\\xF1a\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 21\n    }\n  }), __jsx(\"button\", {\n    onClick: handlePdwView,\n    type: \"button\",\n    className: \"btn-switch-pdw\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 21\n    }\n  }, __jsx(\"svg\", {\n    width: \"1em\",\n    height: \"1em\",\n    viewBox: \"0 0 16 16\",\n    className: \"bi bi-eye-slash \".concat(viewPdwClose),\n    fill: \"currentColor\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 25\n    }\n  }, __jsx(\"path\", {\n    d: \"M13.359 11.238C15.06 9.72 16 8 16 8s-3-5.5-8-5.5a7.028 7.028 0 0 0-2.79.588l.77.771A5.944 5.944 0 0 1 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.134 13.134 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755-.165.165-.337.328-.517.486l.708.709z\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 29\n    }\n  }), __jsx(\"path\", {\n    d: \"M11.297 9.176a3.5 3.5 0 0 0-4.474-4.474l.823.823a2.5 2.5 0 0 1 2.829 2.829l.822.822zm-2.943 1.299l.822.822a3.5 3.5 0 0 1-4.474-4.474l.823.823a2.5 2.5 0 0 0 2.829 2.829z\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 29\n    }\n  }), __jsx(\"path\", {\n    d: \"M3.35 5.47c-.18.16-.353.322-.518.487A13.134 13.134 0 0 0 1.172 8l.195.288c.335.48.83 1.12 1.465 1.755C4.121 11.332 5.881 12.5 8 12.5c.716 0 1.39-.133 2.02-.36l.77.772A7.029 7.029 0 0 1 8 13.5C3 13.5 0 8 0 8s.939-1.721 2.641-3.238l.708.709z\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 29\n    }\n  }), __jsx(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M13.646 14.354l-12-12 .708-.708 12 12-.708.708z\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 29\n    }\n  })), __jsx(\"svg\", {\n    width: \"1em\",\n    height: \"1em\",\n    viewBox: \"0 0 16 16\",\n    className: \"bi bi-eye \".concat(viewPdwOpen),\n    fill: \"currentColor\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 25\n    }\n  }, __jsx(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8zM1.173 8a13.134 13.134 0 0 0 1.66 2.043C4.12 11.332 5.88 12.5 8 12.5c2.12 0 3.879-1.168 5.168-2.457A13.134 13.134 0 0 0 14.828 8a13.133 13.133 0 0 0-1.66-2.043C11.879 4.668 10.119 3.5 8 3.5c-2.12 0-3.879 1.168-5.168 2.457A13.133 13.133 0 0 0 1.172 8z\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 29\n    }\n  }), __jsx(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5zM4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0z\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 29\n    }\n  })))), __jsx(\"input\", {\n    className: \"btn text-dark\",\n    type: \"submit\",\n    value: \"Registrarme\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 17\n    }\n  }), __jsx(Link, {\n    href: \"/iniciar-sesion\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 17\n    }\n  }, __jsx(\"a\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 21\n    }\n  }, \"Iniciar sesi\\xF3n\"))));\n};\n\n_s(Register, \"muwrvTDdtW8qzFWAI6CQH5jT47g=\", false, function () {\n  return [useRouter, useCookies];\n});\n\n_c = Register;\nexport default Register;\n\nvar _c;\n\n$RefreshReg$(_c, \"Register\");","map":{"version":3,"sources":["D:/Escritorio/marketblets/front-end/components/user/register.component.jsx"],"names":["Link","useRouter","useEffect","useRef","useState","useCookies","Register","router","user","setUser","pdw","setPdw","userEmail","setEmail","geoData","setGeoData","fullname","setFullname","location","setLocation","userWarning","cookies","setCookie","removeCookie","viewPdw","setViewPdw","viewPdwClose","setViewPdwClose","viewPdwOpen","setViewPdwOpen","geoDataFetch","fetch","geo","json","geoJSON","provincias","handlePdwView","userSessionStart","username","userPdw","email","formData","FormData","body","JSON","stringify","method","headers","res","datares","create_user","current","classList","toggle","setTimeout","console","log","handleSubmit","e","preventDefault","handleChangeUsername","target","value","handleChangeFullname","handleChangeLocation","handleChangePdw","handleChangeEmail","map","id","nombre"],"mappings":"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","sourcesContent":["import Link from \"next/link\";\r\nimport { useRouter } from \"next/router\";\r\nimport { useEffect } from \"react\";\r\nimport { useRef } from \"react\";\r\nimport { useState } from \"react\";\r\nimport { useCookies } from 'react-cookie';\r\n\r\nconst Register = () => {\r\n    // router redirect\r\n    const router = useRouter();\r\n    // get value inputs of form login\r\n    const [user, setUser] = useState('');\r\n    const [pdw, setPdw] = useState('');\r\n    const [userEmail, setEmail] = useState('');\r\n    const [geoData, setGeoData] = useState([]);\r\n    const [fullname, setFullname] = useState('');\r\n    const [location, setLocation] = useState('');\r\n    const userWarning = useRef(null);\r\n    // user cookie\r\n    const [cookies, setCookie, removeCookie] = useCookies(['user']);\r\n    // switch for view or not pdw when write\r\n    const [viewPdw, setViewPdw] = useState('password');\r\n    const [viewPdwClose, setViewPdwClose] = useState('d-none');\r\n    const [viewPdwOpen, setViewPdwOpen] = useState('d-block');\r\n\r\n    // array list of South Am√©rica provinces, Argentina\r\n    useEffect(() => {\r\n        const geoDataFetch = async () => {\r\n            const geo = await fetch('https://apis.datos.gob.ar/georef/api/provincias');\r\n            const geoJSON = await geo.json();\r\n            setGeoData(geoJSON.provincias)\r\n        }\r\n        geoDataFetch()\r\n    }, [])\r\n    // handler of view pdw or not\r\n    const handlePdwView = () => {\r\n        if(viewPdwClose === 'd-none'){\r\n            setViewPdwClose('d-block');\r\n            setViewPdwOpen('d-none');\r\n            setViewPdw('text');\r\n        }else{\r\n            setViewPdwClose('d-none');\r\n            setViewPdwOpen('d-block');\r\n            setViewPdw('password');\r\n        }\r\n    }\r\n    // handler of the start session of the login\r\n    const userSessionStart = async (username, userPdw, email) => {\r\n        let formData = new FormData();\r\n        const res = await fetch('http://localhost:4000/v1/user/signup', {\r\n            body: JSON.stringify({\r\n                username: username,\r\n                fullname: fullname,\r\n                location: location, \r\n                pdw: userPdw, \r\n                email: userEmail\r\n            }), \r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Access-Control-Allow-Origin': '*'\r\n            }\r\n        })\r\n        const datares = await res.json()\r\n        if(!datares.create_user){\r\n            userWarning.current.classList.toggle('d-block');\r\n            setTimeout(() => {\r\n                userWarning.current.classList.toggle('d-block');\r\n            }, 2500)\r\n        }else{\r\n            console.log(datares)\r\n            //setCookie('user', datares);\r\n            //router.push('/');\r\n        }\r\n    }\r\n    // event submit and get data of the user for the login\r\n    const handleSubmit = e => {\r\n        e.preventDefault()\r\n        // get for parameter the data of the form login for your verification\r\n        userSessionStart(user, pdw);\r\n    }\r\n    // handler value input username\r\n    const handleChangeUsername = e => {\r\n        setUser(e.target.value);\r\n    }\r\n    const handleChangeFullname = e => {\r\n        setFullname(e.target.value);\r\n    }\r\n    const handleChangeLocation = e => {\r\n        setLocation(e.target.value);\r\n    }\r\n    const handleChangePdw = e => {\r\n        setPdw(e.target.value);\r\n    }\r\n    const handleChangeEmail = e => {\r\n        setEmail(e.target.value);\r\n    }\r\n    return(\r\n        <article className=\"content-frm-login col-10 col-sm-10 col-lg-4 col-xl-4 m-auto bg-dark\">\r\n            <form onSubmit={handleSubmit} id='frm-login'>\r\n                <p ref={userWarning} className=\"user-warning d-none bg-secondary p-2\">Este usuario ya existe</p>\r\n                <input onChange={handleChangeFullname} type=\"text\" name=\"fullname\" placeholder='Nombre completo'/>\r\n                <input onChange={handleChangeUsername} type='text' name='user' placeholder='Nombre de usuario'/>\r\n                <input onChange={handleChangeEmail} type='email' name='email' placeholder='Correo electr√≥nico'/>\r\n                <select onChange={handleChangeLocation} name=\"location\">\r\n                    {\r\n                        geoData ? \r\n                        geoData.map(location => <option key={location.id}>{location.nombre}</option>) \r\n                        : <option>No hay provincias</option>\r\n                    }\r\n                </select>\r\n                <article className=\"col-12 p-0\">\r\n                    <input onChange={handleChangePdw} type={viewPdw} name='pdw' placeholder='Contrase√±a'/>\r\n                    <button onClick={handlePdwView} type='button' className='btn-switch-pdw'>\r\n                        <svg width=\"1em\" height=\"1em\" viewBox=\"0 0 16 16\" className={`bi bi-eye-slash ${viewPdwClose}`} fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                            <path d=\"M13.359 11.238C15.06 9.72 16 8 16 8s-3-5.5-8-5.5a7.028 7.028 0 0 0-2.79.588l.77.771A5.944 5.944 0 0 1 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.134 13.134 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755-.165.165-.337.328-.517.486l.708.709z\"/>\r\n                            <path d=\"M11.297 9.176a3.5 3.5 0 0 0-4.474-4.474l.823.823a2.5 2.5 0 0 1 2.829 2.829l.822.822zm-2.943 1.299l.822.822a3.5 3.5 0 0 1-4.474-4.474l.823.823a2.5 2.5 0 0 0 2.829 2.829z\"/>\r\n                            <path d=\"M3.35 5.47c-.18.16-.353.322-.518.487A13.134 13.134 0 0 0 1.172 8l.195.288c.335.48.83 1.12 1.465 1.755C4.121 11.332 5.881 12.5 8 12.5c.716 0 1.39-.133 2.02-.36l.77.772A7.029 7.029 0 0 1 8 13.5C3 13.5 0 8 0 8s.939-1.721 2.641-3.238l.708.709z\"/>\r\n                            <path fillRule=\"evenodd\" d=\"M13.646 14.354l-12-12 .708-.708 12 12-.708.708z\"/>\r\n                        </svg>\r\n                        <svg width=\"1em\" height=\"1em\" viewBox=\"0 0 16 16\" className={`bi bi-eye ${viewPdwOpen}`} fill=\"currentColor\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                            <path fillRule=\"evenodd\" d=\"M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8zM1.173 8a13.134 13.134 0 0 0 1.66 2.043C4.12 11.332 5.88 12.5 8 12.5c2.12 0 3.879-1.168 5.168-2.457A13.134 13.134 0 0 0 14.828 8a13.133 13.133 0 0 0-1.66-2.043C11.879 4.668 10.119 3.5 8 3.5c-2.12 0-3.879 1.168-5.168 2.457A13.133 13.133 0 0 0 1.172 8z\"/>\r\n                            <path fillRule=\"evenodd\" d=\"M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5zM4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0z\"/>\r\n                        </svg>\r\n                    </button>\r\n                </article>\r\n                <input className='btn text-dark' type='submit' value='Registrarme'/>\r\n                <Link href='/iniciar-sesion'>\r\n                    <a>\r\n                        Iniciar sesi√≥n\r\n                    </a>\r\n                </Link>\r\n            </form>\r\n        </article>\r\n    )\r\n}\r\n\r\nexport default Register;\r\n"]},"metadata":{},"sourceType":"module"}