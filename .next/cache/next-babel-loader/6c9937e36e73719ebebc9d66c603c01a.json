{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Admin\\\\Desktop\\\\Customers\\\\blets\\\\components\\\\product\\\\product.component.jsx\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useState, useEffect, useRef } from 'react';\nimport { useCookies } from 'react-cookie';\nimport { useRouter } from \"next/router\";\nimport CurrencyFormat from 'react-currency-format';\nimport SendTransaction from './send.transaction.component';\nimport RemoveProduct from '../management/remove.product.component';\nimport EditProduct from '../management/edit.product.component';\nimport { Image, Transformation, CloudinaryContext } from 'cloudinary-react';\nimport Link from 'next/link';\nimport SwitchPrice from './price.convert.component';\nimport axios from 'axios';\nimport moment from 'moment';\n\nconst Product = ({\n  router\n}) => {\n  var _cookies$user, _cookies$user$auth, _cookies$user2, _cookies$user2$auth, _cookies$user3, _cookies$user3$auth;\n\n  const Router = useRouter();\n  const imgRef = useRef(null);\n  const {\n    id,\n    name\n  } = Router.query;\n  const imgContent = useRef(null);\n  const {\n    0: credential,\n    1: setCredential\n  } = useState('');\n  const {\n    0: imgContentState,\n    1: setImgContentState\n  } = useState('');\n  const [cookies, setCookie] = useCookies(['user']);\n  const {\n    0: product,\n    1: setProduct\n  } = useState([]);\n  const {\n    0: packageSendingAlert,\n    1: setPackageSendingAlert\n  } = useState('d-none');\n  const {\n    0: acceptPaymentSwitch,\n    1: setAcceptPaymentSwitch\n  } = useState('accept-payment-close');\n  const {\n    0: valueBtnSwitchPayment,\n    1: setValueBtnSwitchPayment\n  } = useState('Comprar');\n  const {\n    0: discountHiddeNotLogged,\n    1: setDiscountHiddeNotLogged\n  } = useState('');\n  const {\n    0: imageProd,\n    1: setImageProd\n  } = useState('/img/img-not-found.png');\n  const {\n    0: imageIsSelected,\n    1: setImageIsSelected\n  } = useState(false);\n  const {\n    0: paymentIsOpen,\n    1: setPaymentIsOpen\n  } = useState(false);\n  const {\n    0: imgUpload,\n    1: setImgUpload\n  } = useState({});\n  const {\n    0: discount,\n    1: setDiscount\n  } = useState('');\n  const {\n    0: amount,\n    1: setAmount\n  } = useState('');\n\n  const HandlerFindUser = async idUser => {\n    const getUser = await axios.get(`${process.env.API_PATH}/v1/user/${idUser}`),\n          resUser = await getUser.data;\n    return resUser;\n  };\n\n  const getAllProduct = async () => {\n    const fetchAll = await fetch(`${process.env.API_PATH}/v1/product/${id}`, {\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*'\n      }\n    });\n    const dataFetch = await fetchAll.json();\n    setProduct(dataFetch);\n    console.log(dataFetch);\n    setAmount(dataFetch.amount);\n    setDiscount(dataFetch.discount);\n    cookies.user && !cookies.user.discount_token || !cookies.user || product.discount <= 0 ? setDiscountHiddeNotLogged('d-none') : setDiscountHiddeNotLogged('');\n    return dataFetch;\n  };\n\n  useEffect(() => {\n    if (cookies.user && cookies.user.rol !== product.type || cookies.user && cookies.user.rol !== 'master') {\n      setCredential('false');\n    } else if (!cookies.user) {\n      setCredential('false');\n    }\n\n    if (cookies.user && cookies.user.rol === 'master' || cookies.user && cookies.user.rol === product.type) {\n      setCredential('true');\n    }\n\n    product.img && setImgContentState(imgContent.current.offsetWidth);\n  });\n  useEffect(() => {\n    if (Router.asPath !== Router.route) {\n      getAllProduct();\n    }\n  }, [Router]);\n\n  const handlerAcceptPaymentSwitch = e => {\n    if (cookies.user) {\n      const isNotXBtn = e.target.className.search('btn-close-btn-payment') == -1;\n\n      if (acceptPaymentSwitch === 'accept-payment-close' && isNotXBtn) {\n        setPaymentIsOpen(true);\n        e.target.classList.toggle('btn-danger');\n        e.target.classList.remove('btn-buy-now');\n        setValueBtnSwitchPayment('Cerrar');\n        setAcceptPaymentSwitch('');\n      } else if (isNotXBtn) {\n        setPaymentIsOpen(false);\n        e.target.classList.toggle('btn-danger');\n        e.target.classList.add('btn-buy-now');\n        setValueBtnSwitchPayment('Pagar con Mercado Pago!');\n        setAcceptPaymentSwitch('accept-payment-close');\n      }\n    } else {\n      window.location = '/iniciar-sesion';\n    }\n  },\n        handlerTransaction = async () => {\n    const customer = await HandlerFindUser(cookies.user.id);\n    setPackageSendingAlert('');\n    let frmData = new FormData();\n    frmData.append('id_product', product._id);\n    frmData.append('product', JSON.stringify(product));\n    frmData.append('payer', JSON.stringify(customer));\n    frmData.append('token_influencer', cookies.user.discount_token ? cookies.user.discount_token : 'organic');\n    frmData.append('id_client', cookies.user && cookies.user.id);\n    frmData.append('status_transaction', 'pending');\n    frmData.append('proof_payment', imgRef.current.files[0]);\n    frmData.append('create_at', `${moment()._d}`);\n    frmData.append('create_at_filter', moment().format('YYYY-MM-DD'));\n    const resTransaction = await SendTransaction(frmData, cookies);\n    return resTransaction;\n  },\n        imgPreviewProd = e => {\n    let reader = new FileReader();\n    setImageIsSelected(true);\n\n    reader.onloadend = () => {\n      setImageProd(reader.result);\n    };\n\n    if (e.target.files[0]) {\n      setImgUpload(e.target.files[0]);\n      reader.readAsDataURL(e.target.files[0]);\n    } else {\n      setImageProd('');\n    }\n  };\n\n  return __jsx(React.Fragment, null, __jsx(\"section\", {\n    className: \"row section-product\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 9\n    }\n  }, __jsx(\"article\", {\n    className: \"col-12 col-sm-12 col-lg-12 col-xl-12 p-0 mt-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 13\n    }\n  }, __jsx(\"nav\", {\n    \"aria-label\": \"breadcrumb breadcrumb-product-open\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 17\n    }\n  }, __jsx(\"ol\", {\n    className: \"breadcrumb breadcrumb-product-open\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 21\n    }\n  }, __jsx(\"li\", {\n    className: \"breadcrumb-item text-primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 25\n    }\n  }, __jsx(Link, {\n    href: \"/\",\n    as: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 70\n    }\n  }, __jsx(\"a\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 92\n    }\n  }, \"Inicio\"))), __jsx(\"li\", {\n    className: \"breadcrumb-item active text-primary\",\n    \"aria-current\": \"page\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 25\n    }\n  }, name)))), __jsx(\"article\", {\n    className: \"col-12 col-sm-12 col-lg-8 col-xl-8\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 13\n    }\n  }, __jsx(\"article\", {\n    ref: imgContent,\n    className: \"col-12 content-img-prod-open\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 17\n    }\n  }, credential === 'true' ? __jsx(RemoveProduct, {\n    product: product,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 46\n    }\n  }) : false, credential === 'true' ? __jsx(EditProduct, {\n    product: product,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 46\n    }\n  }) : false, product.img ? __jsx(CloudinaryContext, {\n    cloudName: \"blets\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 27\n    }\n  }, __jsx(Image, {\n    className: \"card-img\",\n    publicId: `${product.img}.jpg`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 29\n    }\n  }, __jsx(Transformation, {\n    crop: \"scale\",\n    quality: \"40\",\n    width: imgContentState - 50,\n    dpr: \"auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 33\n    }\n  }))) : ''), __jsx(\"article\", {\n    className: \"product-description-content col-12 p-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 17\n    }\n  }, __jsx(\"h2\", {\n    className: \"col-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 21\n    }\n  }, \"Descripci\\xF3n\"), __jsx(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 59\n    }\n  }), __jsx(\"ul\", {\n    type: \"none\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 21\n    }\n  }, __jsx(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 25\n    }\n  }, \"- Categor\\xEDa: \", __jsx(\"span\", {\n    className: \"text-primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 42\n    }\n  }, __jsx(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 73\n    }\n  }, product.type)), __jsx(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 111\n    }\n  })), product.subcategory ? __jsx(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 31\n    }\n  }, \"- Edici\\xF3n: \", __jsx(\"span\", {\n    className: \"text-primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 44\n    }\n  }, __jsx(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 75\n    }\n  }, product.subcategory))) : '', __jsx(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 25\n    }\n  }, \"- Nombre del negocio: \", __jsx(\"span\", {\n    className: \"text-primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 51\n    }\n  }, __jsx(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 82\n    }\n  }, product.business))), __jsx(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 25\n    }\n  }, \"- Ubicaci\\xF3n: \", __jsx(\"span\", {\n    className: \"text-primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 42\n    }\n  }, __jsx(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 73\n    }\n  }, product.location)))), __jsx(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 26\n    }\n  }), __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 21\n    }\n  }, product.description))), __jsx(\"article\", {\n    className: \"col-12 col-sm-12 col-lg-4 col-xl-4 p-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 13\n    }\n  }, __jsx(\"article\", {\n    className: \"col-12 card\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 17\n    }\n  }, __jsx(\"article\", {\n    className: \"card-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 21\n    }\n  }, __jsx(\"h1\", {\n    className: \"text-secondary component-info-buy\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 25\n    }\n  }, product.title), __jsx(\"h4\", {\n    className: `text-dark component-info-buy`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 25\n    }\n  }, amount && discount && __jsx(SwitchPrice.SwitchPriceAuth, {\n    discount: discount,\n    amount: amount,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 55\n    }\n  })), __jsx(\"strike\", {\n    className: \"text-secondary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 25\n    }\n  }, __jsx(\"h5\", {\n    className: `component-info-buy ${discountHiddeNotLogged}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 29\n    }\n  }, __jsx(CurrencyFormat, {\n    value: product.amount,\n    displayType: 'text',\n    thousandSeparator: true,\n    prefix: '$',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 33\n    }\n  }))), __jsx(\"p\", {\n    className: \"col-12 col-sm-12 col-lg-6 col-xl-6 p-0 m-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 25\n    }\n  }, __jsx(\"span\", {\n    className: `${!product.shipping ? 'd-none' : 'd-block'} shipping-open bg-primary text-light`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 29\n    }\n  }, \"Lo recib\\xEDs en tu domicilio\"), __jsx(\"span\", {\n    className: `shipping-open bg-success text-light d-block`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 29\n    }\n  }, \"Env\\xEDo gratis\")))), __jsx(\"article\", {\n    className: \"col-12 card mt-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 17\n    }\n  }, __jsx(\"article\", {\n    className: \"card-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 21\n    }\n  }, __jsx(\"p\", {\n    className: \"text-dark component-info-buy\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 25\n    }\n  }, \"Pag\\xE1 al contado o en cuotas con\", __jsx(\"span\", {\n    className: \"text-info\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 25\n    }\n  }, \" \", __jsx(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 54\n    }\n  }, \"Mercado Pago\"))), __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 25\n    }\n  }, __jsx(\"span\", {\n    className: \"bg-primary p-2 text-light\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 29\n    }\n  }, \"Se encuentra en \", __jsx(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 49\n    }\n  }, product.location))), __jsx(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 25\n    }\n  }), __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 25\n    }\n  }, __jsx(\"img\", {\n    className: \"ico-payments\",\n    src: \"../img/visa.png\",\n    alt: \"Visa\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 29\n    }\n  }), __jsx(\"img\", {\n    className: \"ico-payments\",\n    src: \"../img/mastercard.png\",\n    alt: \"Mastercard\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 29\n    }\n  }), __jsx(\"img\", {\n    className: \"ico-payments\",\n    src: \"../img/transfer.png\",\n    alt: \"Transferencia\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 29\n    }\n  }), __jsx(\"img\", {\n    className: \"ico-payments\",\n    src: \"../img/mp.webp\",\n    alt: \"Mercado Pago\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 29\n    }\n  })), __jsx(\"article\", {\n    className: `col-12 accept-payment ${acceptPaymentSwitch}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 25\n    }\n  }, __jsx(\"article\", {\n    className: `content--btn-payment p-5 ${acceptPaymentSwitch}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 29\n    }\n  }, __jsx(\"button\", {\n    type: \"button\",\n    className: \"btn text-danger btn-close-btn-payment\",\n    onClick: handlerAcceptPaymentSwitch,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 33\n    }\n  }), __jsx(\"article\", {\n    className: \"btn-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 33\n    }\n  }, __jsx(\"input\", {\n    onClick: () => window.open(\"http://localhost:3000\", \"Popup\", \"toolbar=no, location=no, statusbar=no, menubar=no, scrollbars=1, resizable=0, width=580, height=600, top=30\"),\n    className: \"btn btn-primary d-block mb-1\",\n    type: \"button\",\n    value: \"Continuar con Mercado Pago\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 37\n    }\n  }), __jsx(\"div\", {\n    className: `alert alert-success mt-1 mb-1 ${packageSendingAlert}`,\n    role: \"alert\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 37\n    }\n  }, \"Tu pedido se ha enviado! Pronto nos pondremos en cont\\xE1cto. Sea paciente, por favor.\"), __jsx(\"p\", {\n    className: \"mt-3 d-none\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 37\n    }\n  }, \"Continuar con transferencia bancaria: \", __jsx(\"span\", {\n    className: \"text-warning\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 102\n    }\n  }, \"CBU \", product.CBU)), __jsx(\"p\", {\n    className: \"mt-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 37\n    }\n  }, __jsx(\"strong\", {\n    className: \"text-warning\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 41\n    }\n  }, \"IMPORTANTE\"), __jsx(\"small\", {\n    className: \"d-block\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 256,\n      columnNumber: 41\n    }\n  }, \"Env\\xEDar screenshot del comprobante de pago\"), __jsx(\"label\", {\n    htmlFor: \"screenshot-payment\",\n    className: \"btn btn-success\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 41\n    }\n  }, \"Seleccionar imagen\"), __jsx(\"input\", {\n    ref: imgRef,\n    type: \"file\",\n    onChange: imgPreviewProd,\n    className: \"d-none\",\n    id: \"screenshot-payment\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 41\n    }\n  }), imageIsSelected && __jsx(\"input\", {\n    type: \"button\",\n    onClick: handlerTransaction,\n    className: \"btn btn-warning d-block\",\n    value: \"Finalizar y Enviar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 64\n    }\n  }), __jsx(\"img\", {\n    src: imageProd,\n    alt: \"preview proof\",\n    className: \"proof-preview-prod\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 269,\n      columnNumber: 41\n    }\n  }))))), (cookies === null || cookies === void 0 ? void 0 : (_cookies$user = cookies.user) === null || _cookies$user === void 0 ? void 0 : (_cookies$user$auth = _cookies$user.auth) === null || _cookies$user$auth === void 0 ? void 0 : _cookies$user$auth.user_verify) && __jsx(\"input\", {\n    disabled: !(cookies === null || cookies === void 0 ? void 0 : (_cookies$user2 = cookies.user) === null || _cookies$user2 === void 0 ? void 0 : (_cookies$user2$auth = _cookies$user2.auth) === null || _cookies$user2$auth === void 0 ? void 0 : _cookies$user2$auth.user_verify),\n    onClick: handlerAcceptPaymentSwitch,\n    type: \"button\",\n    className: \"btn btn-buy-now btn-primary text-light col-12\",\n    value: valueBtnSwitchPayment,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 33\n    }\n  }), !(cookies === null || cookies === void 0 ? void 0 : (_cookies$user3 = cookies.user) === null || _cookies$user3 === void 0 ? void 0 : (_cookies$user3$auth = _cookies$user3.auth) === null || _cookies$user3$auth === void 0 ? void 0 : _cookies$user3$auth.user_verify) && __jsx(\"p\", {\n    className: \"alert bg-info mt-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 287,\n      columnNumber: 33\n    }\n  }, \"Completa tu datos para realizar esta compra\"))))), paymentIsOpen && __jsx(\"article\", {\n    className: \"content-onload-shadow\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 296,\n      columnNumber: 28\n    }\n  }));\n}; // 0720006988000038698918\n\n\nexport default Product;","map":{"version":3,"sources":["C:/Users/Admin/Desktop/Customers/blets/components/product/product.component.jsx"],"names":["useState","useEffect","useRef","useCookies","useRouter","CurrencyFormat","SendTransaction","RemoveProduct","EditProduct","Image","Transformation","CloudinaryContext","Link","SwitchPrice","axios","moment","Product","router","Router","imgRef","id","name","query","imgContent","credential","setCredential","imgContentState","setImgContentState","cookies","setCookie","product","setProduct","packageSendingAlert","setPackageSendingAlert","acceptPaymentSwitch","setAcceptPaymentSwitch","valueBtnSwitchPayment","setValueBtnSwitchPayment","discountHiddeNotLogged","setDiscountHiddeNotLogged","imageProd","setImageProd","imageIsSelected","setImageIsSelected","paymentIsOpen","setPaymentIsOpen","imgUpload","setImgUpload","discount","setDiscount","amount","setAmount","HandlerFindUser","idUser","getUser","get","process","env","API_PATH","resUser","data","getAllProduct","fetchAll","fetch","headers","dataFetch","json","console","log","user","discount_token","rol","type","img","current","offsetWidth","asPath","route","handlerAcceptPaymentSwitch","e","isNotXBtn","target","className","search","classList","toggle","remove","add","window","location","handlerTransaction","customer","frmData","FormData","append","_id","JSON","stringify","files","_d","format","resTransaction","imgPreviewProd","reader","FileReader","onloadend","result","readAsDataURL","subcategory","business","description","title","shipping","open","CBU","auth","user_verify"],"mappings":"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","sourcesContent":["import { useState, useEffect, useRef } from 'react';\r\nimport { useCookies } from 'react-cookie';\r\nimport { useRouter } from \"next/router\";\r\nimport CurrencyFormat from 'react-currency-format';\r\nimport SendTransaction from './send.transaction.component';\r\nimport RemoveProduct from '../management/remove.product.component';\r\nimport EditProduct from '../management/edit.product.component';\r\nimport {Image, Transformation, CloudinaryContext} from 'cloudinary-react';\r\nimport Link from 'next/link';\r\nimport SwitchPrice from './price.convert.component'\r\nimport axios from 'axios'\r\nimport moment from 'moment';\r\n\r\nconst Product = ({ router }) => {\r\n    const Router = useRouter();\r\n    const imgRef = useRef(null);\r\n    const { id, name } = Router.query;\r\n    const imgContent = useRef(null);\r\n    const [credential, setCredential] = useState('');\r\n    const [imgContentState, setImgContentState] = useState('');\r\n    const [cookies, setCookie] = useCookies(['user']);\r\n    const [product, setProduct] = useState([]);\r\n    const [packageSendingAlert, setPackageSendingAlert] = useState('d-none')\r\n    const [acceptPaymentSwitch, setAcceptPaymentSwitch] = useState('accept-payment-close');\r\n    const [valueBtnSwitchPayment, setValueBtnSwitchPayment] = useState('Comprar');\r\n    const [discountHiddeNotLogged, setDiscountHiddeNotLogged] = useState('')\r\n    const [imageProd, setImageProd] = useState('/img/img-not-found.png');\r\n    const [imageIsSelected, setImageIsSelected] = useState(false);\r\n    const [paymentIsOpen, setPaymentIsOpen] = useState(false);\r\n    const [imgUpload, setImgUpload] = useState({});\r\n    const [discount, setDiscount] = useState('')\r\n    const [amount, setAmount] = useState('')\r\n\r\n    const HandlerFindUser = async idUser => {\r\n        const getUser = await axios.get(`${process.env.API_PATH}/v1/user/${idUser}`),\r\n        resUser = await getUser.data\r\n        return resUser\r\n    }\r\n    const getAllProduct = async () => {\r\n        const fetchAll = await fetch(`${process.env.API_PATH}/v1/product/${id}`, {\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Access-Control-Allow-Origin': '*'\r\n            }\r\n        })\r\n        const dataFetch = await fetchAll.json();\r\n        setProduct(dataFetch);\r\n        console.log(dataFetch)\r\n        setAmount(dataFetch.amount)\r\n        setDiscount(dataFetch.discount)\r\n        cookies.user \r\n        && !cookies.user.discount_token \r\n        || !cookies.user\r\n        || product.discount <= 0 \r\n        ? setDiscountHiddeNotLogged('d-none')\r\n        : setDiscountHiddeNotLogged('')\r\n        return dataFetch\r\n    }\r\n\r\n    useEffect(() => {\r\n        if(cookies.user \r\n            && cookies.user.rol !== product.type\r\n            || cookies.user \r\n            && cookies.user.rol !== 'master'){\r\n            setCredential('false');\r\n        }else if(!cookies.user){\r\n            setCredential('false');\r\n        }\r\n        if(cookies.user \r\n            && cookies.user.rol === 'master'\r\n            || cookies.user \r\n            && cookies.user.rol === product.type){\r\n                setCredential('true');\r\n        }\r\n        product.img && setImgContentState(imgContent.current.offsetWidth);\r\n    })\r\n    \r\n    useEffect(() => {\r\n        if (Router.asPath !== Router.route) {\r\n            getAllProduct()\r\n        }\r\n    }, [Router])\r\n    \r\n    const handlerAcceptPaymentSwitch = e => {\r\n        if(cookies.user){\r\n            const isNotXBtn = e.target.className.search('btn-close-btn-payment') == (-1)\r\n            if(acceptPaymentSwitch === 'accept-payment-close' && isNotXBtn){\r\n                setPaymentIsOpen(true);\r\n                e.target.classList.toggle('btn-danger');\r\n                e.target.classList.remove('btn-buy-now');\r\n                setValueBtnSwitchPayment('Cerrar');\r\n                setAcceptPaymentSwitch('');\r\n            }else if(isNotXBtn){\r\n                setPaymentIsOpen(false);\r\n                e.target.classList.toggle('btn-danger');\r\n                e.target.classList.add('btn-buy-now');\r\n                setValueBtnSwitchPayment('Pagar con Mercado Pago!');\r\n                setAcceptPaymentSwitch('accept-payment-close');\r\n            } \r\n        }else{\r\n            window.location = '/iniciar-sesion';\r\n        }\r\n    },\r\n    handlerTransaction = async () => {\r\n        const customer = await HandlerFindUser(cookies.user.id)\r\n        \r\n        setPackageSendingAlert('');\r\n        let frmData = new FormData();\r\n        frmData.append('id_product', product._id);\r\n        frmData.append('product', JSON.stringify(product));\r\n        frmData.append('payer', JSON.stringify(customer));\r\n        frmData.append('token_influencer', (cookies.user.discount_token) ? cookies.user.discount_token : 'organic');\r\n        frmData.append('id_client', cookies.user && cookies.user.id);\r\n        frmData.append('status_transaction', 'pending');\r\n        frmData.append('proof_payment', imgRef.current.files[0]);\r\n        frmData.append('create_at', `${moment()._d}`);\r\n        frmData.append('create_at_filter', moment().format('YYYY-MM-DD'));\r\n        const resTransaction = await SendTransaction(frmData, cookies)\r\n\r\n        return resTransaction\r\n    },\r\n    imgPreviewProd = e => {\r\n        let reader = new FileReader()\r\n        setImageIsSelected(true)\r\n        reader.onloadend = () => {\r\n            setImageProd(reader.result);\r\n        }\r\n        if (e.target.files[0]){\r\n            setImgUpload(e.target.files[0])\r\n            reader.readAsDataURL(e.target.files[0]);\r\n        }else{\r\n            setImageProd('');\r\n        }\r\n    }\r\n    return(\r\n        <>\r\n        <section className=\"row section-product\">\r\n            <article className='col-12 col-sm-12 col-lg-12 col-xl-12 p-0 mt-1'>\r\n                <nav aria-label=\"breadcrumb breadcrumb-product-open\">\r\n                    <ol className=\"breadcrumb breadcrumb-product-open\">\r\n                        <li className=\"breadcrumb-item text-primary\"><Link href=\"/\" as='/'><a>Inicio</a></Link></li>\r\n                        <li className=\"breadcrumb-item active text-primary\" aria-current=\"page\">{name}</li>\r\n                    </ol>\r\n                </nav>\r\n            </article>\r\n            <article className=\"col-12 col-sm-12 col-lg-8 col-xl-8\">\r\n                <article ref={imgContent} className=\"col-12 content-img-prod-open\">\r\n                    {credential === 'true' ? <RemoveProduct product={product}/> : false}\r\n                    {credential === 'true' ? <EditProduct product={product}/> : false}\r\n                    {\r\n                        product.img \r\n                        ? <CloudinaryContext cloudName=\"blets\">\r\n                            <Image className='card-img' publicId={`${product.img}.jpg`}>\r\n                                <Transformation crop='scale' quality='40' width={(imgContentState - 50)} dpr='auto'/>\r\n                            </Image>\r\n                        </CloudinaryContext>\r\n                        : ''\r\n                    }\r\n                </article>\r\n                <article className=\"product-description-content col-12 p-5\">\r\n                    <h2 className='col-2'>Descripción</h2><hr/>\r\n                    <ul type='none'>\r\n                        <li>\r\n                            - Categoría: <span className='text-primary'><strong>{product.type}</strong></span><br/>\r\n                        </li>\r\n                        {\r\n                            product.subcategory \r\n                            ? <li>\r\n                                - Edición: <span className='text-primary'><strong>{product.subcategory}</strong></span>\r\n                            </li>\r\n                            : '' \r\n                        }\r\n                        <li>\r\n                            - Nombre del negocio: <span className='text-primary'><strong>{product.business}</strong></span>\r\n                        </li>\r\n                        <li>\r\n                            - Ubicación: <span className='text-primary'><strong>{product.location}</strong></span>\r\n                        </li>\r\n                    </ul><hr/>\r\n                    <p>\r\n                        {product.description}\r\n                    </p>\r\n                </article>\r\n            </article>\r\n            <article className=\"col-12 col-sm-12 col-lg-4 col-xl-4 p-3\">\r\n                <article className=\"col-12 card\">\r\n                    <article className=\"card-body\">\r\n                        <h1 className=\"text-secondary component-info-buy\">{product.title}</h1>\r\n                        <h4 className={`text-dark component-info-buy`}>\r\n                            {\r\n                                amount && discount && <SwitchPrice.SwitchPriceAuth \r\n                                    discount={discount} \r\n                                    amount={amount}\r\n                                />\r\n                            }\r\n                        </h4>\r\n                        <strike className='text-secondary'>\r\n                            <h5 className={`component-info-buy ${discountHiddeNotLogged}`}>\r\n                                <CurrencyFormat \r\n                                    value={product.amount} \r\n                                    displayType={'text'} \r\n                                    thousandSeparator={true} \r\n                                    prefix={'$'}/>\r\n                            </h5>\r\n                        </strike>\r\n                        <p className='col-12 col-sm-12 col-lg-6 col-xl-6 p-0 m-0'>\r\n                            <span className={`${(!product.shipping) ? 'd-none' : 'd-block'} shipping-open bg-primary text-light`}>\r\n                                Lo recibís en tu domicilio\r\n                            </span>\r\n                            <span className={`shipping-open bg-success text-light d-block`}>\r\n                                Envío gratis\r\n                            </span>\r\n                        </p>\r\n                    </article>\r\n                </article>\r\n                <article className=\"col-12 card mt-1\">\r\n                    <article className=\"card-body\">\r\n                        <p className=\"text-dark component-info-buy\">Pagá al contado o en cuotas con \r\n                        <span className=\"text-info\"> <strong>Mercado Pago</strong></span></p>\r\n                        <p>\r\n                            <span className='bg-primary p-2 text-light'>\r\n                                Se encuentra en <strong>{product.location}</strong>\r\n                            </span>\r\n                        </p>\r\n                        <hr/>\r\n                        <p>\r\n                            <img className='ico-payments' src=\"../img/visa.png\" alt=\"Visa\"/>\r\n                            <img className='ico-payments' src=\"../img/mastercard.png\" alt=\"Mastercard\"/>\r\n                            <img className='ico-payments' src=\"../img/transfer.png\" alt=\"Transferencia\"/>\r\n                            <img className='ico-payments' src=\"../img/mp.webp\" alt=\"Mercado Pago\"/>\r\n                        </p>\r\n                        <article className={`col-12 accept-payment ${acceptPaymentSwitch}`}>\r\n                            <article className={`content--btn-payment p-5 ${acceptPaymentSwitch}`}>\r\n                                <button \r\n                                    type=\"button\" \r\n                                    className='btn text-danger btn-close-btn-payment' \r\n                                    onClick={ handlerAcceptPaymentSwitch }\r\n                                />\r\n                                <article className=\"btn-content\">\r\n                                    <input \r\n                                        onClick={() => window.open(\r\n                                            \"http://localhost:3000\",\r\n                                            \"Popup\",\"toolbar=no, location=no, statusbar=no, menubar=no, scrollbars=1, resizable=0, width=580, height=600, top=30\"\r\n                                        )}\r\n                                        className='btn btn-primary d-block mb-1'\r\n                                        type=\"button\" \r\n                                        value=\"Continuar con Mercado Pago\"\r\n                                    />\r\n                                    <div className={`alert alert-success mt-1 mb-1 ${packageSendingAlert}`} role=\"alert\">\r\n                                        Tu pedido se ha enviado! Pronto nos pondremos en contácto.\r\n                                        Sea paciente, por favor.\r\n                                    </div>\r\n                                    <p className='mt-3 d-none'>Continuar con transferencia bancaria: <span className='text-warning'>CBU {product.CBU}</span></p>\r\n                                    <p className='mt-4'>\r\n                                        <strong className='text-warning'>IMPORTANTE</strong>\r\n                                        <small className='d-block'>Envíar screenshot del comprobante de pago</small>\r\n                                        <label htmlFor=\"screenshot-payment\" className='btn btn-success'>\r\n                                            Seleccionar imagen\r\n                                        </label>\r\n                                        <input ref={imgRef} type=\"file\" onChange={imgPreviewProd} className='d-none' id='screenshot-payment'/>\r\n                                        {\r\n                                            imageIsSelected && <input \r\n                                                type='button' \r\n                                                onClick={handlerTransaction}\r\n                                                className='btn btn-warning d-block'\r\n                                                value='Finalizar y Enviar'\r\n                                            />\r\n                                        }\r\n                                        <img src={imageProd} alt=\"preview proof\" className='proof-preview-prod'/>\r\n                                    </p>\r\n                                </article>       \r\n                            </article>\r\n                        </article>\r\n                        {\r\n                            cookies?.user?.auth?.user_verify && (\r\n                                <input \r\n                                    disabled={!cookies?.user?.auth?.user_verify}\r\n                                    onClick={handlerAcceptPaymentSwitch} \r\n                                    type='button'\r\n                                    className=\"btn btn-buy-now btn-primary text-light col-12\" \r\n                                    value={valueBtnSwitchPayment}\r\n                                />\r\n                            )\r\n                        }\r\n                        {\r\n                            !cookies?.user?.auth?.user_verify && (\r\n                                <p className=\"alert bg-info mt-1\">\r\n                                    Completa tu datos para realizar esta compra\r\n                                </p>\r\n                            )\r\n                        }\r\n                    </article>\r\n                </article>\r\n            </article>\r\n        </section>\r\n        { paymentIsOpen && <article className='content-onload-shadow'/> }\r\n        </>\r\n    )\r\n}\r\n// 0720006988000038698918\r\nexport default Product;"]},"metadata":{},"sourceType":"module"}